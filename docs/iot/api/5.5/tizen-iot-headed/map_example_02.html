<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Tizen Native API: Map Example - Overlay Usage</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen_html_stylesheet.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
</script>
<link rel="search" href="search-opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Tizen Native API"/>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Tizen Native API
   &#160;<span id="projectnumber">5.5</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>The&#160;Basics&#160;of&#160;Tizen&#160;Native&#160;API&#160;Reference</span></a></li>
      <li><a href="modules.html"><span>Native&#160;API&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.php" method="get">
              <img id="MSearchSelect" src="search/mag.png" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('map_example_02.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Map Example - Overlay Usage </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This code places an Elementary map widget on a window, to exemplify part of the widget's API, related to overlays.</p>
<p>We'll start this example in the same way as <a class="el" href="map_example_01.html">Map Example 1</a>. Adding a map with buttons to control zoom, so if you didn't read it yet, just do it now.  <div class="fragment"><pre class="fragment">   map = <a class="code" href="group__Elm__Map.html#ga509621f20872fe3ef3418919f7fda396">elm_map_add</a>(win);
   evas_object_size_hint_weight_set(map, EVAS_HINT_EXPAND, EVAS_HINT_EXPAND);
   <a class="code" href="group__Elm__Win.html#ga505d6bd217e5ee01e82b548ec35986eb" title="Adds subobj as a resize object of window obj.">elm_win_resize_object_add</a>(win, map);
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(map);

   box = <a class="code" href="group__Elm__Box.html#ga3d0998b60ada633bacfa8869a921cfd7">elm_box_add</a>(win);
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(box);

   bt = <a class="code" href="group__Elm__Button.html#ga0021b9d86d822367035843ed18bc6ea9">elm_button_add</a>(win);
   elm_object_text_set(bt, <span class="stringliteral">&quot;+&quot;</span>);
   elm_box_pack_end(box, bt);
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(bt);
   <a class="code" href="group__Evas__Canvas.html#ga18a8b179f94d21b2b09e19db11741061">evas_object_smart_callback_add</a>(bt, <span class="stringliteral">&quot;clicked&quot;</span>, _bt_zoom_in, map);

   bt = <a class="code" href="group__Elm__Button.html#ga0021b9d86d822367035843ed18bc6ea9">elm_button_add</a>(win);
   elm_object_text_set(bt, <span class="stringliteral">&quot;-&quot;</span>);
   elm_box_pack_end(box, bt);
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(bt);
   <a class="code" href="group__Evas__Canvas.html#ga18a8b179f94d21b2b09e19db11741061">evas_object_smart_callback_add</a>(bt, <span class="stringliteral">&quot;clicked&quot;</span>, _bt_zoom_out, map);

   bt = <a class="code" href="group__Elm__Button.html#ga0021b9d86d822367035843ed18bc6ea9">elm_button_add</a>(win);
   elm_object_text_set(bt, <span class="stringliteral">&quot;X&quot;</span>);
   elm_box_pack_end(box, bt);
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(bt);
   <a class="code" href="group__Evas__Canvas.html#ga18a8b179f94d21b2b09e19db11741061">evas_object_smart_callback_add</a>(bt, <span class="stringliteral">&quot;clicked&quot;</span>, _bt_zoom_fit, map);

   bt = <a class="code" href="group__Elm__Button.html#ga0021b9d86d822367035843ed18bc6ea9">elm_button_add</a>(win);
   elm_object_text_set(bt, <span class="stringliteral">&quot;#&quot;</span>);
   elm_box_pack_end(box, bt);
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(bt);
   <a class="code" href="group__Evas__Canvas.html#ga18a8b179f94d21b2b09e19db11741061">evas_object_smart_callback_add</a>(bt, <span class="stringliteral">&quot;clicked&quot;</span>, _bt_zoom_fill, map);
</pre></div></p>
<p>Overlays can be placed over the map to represent anything we want. Let's say we want to represent some countries and cities with overlays.</p>
<p>Before we create city or country overlays, let's create class overlays.</p>
<p><div class="fragment"><pre class="fragment">   city_clas = elm_map_overlay_class_add(map);
   <a class="code" href="group__Elm__Map.html#gab6ec9926a0e290b8513733dea198d0c8">elm_map_overlay_displayed_zoom_min_set</a>(city_clas, 3);
   <a class="code" href="group__Elm__Map.html#ga1e43a278f16fcf4330c46d68f61fe294">elm_map_overlay_icon_set</a>(city_clas, _clas_city_icon_get(map));
</pre></div> These lines create a class overlay which represents cities. This class overlay will be used for grouping city overlays. Later city overlays in the same class are appended to this class overlay. if city overlays are near each other, they will be grouped.</p>
<p>We can set the icon for the class so that the icon will be displayed when city overlays are grouped. We can set the zoom required to display the overlays that belongs to this class, so if the zoom is less than this value, nothing will be shown.</p>
<p>Country class can be created in the same way. <div class="fragment"><pre class="fragment">   country_clas = elm_map_overlay_class_add(map);
   <a class="code" href="group__Elm__Map.html#gab6ec9926a0e290b8513733dea198d0c8">elm_map_overlay_displayed_zoom_min_set</a>(country_clas, 1);
   <a class="code" href="group__Elm__Map.html#ga1e43a278f16fcf4330c46d68f61fe294">elm_map_overlay_icon_set</a>(country_clas, _clas_country_icon_get(map));
</pre></div></p>
<p>Next we'll create some overlays representing cities and countries. We set the data for the overlay so that can be used later when clicked callback is called. We'll append them into city class to be grouped. We'll append them in a list, to close up them later. To create a default overlay, we need to pass the coordinates. <div class="fragment"><pre class="fragment">   ovl = elm_map_overlay_add(map, -43.2, -22.9);
   <a class="code" href="group__Elm__Map.html#ga1e43a278f16fcf4330c46d68f61fe294">elm_map_overlay_icon_set</a>(ovl, _city_icon_get(map));
   <a class="code" href="group__Elm__Map.html#ga0067f7e03f714cee441291c27f00e2f5">elm_map_overlay_data_set</a>(ovl, &amp;data_rio);
   <a class="code" href="group__Elm__Map.html#ga777d9957f6678d76961f60d8c0a5e47a">elm_map_overlay_class_append</a>(city_clas, ovl);
   ovls = <a class="code" href="group__Eina__List__Group.html#ga92ec14d1a1040a361c4d8cd0ab7b0ecc" title="Appends the given data to the given linked list.">eina_list_append</a>(ovls, ovl);
</pre></div></p>
<p>We subscribe a smart callback "overlay,clicked" to create bubble on the clicked overlay.  <div class="fragment"><pre class="fragment">   <a class="code" href="group__Evas__Canvas.html#ga18a8b179f94d21b2b09e19db11741061">evas_object_smart_callback_add</a>(map, <span class="stringliteral">&quot;overlay,clicked&quot;</span>, _overlay_cb, NULL);
</pre></div></p>
<p>Finally, on our <code>main</code> function, we ask the map to show all the overlays with the biggest zoom possible, passing the list of overlays added. <div class="fragment"><pre class="fragment">   <a class="code" href="group__Elm__Map.html#ga9836386af587e54f3b9eb9a4cffb085f">elm_map_overlays_show</a>(ovls);
</pre></div></p>
<p>We have created a specific structure for this example to store the name of the place and a path to a image file to represent it.  <div class="fragment"><pre class="fragment"><span class="keyword">typedef</span> <span class="keyword">struct </span>_Overlay_Data
{
   <span class="keyword">const</span> <span class="keywordtype">char</span> *name;
   <span class="keyword">const</span> <span class="keywordtype">char</span> *file;
} Overlay_Data;
</pre></div></p>
<p>We'll create instances for each place: <div class="fragment"><pre class="fragment">Overlay_Data data_argentina = {<span class="stringliteral">&quot;Argentina&quot;</span>, NULL};
Overlay_Data data_chile = {<span class="stringliteral">&quot;Chile&quot;</span>, NULL};
Overlay_Data data_sampa = {<span class="stringliteral">&quot;São Paulo&quot;</span>, NULL};
Overlay_Data data_rio = {<span class="stringliteral">&quot;Rio de Janeiro&quot;</span>, NULL};
Overlay_Data data_brasilia = {<span class="stringliteral">&quot;Brasília&quot;</span>, NULL};

<span class="keyword">static</span> <a class="code" href="group__Elm__Map.html#ga6b75280d64c71af38288849960d572fe">Elm_Map_Overlay</a> *bubble;
<span class="keyword">const</span> <span class="keywordtype">char</span> *data_dir;

<span class="keyword">static</span> <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *
_icon_get(<a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj, <span class="keyword">const</span> <span class="keywordtype">char</span> *file)
{
   <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *icon = <a class="code" href="group__Elm__Icon.html#ga5739728c1209f90422cf65a778a16502">elm_icon_add</a>(obj);
   <a class="code" href="group__Elm__Image.html#gad1a96ede5f513042cef3c1dac4572f73">elm_image_file_set</a>(icon, file, NULL);
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(icon);
   <span class="keywordflow">return</span> icon;
}

<span class="keyword">static</span> <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *
_city_icon_get(<a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj)
{
   <span class="keywordtype">char</span> buf[256];
   snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%s/images/icon_07.png&quot;</span>, data_dir);
   <span class="keywordflow">return</span> _icon_get(obj, buf);
}

<span class="keyword">static</span> <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *
_clas_city_icon_get(<a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj)
{
   <span class="keywordtype">char</span> buf[256];
   snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%s/images/icon_05.png&quot;</span>, data_dir);
   <span class="keywordflow">return</span> _icon_get(obj, buf);
}

<span class="keyword">static</span> <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *
_country_icon_get(<a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj)
{
   <span class="keywordtype">char</span> buf[256];
   snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%s/images/icon_06.png&quot;</span>, data_dir);
   <span class="keywordflow">return</span> _icon_get(obj, buf);
}

<span class="keyword">static</span> <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *
_clas_country_icon_get(<a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj)
{
   <span class="keywordtype">char</span> buf[256];
   snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%s/images/icon_04.png&quot;</span>, data_dir);
   <span class="keywordflow">return</span> _icon_get(obj, buf);
}

<span class="keyword">static</span> <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *
_box_get(<a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj, Overlay_Data *data)
{
   <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *bx, *img, *label;
   bx = <a class="code" href="group__Elm__Box.html#ga3d0998b60ada633bacfa8869a921cfd7">elm_box_add</a>(obj);
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(bx);

   img = <a class="code" href="group__Evas__Object__Image.html#gadd901a6b181c38dc040537b3fd76fcc6">evas_object_image_add</a>(evas_object_evas_get(obj));
   evas_object_image_file_set(img, data-&gt;file, NULL);
   evas_object_image_filled_set(img, <a class="code" href="group__Eina__Types__Group.html#ga05c12dacc8b4058994df842b41be85fc">EINA_TRUE</a>);
   evas_object_size_hint_min_set(img, 64, 64);
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(img);
   elm_box_pack_end(bx, img);

   label = <a class="code" href="group__Elm__Label.html#ga01e161a300e3ee6f7a13a44505724e03" title="Add a new label to the parent.">elm_label_add</a>(obj);
   elm_object_text_set(label, data-&gt;name);
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(label);
   elm_box_pack_end(bx, label);
   <span class="keywordflow">return</span> bx;
}

<span class="keyword">static</span> <span class="keywordtype">void</span>
_overlay_cb(<span class="keywordtype">void</span> *data EINA_UNUSED, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *map, <span class="keywordtype">void</span> *ev)
{
   printf(<span class="stringliteral">&quot;Overlay clicked\n&quot;</span>);
   <a class="code" href="group__Elm__Map.html#ga6b75280d64c71af38288849960d572fe">Elm_Map_Overlay</a> *overlay = ev;
   <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *bx;

   <span class="comment">// prevent duplication</span>
   <span class="keywordflow">if</span> (!bubble)  bubble = elm_map_overlay_bubble_add(map);

   <a class="code" href="group__Elm__Map.html#ga509d308528ef4e0ee2f67f4513caae79">elm_map_overlay_bubble_follow</a>(bubble, overlay);
   <a class="code" href="group__Elm__Map.html#ga9f32522cadd9d1aa4e2de0de2190f2ad">elm_map_overlay_bubble_content_clear</a>(bubble);
   bx = _box_get(map, <a class="code" href="group__Elm__Map.html#gab0f5c68371bf38bd54adcf15b02ff774">elm_map_overlay_data_get</a>(overlay));
   <a class="code" href="group__Elm__Map.html#ga09f6eac5ac790f1661358fe1c33d5382">elm_map_overlay_bubble_content_append</a>(bubble, bx);
}

<span class="keyword">static</span> <span class="keywordtype">void</span>
_bt_zoom_in(<span class="keywordtype">void</span> *data, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj EINA_UNUSED, <span class="keywordtype">void</span> *ev EINA_UNUSED)
{
   <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *map = data;
   <span class="keywordtype">int</span> zoom;

   <a class="code" href="group__Elm__Map.html#gaacec2a1019adf71a9b7e3b5fa011c90e" title="Set the zoom mode used by the map object.">elm_map_zoom_mode_set</a>(map, <a class="code" href="group__Elm__Map.html#ggae60f2343c0e098264c246d7e2679abe5a35d8c2519926ab59a7bd5835739cd9b7">ELM_MAP_ZOOM_MODE_MANUAL</a>);
   zoom = <a class="code" href="group__Elm__Map.html#ga8e5d0739948105e07d77a00013831f6c" title="Get the zoom level of the map.">elm_map_zoom_get</a>(map);
   <a class="code" href="group__Elm__Map.html#ga6869a7b99657ee01b0ee19c68c47fc0a" title="Set the zoom level of the map.">elm_map_zoom_set</a>(map, zoom + 1);
}

<span class="keyword">static</span> <span class="keywordtype">void</span>
_bt_zoom_out(<span class="keywordtype">void</span> *data, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj EINA_UNUSED, <span class="keywordtype">void</span> *ev EINA_UNUSED)
{
   <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *map = data;
   <span class="keywordtype">int</span> zoom;

   <a class="code" href="group__Elm__Map.html#gaacec2a1019adf71a9b7e3b5fa011c90e" title="Set the zoom mode used by the map object.">elm_map_zoom_mode_set</a>(map, <a class="code" href="group__Elm__Map.html#ggae60f2343c0e098264c246d7e2679abe5a35d8c2519926ab59a7bd5835739cd9b7">ELM_MAP_ZOOM_MODE_MANUAL</a>);
   zoom = <a class="code" href="group__Elm__Map.html#ga8e5d0739948105e07d77a00013831f6c" title="Get the zoom level of the map.">elm_map_zoom_get</a>(map);
   <a class="code" href="group__Elm__Map.html#ga6869a7b99657ee01b0ee19c68c47fc0a" title="Set the zoom level of the map.">elm_map_zoom_set</a>(map, zoom - 1);
}

<span class="keyword">static</span> <span class="keywordtype">void</span>
_bt_zoom_fit(<span class="keywordtype">void</span> *data, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj EINA_UNUSED, <span class="keywordtype">void</span> *event_info EINA_UNUSED)
{
   <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *map = data;
   <a class="code" href="group__Elm__Map.html#gaacec2a1019adf71a9b7e3b5fa011c90e" title="Set the zoom mode used by the map object.">elm_map_zoom_mode_set</a>(map, <a class="code" href="group__Elm__Map.html#ggae60f2343c0e098264c246d7e2679abe5a2146e83a3cb0809732a6643a765b6e21">ELM_MAP_ZOOM_MODE_AUTO_FIT</a>);
}

<span class="keyword">static</span> <span class="keywordtype">void</span>
_bt_zoom_fill(<span class="keywordtype">void</span> *data, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj EINA_UNUSED, <span class="keywordtype">void</span> *event_info EINA_UNUSED)
{
   <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *map = data;
   <a class="code" href="group__Elm__Map.html#gaacec2a1019adf71a9b7e3b5fa011c90e" title="Set the zoom mode used by the map object.">elm_map_zoom_mode_set</a>(map, <a class="code" href="group__Elm__Map.html#ggae60f2343c0e098264c246d7e2679abe5a380228deffe851d3598cd2b0e22948ad">ELM_MAP_ZOOM_MODE_AUTO_FILL</a>);
}

<span class="comment">/* FIXME: it shouldn&#39;t be required. For unknown reason map won&#39;t call</span>
<span class="comment"> * pan_calculate until shot delay time, but then it will take a screenshot</span>
<span class="comment"> * when the map isn&#39;t loaded yet (actually it won&#39;t be downloaded, because</span>
<span class="comment"> * after the SS it will kill the example). */</span>
<span class="keyword">static</span> <a class="code" href="group__Eina__Types__Group.html#ga3fe0caf72e93b1bab1ca8ee3ccf3f226">Eina_Bool</a>
_nasty_hack(<span class="keywordtype">void</span> *data)
{
   <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *o = data;
   <a class="code" href="group__Evas__Canvas.html#ga5ff87cc4ce6bc43e3b640a6d37f73043">Evas</a> *e = evas_object_evas_get(o);
   <a class="code" href="group__Evas__Canvas.html#ga0cfa7df81a1c781997f7cdcb8aa4f69e">evas_smart_objects_calculate</a>(e);
   <span class="keywordflow">return</span> <a class="code" href="group__Ecore__Main__Loop__Group.html#gae0c653baad8836232c0dc27f91f875d6">ECORE_CALLBACK_CANCEL</a>;
}

EAPI_MAIN <span class="keywordtype">int</span>
elm_main(<span class="keywordtype">int</span> argc EINA_UNUSED, <span class="keywordtype">char</span> **argv EINA_UNUSED)
{
   <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *win, *map, *box, *bt;
   <a class="code" href="struct__Eina__List.html">Eina_List</a> *ovls = NULL;
   <a class="code" href="group__Elm__Map.html#ga6b75280d64c71af38288849960d572fe">Elm_Map_Overlay</a> *ovl, *city_clas, *country_clas;
   <span class="keywordtype">char</span> buf[255];

   <a class="code" href="group__Elm__App.html#ga0cefb59efb95841232561d67e34d9909">elm_app_info_set</a>(elm_main, <span class="stringliteral">&quot;elementary&quot;</span>, <span class="stringliteral">&quot;images&quot;</span>);
   data_dir = <a class="code" href="group__Elm__App.html#ga92a09dbf88cc1ca3eab51c51dea589d0">elm_app_data_dir_get</a>();

   snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%s/images/rock_01.jpg&quot;</span>, <span class="stringliteral">&quot;sdf&quot;</span>);
   data_argentina.file = strdup(buf);
   snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%s/images/rock_02.jpg&quot;</span>, <span class="stringliteral">&quot;sdf&quot;</span>);
   data_chile.file = strdup(buf);
   snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%s/images/sky_01.jpg&quot;</span>, <span class="stringliteral">&quot;sdf&quot;</span>);
   data_sampa.file = strdup(buf);
   snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%s/images/sky_02.jpg&quot;</span>, <span class="stringliteral">&quot;sdf&quot;</span>);
   data_rio.file = strdup(buf);
   snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%s/images/sky_03.jpg&quot;</span>, <span class="stringliteral">&quot;sdf&quot;</span>);
</pre></div></p>
<p>To return an icon, all we need to do is to add a elm_icon and return it:  <div class="fragment"><pre class="fragment">_icon_get(<a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj, <span class="keyword">const</span> <span class="keywordtype">char</span> *file)
{
   <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *icon = <a class="code" href="group__Elm__Icon.html#ga5739728c1209f90422cf65a778a16502">elm_icon_add</a>(obj);
   <a class="code" href="group__Elm__Image.html#gad1a96ede5f513042cef3c1dac4572f73">elm_image_file_set</a>(icon, file, NULL);
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(icon);
   <span class="keywordflow">return</span> icon;
}
</pre></div></p>
<p>For the content, let's return something more elaborate. We will return a box with an image representing the place, and the name of this place: <div class="fragment"><pre class="fragment">_box_get(<a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj, Overlay_Data *data)
{
   <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *bx, *img, *label;
   bx = <a class="code" href="group__Elm__Box.html#ga3d0998b60ada633bacfa8869a921cfd7">elm_box_add</a>(obj);
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(bx);

   img = <a class="code" href="group__Evas__Object__Image.html#gadd901a6b181c38dc040537b3fd76fcc6">evas_object_image_add</a>(evas_object_evas_get(obj));
   evas_object_image_file_set(img, data-&gt;file, NULL);
   evas_object_image_filled_set(img, <a class="code" href="group__Eina__Types__Group.html#ga05c12dacc8b4058994df842b41be85fc">EINA_TRUE</a>);
   evas_object_size_hint_min_set(img, 64, 64);
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(img);
   elm_box_pack_end(bx, img);

   label = <a class="code" href="group__Elm__Label.html#ga01e161a300e3ee6f7a13a44505724e03" title="Add a new label to the parent.">elm_label_add</a>(obj);
   elm_object_text_set(label, data-&gt;name);
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(label);
   elm_box_pack_end(bx, label);
   <span class="keywordflow">return</span> bx;
}
</pre></div></p>
<p>See <a class="el" href="map_example_02_8c-example.html">map_example_02.c</a> for full source, whose window should look like this picture:</p>
<div class="image">
<img src="screenshots/map_example_02.png" alt="map_example_02.png"/>
</div>
  </div></div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
<hr size="1"/>
<center>
<small>Except as noted, this content - excluding the Code Examples - is licensed under <a href="http://creativecommons.org/licenses/by/3.0/legalcode" target="_blank">Creative Commons Attribution 3.0</a>
and all of the Code Examples contained herein are licensed under <a href="https://www.tizen.org/bsd-3-clause-license" target="_blank">BSD-3-Clause</a>.<br/>For details, see the <a href="https://www.tizen.org/content-license" target="_blank">Content License</a>.&nbsp;</small>
</center>
</body>
</html>
