<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Tizen Native API: Map Example - Creation and Zoom</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen_html_stylesheet.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
</script>
<link rel="search" href="search-opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Tizen Native API"/>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Tizen Native API
   &#160;<span id="projectnumber">5.5</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>The&#160;Basics&#160;of&#160;Tizen&#160;Native&#160;API&#160;Reference</span></a></li>
      <li><a href="modules.html"><span>Native&#160;API&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.php" method="get">
              <img id="MSearchSelect" src="search/mag.png" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('map_example_01.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Map Example - Creation and Zoom </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This code places an Elementary map widget on a window, to exemplify part of the widget's API.</p>
<p>Let's start adding a map to our window:  <div class="fragment"><pre class="fragment">   map = <a class="code" href="group__Elm__Map.html#ga509621f20872fe3ef3418919f7fda396">elm_map_add</a>(win);
   evas_object_size_hint_weight_set(map, EVAS_HINT_EXPAND, EVAS_HINT_EXPAND);
   <a class="code" href="group__Elm__Win.html#ga505d6bd217e5ee01e82b548ec35986eb" title="Adds subobj as a resize object of window obj.">elm_win_resize_object_add</a>(win, map);
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(map);
</pre></div></p>
<p>It's enough to display a world map inside our window. But usually you'll need to let user interact with the map. We need to place some buttons, so the user could control the map. It's done on the following code. If you don't know about boxes, or buttons, check their examples, <a class="el" href="box_example_01.html">Box Example 1</a> and <a class="el" href="button_example_01.html">Button Example 1</a>. <div class="fragment"><pre class="fragment">   box = <a class="code" href="group__Elm__Box.html#ga3d0998b60ada633bacfa8869a921cfd7">elm_box_add</a>(win);
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(box);

   bt = <a class="code" href="group__Elm__Button.html#ga0021b9d86d822367035843ed18bc6ea9">elm_button_add</a>(win);
   elm_object_text_set(bt, <span class="stringliteral">&quot;+&quot;</span>);
   elm_box_pack_end(box, bt);
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(bt);
   <a class="code" href="group__Evas__Canvas.html#ga18a8b179f94d21b2b09e19db11741061">evas_object_smart_callback_add</a>(bt, <span class="stringliteral">&quot;clicked&quot;</span>, _bt_zoom_in, map);

   bt = <a class="code" href="group__Elm__Button.html#ga0021b9d86d822367035843ed18bc6ea9">elm_button_add</a>(win);
   elm_object_text_set(bt, <span class="stringliteral">&quot;-&quot;</span>);
   elm_box_pack_end(box, bt);
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(bt);
   <a class="code" href="group__Evas__Canvas.html#ga18a8b179f94d21b2b09e19db11741061">evas_object_smart_callback_add</a>(bt, <span class="stringliteral">&quot;clicked&quot;</span>, _bt_zoom_out, map);

   bt = <a class="code" href="group__Elm__Button.html#ga0021b9d86d822367035843ed18bc6ea9">elm_button_add</a>(win);
   elm_object_text_set(bt, <span class="stringliteral">&quot;X&quot;</span>);
   elm_box_pack_end(box, bt);
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(bt);
   <a class="code" href="group__Evas__Canvas.html#ga18a8b179f94d21b2b09e19db11741061">evas_object_smart_callback_add</a>(bt, <span class="stringliteral">&quot;clicked&quot;</span>, _bt_zoom_fit, map);

   bt = <a class="code" href="group__Elm__Button.html#ga0021b9d86d822367035843ed18bc6ea9">elm_button_add</a>(win);
   elm_object_text_set(bt, <span class="stringliteral">&quot;#&quot;</span>);
   elm_box_pack_end(box, bt);
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(bt);
   <a class="code" href="group__Evas__Canvas.html#ga18a8b179f94d21b2b09e19db11741061">evas_object_smart_callback_add</a>(bt, <span class="stringliteral">&quot;clicked&quot;</span>, _bt_zoom_fill, map);
</pre></div></p>
<p>We are adding callback functions that will be called when the user clicks over these buttons. Let's study such functions, starting from the function that will zoom in the map:  <div class="fragment"><pre class="fragment"><span class="keyword">static</span> <span class="keywordtype">void</span>
_bt_zoom_in(<span class="keywordtype">void</span> *data, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj EINA_UNUSED, <span class="keywordtype">void</span> *ev EINA_UNUSED)
{
   <span class="keywordtype">int</span> zoom;
   <a class="code" href="group__Elm__Map.html#gaacec2a1019adf71a9b7e3b5fa011c90e" title="Set the zoom mode used by the map object.">elm_map_zoom_mode_set</a>(data, <a class="code" href="group__Elm__Map.html#ggae60f2343c0e098264c246d7e2679abe5a35d8c2519926ab59a7bd5835739cd9b7">ELM_MAP_ZOOM_MODE_MANUAL</a>);
   zoom = <a class="code" href="group__Elm__Map.html#ga8e5d0739948105e07d77a00013831f6c" title="Get the zoom level of the map.">elm_map_zoom_get</a>(data);
   <a class="code" href="group__Elm__Map.html#ga6869a7b99657ee01b0ee19c68c47fc0a" title="Set the zoom level of the map.">elm_map_zoom_set</a>(data, zoom + 1);
}
</pre></div></p>
<p>First thing done is assure zoom mode is set to manual. It's the default mode, but the other buttons will change this, so before setting a new zoom value, we need to change the zoom mode.</p>
<p>Then, we get the current zoom value, increment that, and set the new value to the map. If it's bigger than max zoom value allowed, it will remain on the maximum allowed, nothing bad will happen. This way we don't need to check first if it won't be bigger than max.</p>
<p>Zoom out function is basically the same thing, but zoom will be decremented instead of incremented: <div class="fragment"><pre class="fragment"><span class="keyword">static</span> <span class="keywordtype">void</span>
_bt_zoom_out(<span class="keywordtype">void</span> *data, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj EINA_UNUSED, <span class="keywordtype">void</span> *ev EINA_UNUSED)
{
   <span class="keywordtype">int</span> zoom;
   <a class="code" href="group__Elm__Map.html#gaacec2a1019adf71a9b7e3b5fa011c90e" title="Set the zoom mode used by the map object.">elm_map_zoom_mode_set</a>(data, <a class="code" href="group__Elm__Map.html#ggae60f2343c0e098264c246d7e2679abe5a35d8c2519926ab59a7bd5835739cd9b7">ELM_MAP_ZOOM_MODE_MANUAL</a>);
   zoom = <a class="code" href="group__Elm__Map.html#ga8e5d0739948105e07d77a00013831f6c" title="Get the zoom level of the map.">elm_map_zoom_get</a>(data);
   <a class="code" href="group__Elm__Map.html#ga6869a7b99657ee01b0ee19c68c47fc0a" title="Set the zoom level of the map.">elm_map_zoom_set</a>(data, zoom - 1);
}
</pre></div></p>
<p>The "X" button, when pressed, will call a function that will zoom the map until it fits inside the scroll frame with no pixels outside this area: <div class="fragment"><pre class="fragment"><span class="keyword">static</span> <span class="keywordtype">void</span>
_bt_zoom_fit(<span class="keywordtype">void</span> *data, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj EINA_UNUSED, <span class="keywordtype">void</span> *event_info EINA_UNUSED)
{
   <a class="code" href="group__Elm__Map.html#gaacec2a1019adf71a9b7e3b5fa011c90e" title="Set the zoom mode used by the map object.">elm_map_zoom_mode_set</a>(data, <a class="code" href="group__Elm__Map.html#ggae60f2343c0e098264c246d7e2679abe5a2146e83a3cb0809732a6643a765b6e21">ELM_MAP_ZOOM_MODE_AUTO_FIT</a>);
}
</pre></div></p>
<p>And the "#" button, will call a function that will zoom until map fills scroll, ensuring no pixels are left unfilled: <div class="fragment"><pre class="fragment"><span class="keyword">static</span> <span class="keywordtype">void</span>
_bt_zoom_fill(<span class="keywordtype">void</span> *data, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj EINA_UNUSED, <span class="keywordtype">void</span> *event_info EINA_UNUSED)
{
   <a class="code" href="group__Elm__Map.html#gaacec2a1019adf71a9b7e3b5fa011c90e" title="Set the zoom mode used by the map object.">elm_map_zoom_mode_set</a>(data, <a class="code" href="group__Elm__Map.html#ggae60f2343c0e098264c246d7e2679abe5a380228deffe851d3598cd2b0e22948ad">ELM_MAP_ZOOM_MODE_AUTO_FILL</a>);
}
</pre></div></p>
<p>But we can also set map to show something different from default world map, changing the zoom level and region shown. Let's pick a wonderful city coordinates, one placed at <code> 43 20 S, 22 90 W </code>. Since map uses double variables to represent latitude and longitude, to represent north or east, we should represent it as positive values, and south or west as negative. Also, the value will be represented as degree.min. So, for example, our longitude <code> 43 20 S </code> will be represented by the value <code> -43.20 </code>. A zoom set to <code>12</code> should be enough to show a city. <div class="fragment"><pre class="fragment">   elm_map_region_show(map, -43.2, -22.9);
</pre></div></p>
<p>See <a class="el" href="map_example_01_8c-example.html">map_example_01.c</a> for full source, whose window should look like this picture:</p>
<div class="image">
<img src="screenshots/map_example_01.png" alt="map_example_01.png"/>
</div>
  </div></div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
<hr size="1"/>
<center>
<small>Except as noted, this content - excluding the Code Examples - is licensed under <a href="http://creativecommons.org/licenses/by/3.0/legalcode" target="_blank">Creative Commons Attribution 3.0</a>
and all of the Code Examples contained herein are licensed under <a href="https://www.tizen.org/bsd-3-clause-license" target="_blank">BSD-3-Clause</a>.<br/>For details, see the <a href="https://www.tizen.org/content-license" target="_blank">Content License</a>.&nbsp;</small>
</center>
</body>
</html>
