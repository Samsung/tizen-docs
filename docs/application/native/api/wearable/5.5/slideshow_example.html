<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Tizen Native API: Slideshow widget example</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen_html_stylesheet.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
</script>
<link rel="search" href="search-opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Tizen Native API"/>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Tizen Native API
   &#160;<span id="projectnumber">5.5</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>The&#160;Basics&#160;of&#160;Tizen&#160;Native&#160;API&#160;Reference</span></a></li>
      <li><a href="modules.html"><span>Native&#160;API&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.php" method="get">
              <img id="MSearchSelect" src="search/mag.png" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('slideshow_example.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Slideshow widget example </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This application is aimed to exemplify the slideshow widget. It consists of a window with a slideshow widget set as "resize
 object", along with a control bar, in the form of a notify. Those controls will exercise most of the slideshow's API functions.</p>
<p>We create the slideshow, itself, first, making it <b>loop</b> on its image items, when in slideshow mode:  <div class="fragment"><pre class="fragment">   slideshow = elm_slideshow_add(win);
   elm_slideshow_loop_set(slideshow, <a class="code" href="group__Eina__Types__Group.html#ga05c12dacc8b4058994df842b41be85fc">EINA_TRUE</a>);
   evas_object_size_hint_weight_set(slideshow,
                                    EVAS_HINT_EXPAND, EVAS_HINT_EXPAND);
   <a class="code" href="group__Elm__Win.html#ga505d6bd217e5ee01e82b548ec35986eb" title="Adds subobj as a resize object of window obj.">elm_win_resize_object_add</a>(win, slideshow);
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(slideshow);
</pre></div></p>
<p>Next, we define the <b>item class</b> for our slideshow items. Slideshow images are going to be Elementary <a class="el" href="group__Elm__Photo.html">photo</a> widgets, here, as pointed by our <code>get</code> class function. We'll let the Elementary infrastructure to delete those objects for us, and, as there's no additional data attached to our slideshow items, the <code>del</code> class function can be left undefined:  <div class="fragment"><pre class="fragment"><span class="keyword">static</span> <a class="code" href="struct__Elm__Slideshow__Item__Class.html">Elm_Slideshow_Item_Class</a> itc;
</pre></div>  <div class="fragment"><pre class="fragment">   itc.func.get = _get;
   itc.func.del = NULL;
</pre></div>  <div class="fragment"><pre class="fragment"><span class="comment">/* get our images to make slideshow items */</span>
<span class="keyword">static</span> <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *
_get(<span class="keywordtype">void</span> *data, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj)
{
   <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *photo = elm_photo_add(obj);
   elm_photo_file_set(photo, data);
   elm_photo_fill_inside_set(photo, <a class="code" href="group__Eina__Types__Group.html#ga05c12dacc8b4058994df842b41be85fc">EINA_TRUE</a>);
   <a class="code" href="group__Elm__Styles.html#ga7fc2d1f9ba723470da7a05799c49f7fe">elm_object_style_set</a>(photo, <span class="stringliteral">&quot;shadow&quot;</span>);

   <span class="keywordflow">return</span> photo;
}
</pre></div></p>
<p>We now get to populate the slideshow widget with items. Our images are going to be some randomly chosen from the Elementary package, nine of them. For the first eight, we insert them ordered in the widget, by using elm_slideshow_item_sorted_insert(). The comparing function will use the image names to sort items. The last item is inserted at the end of the slideshow's items list, with elm_slideshow_item_add(). We check out how that list ends with elm_slideshow_items_get(), than:  <div class="fragment"><pre class="fragment"></pre></div>  <div class="fragment"><pre class="fragment">   <a class="code" href="group__Elm__General.html#ga13a0c231414b86e62f68afe3c6fb462b">Elm_Object_Item</a> *slide_first = NULL, *slide_last = NULL, *slide_it = NULL;
   <span class="keyword">const</span> <span class="keywordtype">char</span> *transition, *layout;
   <span class="keyword">const</span> <a class="code" href="struct__Eina__List.html">Eina_List</a> *l, *list;
   <span class="keyword">const</span> <span class="keywordtype">char</span> *data_dir;
   <span class="keywordtype">char</span> img[IMG_NUM][PATH_MAX];
   <span class="keywordtype">char</span> *img_files[] =
     {
        <span class="stringliteral">&quot;logo.png&quot;</span>, <span class="stringliteral">&quot;plant_01.jpg&quot;</span>, <span class="stringliteral">&quot;rock_01.jpg&quot;</span>, <span class="stringliteral">&quot;rock_02.jpg&quot;</span>, <span class="stringliteral">&quot;sky_01.jpg&quot;</span>,
        <span class="stringliteral">&quot;wood_01.jpg&quot;</span>, <span class="stringliteral">&quot;mystrale.jpg&quot;</span>, <span class="stringliteral">&quot;mystrale_2.jpg&quot;</span>
     };
   <span class="keywordtype">int</span> i = 0;

   <a class="code" href="group__Elm__App.html#ga0cefb59efb95841232561d67e34d9909">elm_app_info_set</a>(elm_main, <span class="stringliteral">&quot;elementary&quot;</span>, <span class="stringliteral">&quot;images&quot;</span>);

   data_dir = <a class="code" href="group__Elm__App.html#ga92a09dbf88cc1ca3eab51c51dea589d0">elm_app_data_dir_get</a>();
   <span class="keywordflow">for</span> (i = 0; i &lt; IMG_NUM; i++)
     snprintf(img[i], PATH_MAX, <span class="stringliteral">&quot;%s/images/%s&quot;</span>, data_dir, img_files[i]);

   <a class="code" href="group__Elm__General.html#ga7a05f37fd3a019da5e26c5fc91fcd937">elm_policy_set</a>(<a class="code" href="group__Elm__General.html#ggaa16f3378ecdbf660fa378402e3c5a0a9a02fadb6faada04b19d0fa42c11a8d32a">ELM_POLICY_QUIT</a>, <a class="code" href="group__Elm__General.html#gga46af37e6ac2c406321060be827117196abbe0962d88ae12afe1a173da881f56cd">ELM_POLICY_QUIT_LAST_WINDOW_CLOSED</a>);

   win = <a class="code" href="group__Elm__Win.html#gac75d7752662fab73d6420706ce5be996">elm_win_util_standard_add</a>(<span class="stringliteral">&quot;slideshow&quot;</span>, <span class="stringliteral">&quot;Slideshow example&quot;</span>);
   <a class="code" href="group__Elm__Win.html#ga9a16a2f8c9fd5b6e9203ed9dcb53ea8b" title="Sets the window&#39;s autodel state.">elm_win_autodel_set</a>(win, <a class="code" href="group__Eina__Types__Group.html#ga05c12dacc8b4058994df842b41be85fc">EINA_TRUE</a>);

   slideshow = elm_slideshow_add(win);
   elm_slideshow_loop_set(slideshow, <a class="code" href="group__Eina__Types__Group.html#ga05c12dacc8b4058994df842b41be85fc">EINA_TRUE</a>);
   evas_object_size_hint_weight_set(slideshow,
                                    EVAS_HINT_EXPAND, EVAS_HINT_EXPAND);
   <a class="code" href="group__Elm__Win.html#ga505d6bd217e5ee01e82b548ec35986eb" title="Adds subobj as a resize object of window obj.">elm_win_resize_object_add</a>(win, slideshow);
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(slideshow);

   itc.func.get = _get;
   itc.func.del = NULL;

   <span class="keywordflow">for</span> (i = 0; i &lt; IMG_NUM; i++)
     {
        slide_it = elm_slideshow_item_sorted_insert(slideshow, &amp;itc, img[i],
                                                    _cmp_func);
        <span class="keywordflow">if</span> (!slide_first) slide_first = slide_it;
     }
   slide_last = slide_it;

   list = elm_slideshow_items_get(slideshow);
   printf(<span class="stringliteral">&quot;List of items in the slideshow:\n&quot;</span>);
   <a class="code" href="group__Eina__List__Group.html#gad02f746a08ee0b12b7ed66d4bc0d71d8" title="Definition for the macro to iterate over a list.">EINA_LIST_FOREACH</a>(list, l, slide_it)
     printf(&quot;\t%s\n&quot;,
             (const <span class="keywordtype">char</span> *)<a class="code" href="group__Elm__General.html#ga4465a576c55d197878aeafc0bacf7bb4">elm_object_item_data_get</a>(slide_it));
</pre></div></p>
<p>Note that we save the pointers to the first and last items in the slideshow, for future use.</p>
<p>What follows is the code creating a notify, to be shown over the slideshow's viewport, with knobs to act on it. We're not showing that boilerplate code, but only the callbacks attached to the interesting smart events of those knobs. The first four are buttons, which will:</p>
<ul>
<li>Select the <b>next</b> item in the slideshow</li>
<li>Select the <b>previous</b> item in the slideshow</li>
<li>Select the <b>first</b> item in the slideshow</li>
<li>Select the <b>last</b> item in the slideshow</li>
</ul>
<p>Check out the code for those four actions, being the two last <code>data</code> pointers the same <code>first</code> and <code>last</code> pointers we save before, respectively:  <div class="fragment"><pre class="fragment"><span class="comment">/* jump to next item, cyclically */</span>
<span class="keyword">static</span> <span class="keywordtype">void</span>
_next(<span class="keywordtype">void</span> *data, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj EINA_UNUSED, <span class="keywordtype">void</span> *event_info EINA_UNUSED)
{
   elm_slideshow_next(data);
}

<span class="keyword">static</span> <span class="keywordtype">void</span>
_previous(<span class="keywordtype">void</span> *data, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj EINA_UNUSED, <span class="keywordtype">void</span> *event_info EINA_UNUSED)
{
   elm_slideshow_previous(data);
}

<span class="keyword">static</span> <span class="keywordtype">void</span>
_first(<span class="keywordtype">void</span> *data, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj EINA_UNUSED, <span class="keywordtype">void</span> *event_info EINA_UNUSED)
{
   elm_slideshow_item_show(data);
}

<span class="keyword">static</span> <span class="keywordtype">void</span>
_last(<span class="keywordtype">void</span> *data, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj EINA_UNUSED, <span class="keywordtype">void</span> *event_info EINA_UNUSED)
{
   elm_slideshow_item_show(data);
}
</pre></div></p>
<p>What follow are two hoversels, meant for one to change the slideshow's <b>transition</b> and <b>layout</b> styles, respectively. We fetch all the available transition and layout names to populate those widgets and, when one selects any of them, we apply the corresponding setters on the slideshow:  <div class="fragment"><pre class="fragment">   hv = <a class="code" href="group__Elm__Hoversel.html#ga29e3a4b0e5216857ee2943063f7473e5" title="Add a new Hoversel object.">elm_hoversel_add</a>(win);
   elm_box_pack_end(bx, hv);
   elm_hoversel_hover_parent_set(hv, win);
   <a class="code" href="group__Eina__List__Group.html#gad02f746a08ee0b12b7ed66d4bc0d71d8" title="Definition for the macro to iterate over a list.">EINA_LIST_FOREACH</a>(elm_slideshow_transitions_get(slideshow), l, transition)
     elm_hoversel_item_add(hv, transition, NULL, 0, _transition_select,
                           transition);
   elm_object_text_set(hv, <a class="code" href="group__Eina__List__Group.html#gaec845f0bfb16a14e8d7f0cd508ca7e9c" title="Gets the list node data member.">eina_list_data_get</a>(
         elm_slideshow_transitions_get(slideshow)));
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(hv);

   hv = <a class="code" href="group__Elm__Hoversel.html#ga29e3a4b0e5216857ee2943063f7473e5" title="Add a new Hoversel object.">elm_hoversel_add</a>(win);
   elm_box_pack_end(bx, hv);
   elm_hoversel_hover_parent_set(hv, win);
   <a class="code" href="group__Eina__List__Group.html#gad02f746a08ee0b12b7ed66d4bc0d71d8" title="Definition for the macro to iterate over a list.">EINA_LIST_FOREACH</a>(elm_slideshow_layouts_get(slideshow), l, layout)
     elm_hoversel_item_add(hv, layout, NULL, 0, _layout_select, layout);
   elm_object_text_set(hv, elm_slideshow_layout_get(slideshow));
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(hv);
</pre></div>  <div class="fragment"><pre class="fragment"><span class="comment">/* transition changed */</span>
<span class="keyword">static</span> <span class="keywordtype">void</span>
_transition_select(<span class="keywordtype">void</span> *data, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj, <span class="keywordtype">void</span> *event_info EINA_UNUSED)
{
   elm_slideshow_transition_set(slideshow, data);
   elm_object_text_set(obj, data);
}

<span class="keyword">static</span> <span class="keywordtype">void</span>
_layout_select(<span class="keywordtype">void</span> *data, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj, <span class="keywordtype">void</span> *event_info EINA_UNUSED)
{
   elm_slideshow_layout_set(slideshow, data);
   elm_object_text_set(obj, data);
}
</pre></div></p>
<p>For one to change the transition <b>time</b> on the slideshow widget, we use a spinner widget. We set it to the initial value of 3 (seconds), which will be probed by the next knob -- a button starting the slideshow, de facto. Note that changing the transition time while a slideshow is already happening will adjust its transition time:  <div class="fragment"><pre class="fragment">   spin = <a class="code" href="group__Elm__Spinner.html#gac259ed8ba5d597ceb982cc0170c37a63">elm_spinner_add</a>(win);
   elm_spinner_label_format_set(spin, <span class="stringliteral">&quot;%2.0f s&quot;</span>);
   <a class="code" href="group__Evas__Canvas.html#ga18a8b179f94d21b2b09e19db11741061">evas_object_smart_callback_add</a>(spin, <span class="stringliteral">&quot;changed&quot;</span>, _spin, spin);
   <a class="code" href="group__Elm__Spinner.html#gad145d4c85ed9bb10512999f5e3acd740" title="Control the step used to increment or decrement the spinner value.">elm_spinner_step_set</a>(spin, 1);
   <a class="code" href="group__Elm__Spinner.html#gac8893709e98b174504bc86e8413d3a91" title="Control the minimum and maximum values for the spinner.">elm_spinner_min_max_set</a>(spin, 1, 30);
   <a class="code" href="group__Elm__Spinner.html#gaeaf35dbd89a82d08fa81666cd7590765" title="Control the value the spinner displays.">elm_spinner_value_set</a>(spin, 3);
   elm_box_pack_end(bx, spin);
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(spin);
</pre></div>  <div class="fragment"><pre class="fragment"><span class="comment">/* slideshow transition time has changed */</span>
<span class="keyword">static</span> <span class="keywordtype">void</span>
_spin(<span class="keywordtype">void</span> *data, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj EINA_UNUSED, <span class="keywordtype">void</span> *event_info EINA_UNUSED)
{
   <span class="keywordflow">if</span> (elm_slideshow_timeout_get(slideshow) &gt; 0)
     elm_slideshow_timeout_set(slideshow, <a class="code" href="group__Elm__Spinner.html#ga0f93a325d38ad9a249994a7dc4ea4f1b" title="Control the value the spinner displays.">elm_spinner_value_get</a>(data));
}
</pre></div></p>
<p>Finally, we have two buttons which will, respectively, start and stop the slideshow on our widget. Here are their "clicked" callbacks:  <div class="fragment"><pre class="fragment"><span class="comment">/* start the show! */</span>
<span class="keyword">static</span> <span class="keywordtype">void</span>
_start(<span class="keywordtype">void</span> *data, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj EINA_UNUSED, <span class="keywordtype">void</span> *event_info EINA_UNUSED)
{
   elm_slideshow_timeout_set(slideshow, <a class="code" href="group__Elm__Spinner.html#ga0f93a325d38ad9a249994a7dc4ea4f1b" title="Control the value the spinner displays.">elm_spinner_value_get</a>(data));

   <a class="code" href="group__Elm__General.html#ga6849a57df3316eabad5bec443bf87597">elm_object_disabled_set</a>(bt_start, <a class="code" href="group__Eina__Types__Group.html#ga05c12dacc8b4058994df842b41be85fc">EINA_TRUE</a>);
   <a class="code" href="group__Elm__General.html#ga6849a57df3316eabad5bec443bf87597">elm_object_disabled_set</a>(bt_stop, EINA_FALSE);
}

<span class="keyword">static</span> <span class="keywordtype">void</span>
_stop(<span class="keywordtype">void</span> *data EINA_UNUSED, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj EINA_UNUSED, <span class="keywordtype">void</span> *event_info EINA_UNUSED)
{
   elm_slideshow_timeout_set(slideshow, 0.0);
   <a class="code" href="group__Elm__General.html#ga6849a57df3316eabad5bec443bf87597">elm_object_disabled_set</a>(bt_start, EINA_FALSE);
   <a class="code" href="group__Elm__General.html#ga6849a57df3316eabad5bec443bf87597">elm_object_disabled_set</a>(bt_stop, <a class="code" href="group__Eina__Types__Group.html#ga05c12dacc8b4058994df842b41be85fc">EINA_TRUE</a>);
}
</pre></div></p>
<p>This is how the example program's window looks like: </p>
<div class="image">
<img src="screenshots/slideshow_example.png" alt="slideshow_example.png"/>
</div>
 <p>See the full <a class="el" href="slideshow_example_c.html">source code</a> for this example. </p>
</div></div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
<hr size="1"/>
<center>
<small>Except as noted, this content - excluding the Code Examples - is licensed under <a href="http://creativecommons.org/licenses/by/3.0/legalcode" target="_blank">Creative Commons Attribution 3.0</a>
and all of the Code Examples contained herein are licensed under <a href="https://www.tizen.org/bsd-3-clause-license" target="_blank">BSD-3-Clause</a>.<br/>For details, see the <a href="https://www.tizen.org/content-license" target="_blank">Content License</a>.&nbsp;</small>
</center>
</body>
</html>
