<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Tizen Native API: external_emotion_elm.edc</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen_html_stylesheet.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Tizen Native API
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>The&#160;Basics&#160;of&#160;Tizen&#160;Native&#160;API&#160;Reference</span></a></li>
      <li><a href="modules.html"><span>Native&#160;API&#160;Reference</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">external_emotion_elm.edc</div>  </div>
</div><!--header-->
<div class="contents">
<p>Super-concise video player example using Edje/Emotion/Elementary.</p>
<div class="fragment"><pre class="fragment"><span class="comment">/*</span>
<span class="comment"> Super-concise video player example using Edje/Emotion/Elementary.</span>
<span class="comment"></span>
<span class="comment"> This is all in Edje by means of type:EXTERNAL, you don&#39;t need any C</span>
<span class="comment"> code other than emotion and edje installed with edje_external</span>
<span class="comment"> support enabled.</span>
<span class="comment"></span>
<span class="comment"> Compile: edje_cc     external-emotion-elm.edc</span>
<span class="comment"> Run....: edje_player external-emotion-elm.edj</span>
<span class="comment"></span>
<span class="comment"> */</span>
collections {
   group { name: <span class="stringliteral">&quot;main&quot;</span>;
      min: 350 200; <span class="comment">/* set a min window size */</span>

      externals { <span class="comment">/* declare the modules you want to load */</span>
         external: <span class="stringliteral">&quot;emotion&quot;</span>; <span class="comment">/* video player engine */</span>
         external: <span class="stringliteral">&quot;elm&quot;</span>; <span class="comment">/* toolkit/widgets */</span>
      }

      parts {
         part { name: <span class="stringliteral">&quot;bg&quot;</span>; <span class="comment">/* dark gray rectangle as background */</span>
            type: RECT;
            description { state: <span class="stringliteral">&quot;default&quot;</span> 0.0;
               color: 64 64 64 255;
            }
         }

         part { name: <span class="stringliteral">&quot;video&quot;</span>; <span class="comment">/* video object */</span>
            type: EXTERNAL;
            source: <span class="stringliteral">&quot;emotion&quot;</span>;
            description { state: <span class="stringliteral">&quot;default&quot;</span> 0.0;
               params {
                  <span class="comment">/* explicitly select the emotion engine</span>
<span class="comment">                   * [&#39;xine&#39;, &#39;gstreamer&#39; or &#39;vlc&#39;]</span>
<span class="comment">                   * or comment the line to autoselect the engine */</span>
                  <span class="comment">// choice: &quot;engine&quot; &quot;gstreamer&quot;;</span>
               }
            }
         }

         part { name: <span class="stringliteral">&quot;title&quot;</span>;
            type: TEXT;
            effect: SOFT_SHADOW;
            description { state: <span class="stringliteral">&quot;default&quot;</span> 0.0;
               color: 255 255 255 0;
               color3: 0 0 0 0;
               align: 0.5 0.0;
               rel1 {
                  relative: 0.0 0.0;
                  offset: 10 2;
               }
               rel2 {
                  relative: 1.0 0.0;
                  offset: -11 10;
               }
               text {
                  font: <span class="stringliteral">&quot;Sans:style=Bold&quot;</span>;
                  align: 0.5 0.0;
                  size: 10;
                  min: 0 1;
                  text: <span class="stringliteral">&quot;&quot;</span>;
               }
            }
            description { state: <span class="stringliteral">&quot;visible&quot;</span> 0.0;
               inherit: <span class="stringliteral">&quot;default&quot;</span> 0.0;
               color: 255 255 255 255;
               color3: 0 0 0 255;
            }
         }

         part { name: <span class="stringliteral">&quot;controls-clipper&quot;</span>; <span class="comment">/* clipper to control visibility */</span>
            type: RECT;
            description { state: <span class="stringliteral">&quot;default&quot;</span> 0.0;
               color: 255 255 255 32;
            }
            description { state: <span class="stringliteral">&quot;visible&quot;</span> 0.0;
               color: 255 255 255 255;
            }
         }

         part { name: <span class="stringliteral">&quot;controls-bg&quot;</span>; <span class="comment">/* controls background as</span>
<span class="comment">                                        semi-transparent black at bottom edge */</span>
            type: RECT;
            clip_to: <span class="stringliteral">&quot;controls-clipper&quot;</span>;
            description { state: <span class="stringliteral">&quot;default&quot;</span> 0.0;
               color: 0 0 0 128;
               rel1 {
                  relative: 0.0 1.0;
                  offset: 0 -40;
               }
               rel2 {
                  relative: 1.0 1.0;
                  offset: -1 -1;
               }
            }
         }

         part { name: <span class="stringliteral">&quot;play&quot;</span>; <span class="comment">/* play button at bottom-left (relative</span>
<span class="comment">                                to controls-bg) */</span>
            type: EXTERNAL;
            source: <span class="stringliteral">&quot;elm/button&quot;</span>;
            clip_to: <span class="stringliteral">&quot;controls-clipper&quot;</span>;
            description { state: <span class="stringliteral">&quot;default&quot;</span> 0.0;
               rel1 {
                  relative: 0.0 0.0;
                  offset: 0 0;
                  to: <span class="stringliteral">&quot;controls-bg&quot;</span>;
               }
               rel2 {
                  relative: 0.0 1.0;
                  offset: 50 -1;
                  to: <span class="stringliteral">&quot;controls-bg&quot;</span>;
               }
               params.string: <span class="stringliteral">&quot;icon&quot;</span> <span class="stringliteral">&quot;apps&quot;</span>;
            }
         }

         part { name: <span class="stringliteral">&quot;open&quot;</span>; <span class="comment">/* open file button next to play button */</span>
            type: EXTERNAL;
            source: <span class="stringliteral">&quot;elm/fileselector_button&quot;</span>;
            clip_to: <span class="stringliteral">&quot;controls-clipper&quot;</span>;
            description { state: <span class="stringliteral">&quot;default&quot;</span> 0.0;
               rel1 {
                  relative: 0.0 0.0;
                  offset: 52 0;
                  to: <span class="stringliteral">&quot;controls-bg&quot;</span>;
               }
               rel2 {
                  relative: 0.0 1.0;
                  offset: 102 -1;
                  to: <span class="stringliteral">&quot;controls-bg&quot;</span>;
               }
               params.string: <span class="stringliteral">&quot;icon&quot;</span> <span class="stringliteral">&quot;folder&quot;</span>;
            }
         }

         part { name: <span class="stringliteral">&quot;time&quot;</span>; <span class="comment">/* time/progress */</span>
            type: EXTERNAL;
            source: <span class="stringliteral">&quot;elm/slider&quot;</span>;
            clip_to: <span class="stringliteral">&quot;controls-clipper&quot;</span>;
            description { state: <span class="stringliteral">&quot;default&quot;</span> 0.0;
               rel1 {
                  relative: 0.0 0.0;
                  offset: 104 0;
                  to: <span class="stringliteral">&quot;controls-bg&quot;</span>;
               }
               rel2 {
                  relative: 1.0 1.0;
                  offset: -1 -1;
                  to: <span class="stringliteral">&quot;controls-bg&quot;</span>;
               }
            }
         }

         part { name: <span class="stringliteral">&quot;controls-eventarea&quot;</span>; <span class="comment">/* event area so we catch mouse in</span>
<span class="comment">                                               and out, repeat events so</span>
<span class="comment">                                               buttons get them */</span>
            type: RECT;
            repeat_events: 1;
            description {
               state: <span class="stringliteral">&quot;default&quot;</span> 0.0;
               color: 255 255 255 0; <span class="comment">/* fully transparent as we don&#39;t</span>
<span class="comment">                                        need any visual feedback */</span>
               rel1.to: <span class="stringliteral">&quot;controls-bg&quot;</span>;
               rel2.to: <span class="stringliteral">&quot;controls-bg&quot;</span>;
            }
         }

         programs {
            <span class="comment">/* animated 0.2 linear fade in/out if mouse is over controls */</span>
            program { signal: <span class="stringliteral">&quot;mouse,in&quot;</span>;
               source: <span class="stringliteral">&quot;controls-eventarea&quot;</span>;
               action: STATE_SET <span class="stringliteral">&quot;visible&quot;</span> 0.0;
               transition: LINEAR 0.2;
               target: <span class="stringliteral">&quot;controls-clipper&quot;</span>;
               target: <span class="stringliteral">&quot;title&quot;</span>;
            }
            program { signal: <span class="stringliteral">&quot;mouse,out&quot;</span>;
               source: <span class="stringliteral">&quot;controls-eventarea&quot;</span>;
               action: STATE_SET <span class="stringliteral">&quot;default&quot;</span> 0.0;
               transition: LINEAR 0.2;
               target: <span class="stringliteral">&quot;controls-clipper&quot;</span>;
               target: <span class="stringliteral">&quot;title&quot;</span>;
            }

            <span class="comment">/* toggle video playing state when play is clicked */</span>
            program { name: <span class="stringliteral">&quot;toggle-play-video&quot;</span>;
               signal: <span class="stringliteral">&quot;clicked&quot;</span>;
               source: <span class="stringliteral">&quot;play&quot;</span>;
               script {
                  <span class="keyword">new</span> v = external_param_get_bool(PART:<span class="stringliteral">&quot;video&quot;</span>, <span class="stringliteral">&quot;play&quot;</span>);
                  external_param_set_bool(PART:<span class="stringliteral">&quot;video&quot;</span>, <span class="stringliteral">&quot;play&quot;</span>, !v);
               }
            }

            <span class="comment">/* whenever file is chosen, set and play it */</span>
            program { signal: <span class="stringliteral">&quot;file,chosen&quot;</span>;
               source: <span class="stringliteral">&quot;open&quot;</span>;
               action: PARAM_COPY <span class="stringliteral">&quot;open&quot;</span> <span class="stringliteral">&quot;path&quot;</span> <span class="stringliteral">&quot;video&quot;</span> <span class="stringliteral">&quot;file&quot;</span>;
               after: <span class="stringliteral">&quot;play-video&quot;</span>;
               after: <span class="stringliteral">&quot;set-title&quot;</span>;
            }
            program { name: <span class="stringliteral">&quot;play-video&quot;</span>;
               action: PARAM_SET <span class="stringliteral">&quot;video&quot;</span> <span class="stringliteral">&quot;play&quot;</span> <span class="stringliteral">&quot;1&quot;</span>;
            }
            program { name: <span class="stringliteral">&quot;set-title&quot;</span>;
               action: PARAM_COPY <span class="stringliteral">&quot;open&quot;</span> <span class="stringliteral">&quot;path&quot;</span> <span class="stringliteral">&quot;title&quot;</span> <span class="stringliteral">&quot;text&quot;</span>;
            }

            <span class="comment">/* if position changes, set slider (time) */</span>
            program { signal: <span class="stringliteral">&quot;position_update&quot;</span>;
               source: <span class="stringliteral">&quot;video&quot;</span>;
               script {
                  <span class="keyword">new</span> Float:p, Float:len;

                  p = external_param_get_float(PART:<span class="stringliteral">&quot;video&quot;</span>, <span class="stringliteral">&quot;position&quot;</span>);
                  len = external_param_get_float(PART:<span class="stringliteral">&quot;video&quot;</span>, <span class="stringliteral">&quot;play_length&quot;</span>);
                  <span class="keywordflow">if</span> (len &gt; 0.0)
                     external_param_set_float(PART:<span class="stringliteral">&quot;time&quot;</span>, <span class="stringliteral">&quot;value&quot;</span>, p / len);
               }
            }

            <span class="comment">/* if slider (time) changes, set the position (seek) */</span>
            program { signal: <span class="stringliteral">&quot;changed&quot;</span>;
               source: <span class="stringliteral">&quot;time&quot;</span>;
               script {
                  <span class="keyword">new</span> Float:v, Float:len;

                  v = external_param_get_float(PART:<span class="stringliteral">&quot;time&quot;</span>, <span class="stringliteral">&quot;value&quot;</span>);
                  len = external_param_get_float(PART:<span class="stringliteral">&quot;video&quot;</span>, <span class="stringliteral">&quot;play_length&quot;</span>);
                  <span class="keywordflow">if</span> (len &gt; 0.0)
                     external_param_set_float(PART:<span class="stringliteral">&quot;video&quot;</span>, <span class="stringliteral">&quot;position&quot;</span>, v * len);
               }
            }
         }
      }
   }
}
</pre></div> </div><!-- contents -->
</div><!-- contents -->
<hr size="1"/>
<center>
<small>Except as noted, this content - excluding the Code Examples - is licensed under <a href="http://creativecommons.org/licenses/by/3.0/legalcode" target="_blank">Creative Commons Attribution 3.0</a>
and all of the Code Examples contained herein are licensed under <a href="https://www.tizen.org/bsd-3-clause-license" target="_blank">BSD-3-Clause</a>.<br/>For details, see the <a href="https://www.tizen.org/content-license" target="_blank">Content License</a>.&nbsp;</small>
</center>
</body>
</html>
