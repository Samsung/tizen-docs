<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Tizen Native API: EPhysics - Collision Filter</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen_html_stylesheet.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
</script>
<link rel="search" href="search-opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Tizen Native API"/>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Tizen Native API
   &#160;<span id="projectnumber">3.0</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>The&#160;Basics&#160;of&#160;Tizen&#160;Native&#160;API&#160;Reference</span></a></li>
      <li><a href="modules.html"><span>Native&#160;API&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.php" method="get">
              <img id="MSearchSelect" src="search/mag.png" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('tutorial_ephysics_collision_filter.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">EPhysics - Collision Filter </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The purpose of this example is to demonstrate the EPhysics Collision Filter usage - The code adds four balls in 2 rows and 2 columns, two on each collision group, the collision only happens when the balls are in the same group (row),to make it easier, balls in the same group has the same color and size.</p>
<div class="image">
<img src="collision_filter.png" alt="collision_filter.png"/>
</div>
 <p>For this example we'll have an EPhysics_World and four basic EPhysics_Bodys, we'll apply an impulse on then and see what happens when they're in other collision group.</p>
<p>The basic concepts like - initializing an EPhysics_World, render geometry, physics limiting boundaries, add an Ephysics_Body, associate it to evas objects, change restitution, friction and impulse properties, were already covered in <a class="el" href="tutorial_ephysics_bouncing_ball.html">EPhysics - Bouncing Ball</a></p>
<h2><a class="anchor" id="add-callbacks"></a>
Adding the Callback</h2>
<p>We'll use two arrays (color and size) to distinguish the groups.</p>
<p><div class="fragment"><pre class="fragment">_world_populate(Test_Data *test_data)
{
   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *colors[] = {<span class="stringliteral">&quot;blue-ball&quot;</span>, <span class="stringliteral">&quot;big-red-ball&quot;</span>};
   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> sizes[] = {54, 70};
   EPhysics_Body *fall_body;
   <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *sphere;
   <span class="keywordtype">int</span> i, column, row;
</pre></div></p>
<p>The balls declaration was placed into a For loop, just to simplify the coding and divide them in two groups.</p>
<p><div class="fragment"><pre class="fragment">   <span class="keywordflow">for</span> (i = 0; i &lt; 4; i++)
     {
        column = i % 2;
        row = i / 2;

        sphere = <a class="code" href="group__Elm__Image.html#ga5d211c8af4f6e297a24fc4e8737c81a9">elm_image_add</a>(test_data-&gt;win);
        <a class="code" href="group__Elm__Image.html#gad1a96ede5f513042cef3c1dac4572f73">elm_image_file_set</a>(
           sphere, PACKAGE_DATA_DIR <span class="stringliteral">&quot;/&quot;</span> EPHYSICS_TEST_THEME <span class="stringliteral">&quot;.edj&quot;</span>,
           colors[row]);
        <a class="code" href="group__Evas__Font__Group.html#ga02da8091bbac768b8e86c7b74b2a94f9">evas_object_move</a>(sphere, (1 + column) * WIDTH / 4 +
                         (70 - sizes[row]) / 2,
                         100 + row * 60 + row / 2 * 20);
        <a class="code" href="group__Evas__Font__Group.html#ga21e8604c0e4a93e469bff4bd069e82b5">evas_object_resize</a>(sphere, sizes[row], sizes[row]);
        <a class="code" href="group__Evas__Font__Group.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(sphere);
        test_data-&gt;evas_objs = <a class="code" href="group__Eina__List__Group.html#ga92ec14d1a1040a361c4d8cd0ab7b0ecc" title="Appends the given data to the given linked list.">eina_list_append</a>(test_data-&gt;evas_objs, sphere);

        fall_body = ephysics_body_sphere_add(test_data-&gt;world);
        ephysics_body_evas_object_set(fall_body, sphere, <a class="code" href="group__Eina__Types__Group.html#ga05c12dacc8b4058994df842b41be85fc">EINA_TRUE</a>);
        ephysics_body_restitution_set(fall_body, 0.95);
        ephysics_body_friction_set(fall_body, 0.1);
</pre></div></p>
<p>Note in this part we divide the balls in two groups by color (row).</p>
<p><div class="fragment"><pre class="fragment">        ephysics_body_collision_group_add(fall_body, colors[row]);
</pre></div></p>
<p>The impulse will be applied in only 1 ball per group, in this case:</p>
<p>The 1st row 2nd column ball will be applied an impulse to the left (-300kg * p/s).</p>
<p>The 2nd row 1st column ball will be applied an impulse to the right (300kg * p/s).</p>
<p>And then saving the body into a list.</p>
<p><div class="fragment"><pre class="fragment">        <span class="keywordflow">if</span> (column + row == 1)
          ephysics_body_central_impulse_apply(fall_body, 600 * row - 300, 0, 0);
        test_data-&gt;bodies = <a class="code" href="group__Eina__List__Group.html#ga92ec14d1a1040a361c4d8cd0ab7b0ecc" title="Appends the given data to the given linked list.">eina_list_append</a>(test_data-&gt;bodies, fall_body);
     }
}
</pre></div></p>
<p>Here we finish the example. The full source code can be found at <a class="el" href="test_collision_filter_c.html">test_collision_filter.c</a>. </p>
</div></div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
<hr size="1"/>
<center>
<small>Except as noted, this content - excluding the Code Examples - is licensed under <a href="http://creativecommons.org/licenses/by/3.0/legalcode" target="_blank">Creative Commons Attribution 3.0</a>
and all of the Code Examples contained herein are licensed under <a href="https://www.tizen.org/bsd-3-clause-license" target="_blank">BSD-3-Clause</a>.<br/>For details, see the <a href="https://www.tizen.org/content-license" target="_blank">Content License</a>.&nbsp;</small>
</center>
</body>
</html>
