<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Tizen Native API: Ecore_Con - DNS lookup</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen_html_stylesheet.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
</script>
<link rel="search" href="search-opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Tizen Native API"/>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Tizen Native API
   &#160;<span id="projectnumber">5.0</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>The&#160;Basics&#160;of&#160;Tizen&#160;Native&#160;API&#160;Reference</span></a></li>
      <li><a href="modules.html"><span>Native&#160;API&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.php" method="get">
              <img id="MSearchSelect" src="search/mag.png" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('ecore_con_lookup_example_c.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Ecore_Con - DNS lookup </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This is a very simple example that shows how to make a simple DNS lookup using <a class="el" href="group__Ecore__Con__Lib__Group.html#gaa06a9321ba2f71f55736086bdd1bd4fa" title="Do an asynchronous DNS lookup.">ecore_con_lookup()</a>.</p>
<p>It's possible to see in the beginning of the main function that we are using the arguments passed via command line. This is the address that we are going to make the DNS lookup on.</p>
<p>The next step is to initialize the libraries, and just call <a class="el" href="group__Ecore__Con__Lib__Group.html#gaa06a9321ba2f71f55736086bdd1bd4fa" title="Do an asynchronous DNS lookup.">ecore_con_lookup()</a>. This function will get the string that contains the address to be resolved as first parameter, then a callback that will be called when the resolve stage is done, and finally a data pointer that will be passed to the callback.</p>
<p>This function is asynchronous, and the callback will be called only on success. If there was an error during the resolve stage, there's no way to know about that. It's only possible to know about errors when setting up the lookup, by looking at the return code of the <a class="el" href="group__Ecore__Con__Lib__Group.html#gaa06a9321ba2f71f55736086bdd1bd4fa" title="Do an asynchronous DNS lookup.">ecore_con_lookup()</a> function.</p>
<p>The callback <code>_lookup_done_cb</code> passed as argument to <a class="el" href="group__Ecore__Con__Lib__Group.html#gaa06a9321ba2f71f55736086bdd1bd4fa" title="Do an asynchronous DNS lookup.">ecore_con_lookup()</a> just prints the resolved canonical name, IP, address of the sockaddr structure, and the length of the socket address (in bytes).</p>
<p>Finally, we start the main loop, and after that we finalize the libraries and exit.</p>
<p>This is the code for this simple example:</p>
<div class="fragment"><pre class="fragment"><span class="comment">//Compile with:</span>
<span class="comment">// gcc -o ecore_con_lookup_example ecore_con_lookup_example.c `pkg-config --libs --cflags ecore ecore-con`</span>

<span class="preprocessor">#include &lt;stdio.h&gt;</span>
<span class="preprocessor">#include &lt;Ecore.h&gt;</span>
<span class="preprocessor">#include &lt;Ecore_Con.h&gt;</span>

<span class="keyword">static</span> <span class="keywordtype">void</span>
_lookup_done_cb(<span class="keyword">const</span> <span class="keywordtype">char</span> *canonname, <span class="keyword">const</span> <span class="keywordtype">char</span> *ip, <span class="keyword">struct</span> sockaddr *addr, <span class="keywordtype">int</span> addrlen EINA_UNUSED, <span class="keywordtype">void</span> *data EINA_UNUSED)
{
   printf(<span class="stringliteral">&quot;canonname = %s\n&quot;</span>, canonname);
   printf(<span class="stringliteral">&quot;ip = %s\n&quot;</span>, ip);
   printf(<span class="stringliteral">&quot;addr = %p\n&quot;</span>, addr);
   <a class="code" href="group__Ecore__Main__Loop__Group.html#ga95cf8e97dff0716433c2c5474d606a98">ecore_main_loop_quit</a>();
}

<span class="keywordtype">int</span>
main(<span class="keywordtype">int</span> argc, <span class="keyword">const</span> <span class="keywordtype">char</span> *argv[])
{
   <span class="keywordflow">if</span> (argc &lt; 2)
     {
        printf(<span class="stringliteral">&quot;need one parameter: &lt;address&gt;\n&quot;</span>);
        <span class="keywordflow">return</span> -1;
     }

   <a class="code" href="group__Ecore__Con__Lib__Group.html#gab4ed9a3c2132b73373a63c7f63cd0c51" title="Initializes the Ecore_Con library.">ecore_con_init</a>();

   <span class="keywordflow">if</span> (!<a class="code" href="group__Ecore__Con__Lib__Group.html#gaa06a9321ba2f71f55736086bdd1bd4fa" title="Do an asynchronous DNS lookup.">ecore_con_lookup</a>(argv[1], _lookup_done_cb, NULL))
     {
        printf(<span class="stringliteral">&quot;error when trying to start lookup for %s\n&quot;</span>, argv[1]);
        <span class="keywordflow">goto</span> end;
     }

   <a class="code" href="group__Ecore__Main__Loop__Group.html#gaf103b9f668bb3e4fed12e52c6180132d">ecore_main_loop_begin</a>();

end:
   <a class="code" href="group__Ecore__Con__Lib__Group.html#ga8187590df065383594b3e7f67abbc512" title="Shuts down the Ecore_Con library.">ecore_con_shutdown</a>();

   <span class="keywordflow">return</span> 0;
}

</pre></div> </div></div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
<hr size="1"/>
<center>
<small>Except as noted, this content - excluding the Code Examples - is licensed under <a href="http://creativecommons.org/licenses/by/3.0/legalcode" target="_blank">Creative Commons Attribution 3.0</a>
and all of the Code Examples contained herein are licensed under <a href="https://www.tizen.org/bsd-3-clause-license" target="_blank">BSD-3-Clause</a>.<br/>For details, see the <a href="https://www.tizen.org/content-license" target="_blank">Content License</a>.&nbsp;</small>
</center>
</body>
</html>
