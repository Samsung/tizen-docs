<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Tizen Native API: Evas object smart objects</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen_html_stylesheet.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
</script>
<link rel="search" href="search-opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Tizen Native API"/>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Tizen Native API
   &#160;<span id="projectnumber">5.0</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>The&#160;Basics&#160;of&#160;Tizen&#160;Native&#160;API&#160;Reference</span></a></li>
      <li><a href="modules.html"><span>Native&#160;API&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.php" method="get">
              <img id="MSearchSelect" src="search/mag.png" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('Example_Evas_Smart_Objects.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Evas object smart objects </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>In this example, we illustrate how to create and handle Evas smart objects.</p>
<p>A smart object is one that provides custom functions to handle clipping, hiding, moving, resizing, color setting and more on <b>child</b> elements, automatically, for the smart object's user. They could be as simple as a group of objects that move together (see <a class="el" href="group__Evas__Smart__Object__Clipped.html">Clipped Smart Object</a>) or implementations of whole complex UI widgets, providing some intelligence (thus the name) and extension to simple Evas objects.</p>
<p>Here, we create one as an example. What it does is to control (at maximum) 2 child objects, with regard to their geometries and colors. There can be a "left" child and a "right" one. The former will always occupy the top left quadrant of the smart object's area, while the latter will occupy the bottom right. The smart object will also contain an <b>internal</b> decorative border object, which will also be controlled by it, naturally.</p>
<p>Here is where we add it to the canvas: <div class="fragment"><pre class="fragment">   d.smt = evas_smart_example_add(d.evas);
   evas_object_move(d.smt, WIDTH / 4, HEIGHT / 4);
   evas_object_resize(d.smt, WIDTH / 2, HEIGHT / 2);
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(d.smt);
</pre></div></p>
<p>The magic starts to happen in the <code>evas_smart_example_add()</code> function, which is one in the example smart object's defined <b>interface</b>. These should be the functions you would export to the users of your smart object. We made three for this one:</p>
<ul>
<li><code>evas_smart_example_add()</code>: add a new instance of the example smart object to a canvas</li>
<li><code>evas_smart_example_remove()</code>: remove a given child of the smart object from it</li>
<li><code>evas_smart_example_set_left()</code>: set the left child of the smart object</li>
<li><code>evas_smart_example_set_right()</code>: set the right child of the smart object</li>
</ul>
<p>The object's creation takes place as:  <div class="fragment"><pre class="fragment"><span class="comment">/* add a new example smart object to a canvas */</span>
<a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *
evas_smart_example_add(<a class="code" href="group__Evas__Canvas.html#ga5ff87cc4ce6bc43e3b640a6d37f73043">Evas</a> *evas)
{
   <span class="keywordflow">return</span> <a class="code" href="group__Evas__Canvas.html#gad80de73a33446f902d4b39141a8d0a05" title="Get if the canvas is currently calculating smart objects.">evas_object_smart_add</a>(evas, _evas_smart_example_smart_class_new());
}
</pre></div></p>
<p>Smart objects are defined by <b>smart classes</b>, which are structs defining their interfaces, or <b>smart functions</b> (see <a class="el" href="group__Evas__Smart__Group.html#gaea15f67e901bf5380cdb67dc1bb43391">Evas_Smart_Class</a>, the base class for any smart object). As you see, one has to use the <a class="el" href="group__Evas__Canvas.html#gad80de73a33446f902d4b39141a8d0a05" title="Get if the canvas is currently calculating smart objects.">evas_object_smart_add()</a> function to instantiate smart objects. Its second parameter is what matters -- an #Evas_Smart struct, which contains all the smart class definitions (smart functions, smart callbacks, and the like). Note, however, that <code>_evas_smart_example_smart_class_new()</code> seems not to be defined in our example's code. That's because it came from a very handy <b>helper macro</b>:  <div class="fragment"><pre class="fragment"><a class="code" href="group__Evas__Smart__Group.html#ga58dc94af6f064b39b2bf0155908fbe52">EVAS_SMART_SUBCLASS_NEW</a>(_evas_smart_example_type, _evas_smart_example,
                        <a class="code" href="struct__Evas__Smart__Class.html">Evas_Smart_Class</a>, <a class="code" href="struct__Evas__Smart__Class.html">Evas_Smart_Class</a>,
                        <a class="code" href="group__Evas__Smart__Object__Clipped.html#gabbb2c85a3978e44404528a94be381dcd">evas_object_smart_clipped_class_get</a>, _smart_callbacks);
</pre></div> What it does is to <b>subclass</b> a given existing smart class, thus specializing it. This is very common and useful in Evas. There is a built-in smart object, the "clipped smart object", which implements a behavior mostly desired by many other smart object implementors: it will clip its children to its area and move them along with it, on evas_object_move() calls. Then, our example smart object will get that behavior for free.</p>
<p>The first argument to the macro,  <div class="fragment"><pre class="fragment"><span class="preprocessor">#define _evas_smart_example_type &quot;Evas_Smart_Example&quot;</span>
</pre></div> will define the new smart class' name. The second tells the macro what is the <b>prefix</b> of the function it will be declaring with a <code>_smart_set_user()</code> suffix. On this function, we may override/extend any desired method from our parent smart class:  <div class="fragment"><pre class="fragment"><span class="comment">/* setting our smart interface */</span>
<span class="keyword">static</span> <span class="keywordtype">void</span>
_evas_smart_example_smart_set_user(<a class="code" href="struct__Evas__Smart__Class.html">Evas_Smart_Class</a> *sc)
{
   <span class="comment">/* specializing these two */</span>
   sc-&gt;<a class="code" href="struct__Evas__Smart__Class.html#a53149c9c3c1eb86af742a2d89790d2c7">add</a> = _evas_smart_example_smart_add;
   sc-&gt;<a class="code" href="struct__Evas__Smart__Class.html#a8a493473cd97a4e9284f5a33f0afe823">del</a> = _evas_smart_example_smart_del;

   <span class="comment">/* clipped smart object has no hook on resizes or calculations */</span>
   sc-&gt;<a class="code" href="struct__Evas__Smart__Class.html#a6b7ea5214710d6a1a8981e57469ac1aa">resize</a> = _evas_smart_example_smart_resize;
   sc-&gt;<a class="code" href="struct__Evas__Smart__Class.html#af48b73a524d5fe75604ee104bca4e79a">calculate</a> = _evas_smart_example_smart_calculate;
}
</pre></div></p>
<p>The first function pointer's code will take place at an example smart object's <b>creation</b> time:  <div class="fragment"><pre class="fragment"><span class="comment">/* create and setup a new example smart object&#39;s internals */</span>
<span class="keyword">static</span> <span class="keywordtype">void</span>
_evas_smart_example_smart_add(<a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *o)
{
   <a class="code" href="group__Evas__Smart__Group.html#ga4aa4b72aafa0391144fb0171aeff2ccd">EVAS_SMART_DATA_ALLOC</a>(o, Evas_Smart_Example_Data);

   <span class="comment">/* call parent_sc-&gt;add() before member_adding the children, otherwise the</span>
<span class="comment">    * smart object&#39;s clipper won&#39;t be created yet, and the children won&#39;t be</span>
<span class="comment">    * clipped to it */</span>
   _evas_smart_example_parent_sc-&gt;add(o);

   <span class="comment">/* this is a border around the smart object&#39;s area, delimiting it */</span>
   priv-&gt;border = evas_object_image_filled_add(evas_object_evas_get(o));
   evas_object_image_file_set(priv-&gt;border, border_img_path, NULL);
   evas_object_image_border_set(priv-&gt;border, 3, 3, 3, 3);
   evas_object_image_border_center_fill_set(
     priv-&gt;border, EVAS_BORDER_FILL_NONE);
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(priv-&gt;border);
   <a class="code" href="group__Evas__Canvas.html#ga6845c17effe796430cb4fc5f2cfccef0">evas_object_smart_member_add</a>(priv-&gt;border, o);
}
</pre></div></p>
<p>The <a class="el" href="group__Evas__Smart__Group.html#ga4aa4b72aafa0391144fb0171aeff2ccd">EVAS_SMART_DATA_ALLOC</a> macro will take care of allocating our smart object data, which will be available on other contexts for us (mainly in our interface functions):  <div class="fragment"><pre class="fragment"><span class="keyword">typedef</span> <span class="keyword">struct </span>_Evas_Smart_Example_Data Evas_Smart_Example_Data;

<span class="comment">/*</span>
<span class="comment"> * This structure augments clipped smart object&#39;s instance data,</span>
<span class="comment"> * providing extra members required by our example smart object&#39;s</span>
<span class="comment"> * implementation.</span>
<span class="comment"> */</span>
<span class="keyword">struct </span>_Evas_Smart_Example_Data
{
   <a class="code" href="group__Evas__Smart__Object__Clipped.html#ga65c1b2ed3578175e476998f7b55dfe34">Evas_Object_Smart_Clipped_Data</a> base;
   <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a>                   *children[2], *border;
   <span class="keywordtype">int</span>                            child_count;
};
</pre></div></p>
<p>See that, as we're inheriting from the clipped smart object's class, we <b>must</b> have their data struct as our first member. Other data of interest for us is a child members array and the border object's handle. The latter is what is created in the last mentioned function. Note how to tell Evas the border will be managed by our smart object from that time on: <code>evas_object_smart_member_add(priv-&gt;border, o);</code>. The counterpart of this function is exemplified on the smart object's interface function to remove children: <div class="fragment"><pre class="fragment"><span class="comment">/* remove a child element, return its pointer (or NULL on errors) */</span>
<a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *
evas_smart_example_remove(<a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *o,
                          <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *child)
{
   <span class="keywordtype">long</span> idx;

   EVAS_SMART_EXAMPLE_DATA_GET_OR_RETURN_VAL(o, priv, NULL);

   <span class="keywordflow">if</span> (priv-&gt;children[0] != child &amp;&amp; priv-&gt;children[1] != child)
     {
        fprintf(stderr, <span class="stringliteral">&quot;You are trying to remove something not belonging to&quot;</span>
                        <span class="stringliteral">&quot; the example smart object!\n&quot;</span>);
        <span class="keywordflow">return</span> NULL;
     }

   idx = (long)(uintptr_t)<a class="code" href="group__Evas__Object__Group__Extras.html#gafbad43015793eda4ae50202c0ce0e652">evas_object_data_get</a>(child, <span class="stringliteral">&quot;index&quot;</span>);
   idx--;

   _evas_smart_example_remove_do(priv, child, idx);

   <a class="code" href="group__Evas__Canvas.html#gaa81bbe0af70df6c90b8fc781c59237bc">evas_object_smart_callback_call</a>(
     o, EVT_CHILDREN_NUMBER_CHANGED, (<span class="keywordtype">void</span> *)(uintptr_t)priv-&gt;child_count);
   <a class="code" href="group__Evas__Canvas.html#ga4f08aefaa29ea4bfc5b3f5c89c85dd59" title="Mark smart object as changed, dirty.">evas_object_smart_changed</a>(o);

   <span class="keywordflow">return</span> child;
}

<span class="comment">/* set to return any previous object set to the left position of the</span>
</pre></div></p>
<p>At the end of that function we make use of an constant defined by the <a class="el" href="group__Evas__Smart__Group.html#ga58dc94af6f064b39b2bf0155908fbe52">EVAS_SMART_SUBCLASS_NEW</a>: <code>_evas_smart_example_parent_sc</code>. It has the same prefix we passed to the macro, as you can see, and it holds a pointer to our <b>parent</b> smart class. Then, we can call the specialized method, itself, after our code. The <code>del</code>, <code>hide</code>, <code>show</code> and <code>resize</code> specializations are straightforward, we let the reader take a look at them below to check their behavior. What's interesting is the <code>calculate</code> one:  <div class="fragment"><pre class="fragment"><span class="comment">/* act on child objects&#39; properties, before rendering */</span>
<span class="keyword">static</span> <span class="keywordtype">void</span>
_evas_smart_example_smart_calculate(<a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *o)
{
   Evas_Coord x, y, w, h;

   EVAS_SMART_EXAMPLE_DATA_GET_OR_RETURN(o, priv);
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga6f52fab1a96dc58c85ee481d84bac871">evas_object_geometry_get</a>(o, &amp;x, &amp;y, &amp;w, &amp;h);

   evas_object_resize(priv-&gt;border, w, h);
   evas_object_move(priv-&gt;border, x, y);

   <span class="keywordflow">if</span> (priv-&gt;children[0])
     {
        evas_object_move(priv-&gt;children[0], x + 3, y + 3);
        evas_object_resize(priv-&gt;children[0], (w / 2) - 3, (h / 2) - 3);
     }

   <span class="keywordflow">if</span> (priv-&gt;children[1])
     {
        evas_object_move(priv-&gt;children[1], x + (w / 2), y + (h / 2));
        evas_object_resize(priv-&gt;children[1], (w / 2) - 3, (h / 2) - 3);
     }
}

<span class="comment">/* setting our smart interface */</span>
</pre></div></p>
<p>This code will take place whenever the smart object itself is flagged "dirty", i.e., must be recalculated for rendering (that could come from changes on its clipper, resizing, moving, etc). There, we make sure the decorative border lies on the edges of the smart object and the children, if any, lie on their respective quadrants.</p>
<p>After instantiating our smart object, we do some checks to exemplify some of the API on smart objects:  <div class="fragment"><pre class="fragment">   ret = <a class="code" href="group__Evas__Canvas.html#ga257a2651b93de714211d4205c0e70bb9" title="Checks whether a given smart object or any of its smart object parents is of a given smart class...">evas_object_smart_type_check</a>(d.smt, _evas_smart_example_type);
   printf(<span class="stringliteral">&quot;Adding smart object of type \&quot;%s\&quot; to the canvas: %s.\n&quot;</span>,
          _evas_smart_example_type, ret ? <span class="stringliteral">&quot;success&quot;</span> : <span class="stringliteral">&quot;failure&quot;</span>);

   d.clipper = <a class="code" href="group__Evas__Canvas.html#ga1ea2217e8a4abc28a35d8273949d4444" title="Get the clipper object for the given clipped smart object.">evas_object_smart_clipped_clipper_get</a>(d.smt);
   printf(<span class="stringliteral">&quot;Checking if clipped smart object&#39;s clipper is a &quot;</span>
          <span class="stringliteral">&quot;\&quot;static\&quot; one: %s\n&quot;</span>,
          evas_object_static_clip_get(d.clipper) ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>);
</pre></div> The <a class="el" href="group__Evas__Canvas.html#ga257a2651b93de714211d4205c0e70bb9" title="Checks whether a given smart object or any of its smart object parents is of a given smart class...">evas_object_smart_type_check()</a> one will assure we have the string naming our smart class really set to the live object. The <a class="el" href="group__Evas__Canvas.html#ga1ea2217e8a4abc28a35d8273949d4444" title="Get the clipper object for the given clipped smart object.">evas_object_smart_clipped_clipper_get()</a> exemplifies usage of "static clippers" -- clipped smart objects have their global clippers flagged static.</p>
<p>Other important things we also exemplify here are <b>smart callbacks</b> and smart callback <b>introspection:</b>  <div class="fragment"><pre class="fragment"><span class="preprocessor">#define EVT_CHILDREN_NUMBER_CHANGED &quot;children,changed&quot;</span>
<span class="preprocessor"></span>
<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct__Evas__Smart__Cb__Description.html">Evas_Smart_Cb_Description</a> _smart_callbacks[] =
{
   {EVT_CHILDREN_NUMBER_CHANGED, <span class="stringliteral">&quot;i&quot;</span>},
   {NULL, NULL}
};
</pre></div></p>
<p>Here we declare our array of smart callback descriptions, which has one element only, in this case. That callback will take place, as the name indicates, whenever the number of member objects in our smart object example instance changes. That global array variable must be the last argument to <a class="el" href="group__Evas__Smart__Group.html#ga58dc94af6f064b39b2bf0155908fbe52">EVAS_SMART_SUBCLASS_NEW</a>, so that it's registered as the <b>smart class</b>'s callbacks description.</p>
<p>After we instantiate the smart object, we take a look on those descriptions and register a callback on that unique smart event:  <div class="fragment"><pre class="fragment">   <span class="keywordflow">for</span> (; *descriptions; descriptions++)
     {
        printf(<span class="stringliteral">&quot;We&#39;ve found a smart callback on the smart object!&quot;</span>
               <span class="stringliteral">&quot;\n\tname: %s\n\ttype: %s\n&quot;</span>, (*descriptions)-&gt;name,
               (*descriptions)-&gt;type);

        <span class="keywordflow">if</span> (strcmp((*descriptions)-&gt;type, <span class="stringliteral">&quot;i&quot;</span>)) <span class="keywordflow">continue</span>;
        <span class="comment">/* we know we don&#39;t have other types of smart callbacks</span>
<span class="comment">         * here, just playing with it */</span>

        <span class="comment">/* for now, we know the only one callback is the one</span>
<span class="comment">         * reporting number of member objects changed on the</span>
<span class="comment">         * example smart object */</span>
        <a class="code" href="group__Evas__Canvas.html#ga18a8b179f94d21b2b09e19db11741061">evas_object_smart_callback_add</a>(
          d.smt, (*descriptions)-&gt;name,
          _on_example_smart_object_child_num_change, NULL);
     }

   evas_object_focus_set(d.bg, EINA_TRUE);
</pre></div></p>
<p>The code of the callback will just print how many member objects we have, which is an integer argument of the callback itself, as flagged by its description:  <div class="fragment"><pre class="fragment"><span class="comment">/* callback on number of member objects changed */</span>
_on_example_smart_object_child_num_change(<span class="keywordtype">void</span> *data EINA_UNUSED,
                                          <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj EINA_UNUSED,
                                          <span class="keywordtype">void</span> *event_info)
{
   printf(<span class="stringliteral">&quot;Number of child members on our example smart&quot;</span>
          <span class="stringliteral">&quot; object changed to %llu\n&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>)(uintptr_t)event_info);
}
</pre></div></p>
<p>One of the points at which we issue that callback is inside the <code>evas_smart_example_remove()</code>, code that was already shown.</p>
<p>As in other examples, to interact with this one there's a command line interface. A help string can be asked for with the 'h' key:  <div class="fragment"><pre class="fragment"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *commands = \
  <span class="stringliteral">&quot;commands are:\n&quot;</span>
  <span class="stringliteral">&quot;\tl - insert child rectangle on the left\n&quot;</span>
  <span class="stringliteral">&quot;\tr - insert child rectangle on the right\n&quot;</span>
  <span class="stringliteral">&quot;\tw - remove and delete all members from the smart object\n&quot;</span>
  <span class="stringliteral">&quot;\tright arrow - move smart object to the right\n&quot;</span>
  <span class="stringliteral">&quot;\tleft arrow - move smart object to the left\n&quot;</span>
  <span class="stringliteral">&quot;\tup arrow - move smart object up\n&quot;</span>
  <span class="stringliteral">&quot;\tdown arrow - move smart object down\n&quot;</span>
  <span class="stringliteral">&quot;\td - decrease smart object&#39;s size\n&quot;</span>
  <span class="stringliteral">&quot;\ti - increase smart object&#39;s size\n&quot;</span>
  <span class="stringliteral">&quot;\tc - change smart object&#39;s clipper color\n&quot;</span>
  <span class="stringliteral">&quot;\t. - rotate object to the right\n&quot;</span>
  <span class="stringliteral">&quot;\t, - rotate object to the left\n&quot;</span>
  <span class="stringliteral">&quot;\th - print help\n&quot;</span>
  <span class="stringliteral">&quot;\tq - quit\n&quot;</span>
;
</pre></div> Use 'l' and 'r' keys, to create new rectangles and place them on the left (<code>evas_smart_example_set_left()</code>) or right (<code>evas_smart_example_set_right()</code>) spots of our smart object, respectively. The 'w' command will remove all member objects from the smart object and delete them. The keyboard arrows will move the smart object along the canvas. See how it takes any child objects with it during its movement. The 'd' and 'i' keys will increase or decrease the smart object's size -- see how it affects the children's sizes, too. Finally, 'c' will change the color of the smart object's clipper (which is the exact internal clipper coming from a clipped smart object):  <div class="fragment"><pre class="fragment">   d.clipper = <a class="code" href="group__Evas__Canvas.html#ga1ea2217e8a4abc28a35d8273949d4444" title="Get the clipper object for the given clipped smart object.">evas_object_smart_clipped_clipper_get</a>(d.smt);
   printf(<span class="stringliteral">&quot;Checking if clipped smart object&#39;s clipper is a &quot;</span>
          <span class="stringliteral">&quot;\&quot;static\&quot; one: %s\n&quot;</span>,
          evas_object_static_clip_get(d.clipper) ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>);

   <a class="code" href="group__Evas__Object__Group__Basic.html#gae34bdcfd7f5100151f6ea8ef4a392949">evas_object_color_set</a>(
     d.clipper, clipper_colors[cur_color].r, clipper_colors[cur_color].g,
     clipper_colors[cur_color].b, clipper_colors[cur_color].a);
</pre></div></p>
<p>"Real life" examples of smart objects are Edje and Emotion objects: they both have independent libraries implementing their behavior. The full example follows.</p>
<div class="fragment"><pre class="fragment">
<span class="preprocessor">#ifdef HAVE_CONFIG_H</span>
<span class="preprocessor"></span><span class="preprocessor">#include &quot;config.h&quot;</span>
<span class="preprocessor">#else</span>
<span class="preprocessor"></span><span class="preprocessor">#define PACKAGE_EXAMPLES_DIR &quot;.&quot;</span>
<span class="preprocessor"></span><span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
<span class="preprocessor">#include &lt;Ecore.h&gt;</span>
<span class="preprocessor">#include &lt;Ecore_Evas.h&gt;</span>
<span class="preprocessor">#include &lt;stdio.h&gt;</span>
<span class="preprocessor">#include &lt;errno.h&gt;</span>
<span class="preprocessor">#include &quot;evas-common.h&quot;</span>

<span class="preprocessor">#define WIDTH  (320)</span>
<span class="preprocessor"></span><span class="preprocessor">#define HEIGHT (240)</span>
<span class="preprocessor"></span>
<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *commands = \
  <span class="stringliteral">&quot;commands are:\n&quot;</span>
  <span class="stringliteral">&quot;\tl - insert child rectangle on the left\n&quot;</span>
  <span class="stringliteral">&quot;\tr - insert child rectangle on the right\n&quot;</span>
  <span class="stringliteral">&quot;\tw - remove and delete all members from the smart object\n&quot;</span>
  <span class="stringliteral">&quot;\tright arrow - move smart object to the right\n&quot;</span>
  <span class="stringliteral">&quot;\tleft arrow - move smart object to the left\n&quot;</span>
  <span class="stringliteral">&quot;\tup arrow - move smart object up\n&quot;</span>
  <span class="stringliteral">&quot;\tdown arrow - move smart object down\n&quot;</span>
  <span class="stringliteral">&quot;\td - decrease smart object&#39;s size\n&quot;</span>
  <span class="stringliteral">&quot;\ti - increase smart object&#39;s size\n&quot;</span>
  <span class="stringliteral">&quot;\tc - change smart object&#39;s clipper color\n&quot;</span>
  <span class="stringliteral">&quot;\t. - rotate object to the right\n&quot;</span>
  <span class="stringliteral">&quot;\t, - rotate object to the left\n&quot;</span>
  <span class="stringliteral">&quot;\th - print help\n&quot;</span>
  <span class="stringliteral">&quot;\tq - quit\n&quot;</span>
;

<span class="preprocessor">#define WHITE {255, 255, 255, 255}</span>
<span class="preprocessor"></span><span class="preprocessor">#define RED   {255, 0, 0, 255}</span>
<span class="preprocessor"></span><span class="preprocessor">#define GREEN {0, 255, 0, 255}</span>
<span class="preprocessor"></span><span class="preprocessor">#define BLUE  {0, 0, 255, 255}</span>
<span class="preprocessor"></span>
<span class="keyword">struct </span>test_data
{
   Ecore_Evas  *ee;
   <a class="code" href="group__Evas__Canvas.html#ga5ff87cc4ce6bc43e3b640a6d37f73043">Evas</a>        *evas;
   <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *smt, *bg, *clipper, *rects[2];
};

<span class="keyword">struct </span>color_tuple
{
   <span class="keywordtype">int</span> r, g, b, a;
} clipper_colors[4] = {WHITE, RED, GREEN, BLUE};

<span class="keywordtype">int</span> cur_color = 0;
<span class="keywordtype">int</span> cur_angle = 0;

<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *
_index_to_color(<span class="keywordtype">int</span> i)
{
   <span class="keywordflow">switch</span> (i)
     {
      <span class="keywordflow">case</span> 0:
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;WHITE (default)&quot;</span>;

      <span class="keywordflow">case</span> 1:
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;RED&quot;</span>;

      <span class="keywordflow">case</span> 2:
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;GREEN&quot;</span>;

      <span class="keywordflow">case</span> 3:
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;BLUE&quot;</span>;

      <span class="keywordflow">default</span>:
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;other&quot;</span>;
     }
}

<span class="keyword">static</span> <span class="keyword">struct </span>test_data d = {0};
<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *border_img_path = PACKAGE_EXAMPLES_DIR EVAS_IMAGE_FOLDER <span class="stringliteral">&quot;/red.png&quot;</span>;

<span class="preprocessor">#define _evas_smart_example_type &quot;Evas_Smart_Example&quot;</span>
<span class="preprocessor"></span><span class="preprocessor">#define EVT_CHILDREN_NUMBER_CHANGED &quot;children,changed&quot;</span>
<span class="preprocessor"></span>
<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct__Evas__Smart__Cb__Description.html">Evas_Smart_Cb_Description</a> _smart_callbacks[] =
{
   {EVT_CHILDREN_NUMBER_CHANGED, <span class="stringliteral">&quot;i&quot;</span>},
   {NULL, NULL}
};

<span class="keyword">typedef</span> <span class="keyword">struct </span>_Evas_Smart_Example_Data Evas_Smart_Example_Data;

<span class="comment">/*</span>
<span class="comment"> * This structure augments clipped smart object&#39;s instance data,</span>
<span class="comment"> * providing extra members required by our example smart object&#39;s</span>
<span class="comment"> * implementation.</span>
<span class="comment"> */</span>
<span class="keyword">struct </span>_Evas_Smart_Example_Data
{
   <a class="code" href="group__Evas__Smart__Object__Clipped.html#ga65c1b2ed3578175e476998f7b55dfe34">Evas_Object_Smart_Clipped_Data</a> base;
   <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a>                   *children[2], *border;
   <span class="keywordtype">int</span>                            child_count;
};

<span class="preprocessor">#define EVAS_SMART_EXAMPLE_DATA_GET(o, ptr) \</span>
<span class="preprocessor">  Evas_Smart_Example_Data * ptr = evas_object_smart_data_get(o)</span>
<span class="preprocessor"></span>
<span class="preprocessor">#define EVAS_SMART_EXAMPLE_DATA_GET_OR_RETURN(o, ptr)        \</span>
<span class="preprocessor">  EVAS_SMART_EXAMPLE_DATA_GET(o, ptr);                       \</span>
<span class="preprocessor">  if (!ptr)                                                  \</span>
<span class="preprocessor">    {                                                        \</span>
<span class="preprocessor">       fprintf(stderr, &quot;No widget data for object %p (%s)!&quot;, \</span>
<span class="preprocessor">               o, evas_object_type_get(o));                  \</span>
<span class="preprocessor">       fflush(stderr);                                       \</span>
<span class="preprocessor">       abort();                                              \</span>
<span class="preprocessor">       return;                                               \</span>
<span class="preprocessor">    }</span>
<span class="preprocessor"></span>
<span class="preprocessor">#define EVAS_SMART_EXAMPLE_DATA_GET_OR_RETURN_VAL(o, ptr, val) \</span>
<span class="preprocessor">  EVAS_SMART_EXAMPLE_DATA_GET(o, ptr);                         \</span>
<span class="preprocessor">  if (!ptr)                                                    \</span>
<span class="preprocessor">    {                                                          \</span>
<span class="preprocessor">       fprintf(stderr, &quot;No widget data for object %p (%s)!&quot;,   \</span>
<span class="preprocessor">               o, evas_object_type_get(o));                    \</span>
<span class="preprocessor">       fflush(stderr);                                         \</span>
<span class="preprocessor">       abort();                                                \</span>
<span class="preprocessor">       return val;                                             \</span>
<span class="preprocessor">    }</span>
<span class="preprocessor"></span>
<a class="code" href="group__Evas__Smart__Group.html#ga58dc94af6f064b39b2bf0155908fbe52">EVAS_SMART_SUBCLASS_NEW</a>(_evas_smart_example_type, _evas_smart_example,
                        <a class="code" href="struct__Evas__Smart__Class.html">Evas_Smart_Class</a>, <a class="code" href="struct__Evas__Smart__Class.html">Evas_Smart_Class</a>,
                        <a class="code" href="group__Evas__Smart__Object__Clipped.html#gabbb2c85a3978e44404528a94be381dcd">evas_object_smart_clipped_class_get</a>, _smart_callbacks);

<span class="keyword">static</span> <span class="keywordtype">void</span>
_on_destroy(Ecore_Evas *ee EINA_UNUSED)
{
   <a class="code" href="group__Ecore__Main__Loop__Group.html#ga95cf8e97dff0716433c2c5474d606a98">ecore_main_loop_quit</a>();
}

<span class="comment">/* Keep the example&#39;s window size in sync with the background image&#39;s size */</span>
<span class="keyword">static</span> <span class="keywordtype">void</span>
_canvas_resize_cb(Ecore_Evas *ee)
{
   <span class="keywordtype">int</span> w, h;

   <a class="code" href="group__Ecore__Evas__Group.html#ga73a19ff229ddec5e2c98ab81718008ee" title="Gets the geometry of an Ecore_Evas.">ecore_evas_geometry_get</a>(ee, NULL, NULL, &amp;w, &amp;h);
   evas_object_resize(d.bg, w, h);
}

<span class="keyword">static</span> <span class="keywordtype">void</span>
_on_child_del(<span class="keywordtype">void</span> *data,
              <a class="code" href="group__Evas__Canvas.html#ga5ff87cc4ce6bc43e3b640a6d37f73043">Evas</a> *evas EINA_UNUSED,
              <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *o,
              <span class="keywordtype">void</span> *einfo EINA_UNUSED)
{
   <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *example_smart = data;
   <span class="keywordtype">long</span> idx;

   EVAS_SMART_EXAMPLE_DATA_GET(example_smart, priv);

   idx = (long)(uintptr_t)<a class="code" href="group__Evas__Object__Group__Extras.html#gafbad43015793eda4ae50202c0ce0e652">evas_object_data_get</a>(o, <span class="stringliteral">&quot;index&quot;</span>);
   idx--;

   priv-&gt;children[idx] = NULL;

   <a class="code" href="group__Evas__Canvas.html#ga12034359ab780a3a0e8b20b83475ed15">evas_object_smart_member_del</a>(o);
   <a class="code" href="group__Evas__Canvas.html#ga4f08aefaa29ea4bfc5b3f5c89c85dd59" title="Mark smart object as changed, dirty.">evas_object_smart_changed</a>(example_smart);
}

<span class="keyword">static</span> <span class="keywordtype">void</span>
_evas_smart_example_child_callbacks_unregister(<a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj)
{
   <a class="code" href="group__Evas__Object__Group__Extras.html#ga70134a7068c9bff4107a761abe0a2ad4">evas_object_data_set</a>(obj, <span class="stringliteral">&quot;index&quot;</span>, NULL);
   <a class="code" href="group__Evas__Object__Group__Events.html#gab271959a45d1d5348f6e78a14def44c2">evas_object_event_callback_del</a>(obj, EVAS_CALLBACK_FREE, _on_child_del);
}

<span class="keyword">static</span> <span class="keywordtype">void</span>
_evas_smart_example_child_callbacks_register(<a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *o,
                                             <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *child,
                                             <span class="keywordtype">long</span> idx)
{
   <a class="code" href="group__Evas__Object__Group__Events.html#ga23be30ac5cdfb780f1ff82e9108ec26b">evas_object_event_callback_add</a>(child, EVAS_CALLBACK_FREE, _on_child_del, o);
   <a class="code" href="group__Evas__Object__Group__Extras.html#ga70134a7068c9bff4107a761abe0a2ad4">evas_object_data_set</a>(child, <span class="stringliteral">&quot;index&quot;</span>, (<span class="keywordtype">void</span> *)(uintptr_t)(++idx));
}

<span class="comment">/* create and setup a new example smart object&#39;s internals */</span>
<span class="keyword">static</span> <span class="keywordtype">void</span>
_evas_smart_example_smart_add(<a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *o)
{
   <a class="code" href="group__Evas__Smart__Group.html#ga4aa4b72aafa0391144fb0171aeff2ccd">EVAS_SMART_DATA_ALLOC</a>(o, Evas_Smart_Example_Data);

   <span class="comment">/* call parent_sc-&gt;add() before member_adding the children, otherwise the</span>
<span class="comment">    * smart object&#39;s clipper won&#39;t be created yet, and the children won&#39;t be</span>
<span class="comment">    * clipped to it */</span>
   _evas_smart_example_parent_sc-&gt;add(o);

   <span class="comment">/* this is a border around the smart object&#39;s area, delimiting it */</span>
   priv-&gt;border = evas_object_image_filled_add(evas_object_evas_get(o));
   evas_object_image_file_set(priv-&gt;border, border_img_path, NULL);
   evas_object_image_border_set(priv-&gt;border, 3, 3, 3, 3);
   evas_object_image_border_center_fill_set(
     priv-&gt;border, EVAS_BORDER_FILL_NONE);
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(priv-&gt;border);
   <a class="code" href="group__Evas__Canvas.html#ga6845c17effe796430cb4fc5f2cfccef0">evas_object_smart_member_add</a>(priv-&gt;border, o);
}

<span class="keyword">static</span> <span class="keywordtype">void</span>
_evas_smart_example_smart_del(<a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *o)
{
   EVAS_SMART_EXAMPLE_DATA_GET(o, priv);

   <span class="keywordflow">if</span> (priv-&gt;children[0])
     {
        _evas_smart_example_child_callbacks_unregister(priv-&gt;children[0]);
        priv-&gt;children[0] = NULL;
     }

   <span class="keywordflow">if</span> (priv-&gt;children[1])
     {
        _evas_smart_example_child_callbacks_unregister(priv-&gt;children[1]);
        priv-&gt;children[1] = NULL;
     }

   _evas_smart_example_parent_sc-&gt;del(o);
}

<span class="keyword">static</span> <span class="keywordtype">void</span>
_evas_smart_example_smart_resize(<a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *o,
                                 Evas_Coord w,
                                 Evas_Coord h)
{
   Evas_Coord ow, oh;
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga6f52fab1a96dc58c85ee481d84bac871">evas_object_geometry_get</a>(o, NULL, NULL, &amp;ow, &amp;oh);
   <span class="keywordflow">if</span> ((ow == w) &amp;&amp; (oh == h)) <span class="keywordflow">return</span>;

   <span class="comment">/* this will trigger recalculation */</span>
   <a class="code" href="group__Evas__Canvas.html#ga4f08aefaa29ea4bfc5b3f5c89c85dd59" title="Mark smart object as changed, dirty.">evas_object_smart_changed</a>(o);
}

<span class="comment">/* act on child objects&#39; properties, before rendering */</span>
<span class="keyword">static</span> <span class="keywordtype">void</span>
_evas_smart_example_smart_calculate(<a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *o)
{
   Evas_Coord x, y, w, h;

   EVAS_SMART_EXAMPLE_DATA_GET_OR_RETURN(o, priv);
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga6f52fab1a96dc58c85ee481d84bac871">evas_object_geometry_get</a>(o, &amp;x, &amp;y, &amp;w, &amp;h);

   evas_object_resize(priv-&gt;border, w, h);
   evas_object_move(priv-&gt;border, x, y);

   <span class="keywordflow">if</span> (priv-&gt;children[0])
     {
        evas_object_move(priv-&gt;children[0], x + 3, y + 3);
        evas_object_resize(priv-&gt;children[0], (w / 2) - 3, (h / 2) - 3);
     }

   <span class="keywordflow">if</span> (priv-&gt;children[1])
     {
        evas_object_move(priv-&gt;children[1], x + (w / 2), y + (h / 2));
        evas_object_resize(priv-&gt;children[1], (w / 2) - 3, (h / 2) - 3);
     }
}

<span class="comment">/* setting our smart interface */</span>
<span class="keyword">static</span> <span class="keywordtype">void</span>
_evas_smart_example_smart_set_user(<a class="code" href="struct__Evas__Smart__Class.html">Evas_Smart_Class</a> *sc)
{
   <span class="comment">/* specializing these two */</span>
   sc-&gt;<a class="code" href="struct__Evas__Smart__Class.html#a53149c9c3c1eb86af742a2d89790d2c7">add</a> = _evas_smart_example_smart_add;
   sc-&gt;<a class="code" href="struct__Evas__Smart__Class.html#a8a493473cd97a4e9284f5a33f0afe823">del</a> = _evas_smart_example_smart_del;

   <span class="comment">/* clipped smart object has no hook on resizes or calculations */</span>
   sc-&gt;<a class="code" href="struct__Evas__Smart__Class.html#a6b7ea5214710d6a1a8981e57469ac1aa">resize</a> = _evas_smart_example_smart_resize;
   sc-&gt;<a class="code" href="struct__Evas__Smart__Class.html#af48b73a524d5fe75604ee104bca4e79a">calculate</a> = _evas_smart_example_smart_calculate;
}

<span class="comment">/* BEGINS example smart object&#39;s own interface */</span>

<span class="comment">/* add a new example smart object to a canvas */</span>
<a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *
evas_smart_example_add(<a class="code" href="group__Evas__Canvas.html#ga5ff87cc4ce6bc43e3b640a6d37f73043">Evas</a> *evas)
{
   <span class="keywordflow">return</span> <a class="code" href="group__Evas__Canvas.html#gad80de73a33446f902d4b39141a8d0a05" title="Get if the canvas is currently calculating smart objects.">evas_object_smart_add</a>(evas, _evas_smart_example_smart_class_new());
}

<span class="keyword">static</span> <span class="keywordtype">void</span>
_evas_smart_example_remove_do(Evas_Smart_Example_Data *priv,
                              <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *child,
                              <span class="keywordtype">int</span> idx)
{
   priv-&gt;children[idx] = NULL;
   priv-&gt;child_count--;
   _evas_smart_example_child_callbacks_unregister(child);
   <a class="code" href="group__Evas__Canvas.html#ga12034359ab780a3a0e8b20b83475ed15">evas_object_smart_member_del</a>(child);
}

<span class="comment">/* remove a child element, return its pointer (or NULL on errors) */</span>
<a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *
evas_smart_example_remove(<a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *o,
                          <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *child)
{
   <span class="keywordtype">long</span> idx;

   EVAS_SMART_EXAMPLE_DATA_GET_OR_RETURN_VAL(o, priv, NULL);

   <span class="keywordflow">if</span> (priv-&gt;children[0] != child &amp;&amp; priv-&gt;children[1] != child)
     {
        fprintf(stderr, <span class="stringliteral">&quot;You are trying to remove something not belonging to&quot;</span>
                        <span class="stringliteral">&quot; the example smart object!\n&quot;</span>);
        <span class="keywordflow">return</span> NULL;
     }

   idx = (long)(uintptr_t)<a class="code" href="group__Evas__Object__Group__Extras.html#gafbad43015793eda4ae50202c0ce0e652">evas_object_data_get</a>(child, <span class="stringliteral">&quot;index&quot;</span>);
   idx--;

   _evas_smart_example_remove_do(priv, child, idx);

   <a class="code" href="group__Evas__Canvas.html#gaa81bbe0af70df6c90b8fc781c59237bc">evas_object_smart_callback_call</a>(
     o, EVT_CHILDREN_NUMBER_CHANGED, (<span class="keywordtype">void</span> *)(uintptr_t)priv-&gt;child_count);
   <a class="code" href="group__Evas__Canvas.html#ga4f08aefaa29ea4bfc5b3f5c89c85dd59" title="Mark smart object as changed, dirty.">evas_object_smart_changed</a>(o);

   <span class="keywordflow">return</span> child;
}

<span class="comment">/* set to return any previous object set to the left position of the</span>
<span class="comment"> * smart object or NULL, if any (or on errors) */</span>
<a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *
evas_smart_example_set_left(<a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *o,
                            <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *child)
{
   <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *ret = NULL;

   EVAS_SMART_EXAMPLE_DATA_GET_OR_RETURN_VAL(o, priv, NULL);
   <span class="keywordflow">if</span> (!child)
     <span class="keywordflow">return</span> NULL;

   <span class="keywordflow">if</span> (priv-&gt;children[1] == child)
     {
        fprintf(stderr, <span class="stringliteral">&quot;You mustn&#39;t place a child on both slots of&quot;</span>
                        <span class="stringliteral">&quot; the example smart object!\n&quot;</span>);
        <span class="keywordflow">return</span> NULL;
     }

   <span class="keywordflow">if</span> (priv-&gt;children[0])
     {
        <span class="keywordflow">if</span> (priv-&gt;children[0] != child)
          {
             ret = priv-&gt;children[0];
             _evas_smart_example_remove_do(priv, priv-&gt;children[0], 0);
          }
        <span class="keywordflow">else</span> <span class="keywordflow">return</span> child;
     }

   priv-&gt;children[0] = child;
   _evas_smart_example_child_callbacks_register(o, child, 0);
   <a class="code" href="group__Evas__Canvas.html#ga6845c17effe796430cb4fc5f2cfccef0">evas_object_smart_member_add</a>(child, o);
   <a class="code" href="group__Evas__Canvas.html#ga4f08aefaa29ea4bfc5b3f5c89c85dd59" title="Mark smart object as changed, dirty.">evas_object_smart_changed</a>(o);

   priv-&gt;child_count++;
   <span class="keywordflow">if</span> (!ret)
     {
        <a class="code" href="group__Evas__Canvas.html#gaa81bbe0af70df6c90b8fc781c59237bc">evas_object_smart_callback_call</a>(
          o, EVT_CHILDREN_NUMBER_CHANGED, (<span class="keywordtype">void</span> *)(uintptr_t)priv-&gt;child_count);
     }

   <span class="keywordflow">return</span> ret;
}

<span class="comment">/* set to return any previous object set to the right position of the</span>
<span class="comment"> * smart object or NULL, if any (or on errors) */</span>
<a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *
evas_smart_example_set_right(<a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *o,
                             <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *child)
{
   <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *ret = NULL;

   EVAS_SMART_EXAMPLE_DATA_GET_OR_RETURN_VAL(o, priv, NULL);
   <span class="keywordflow">if</span> (!child)
     <span class="keywordflow">return</span> NULL;

   <span class="keywordflow">if</span> (priv-&gt;children[0] == child)
     {
        fprintf(stderr, <span class="stringliteral">&quot;You mustn&#39;t place a child on both slots of&quot;</span>
                        <span class="stringliteral">&quot; the example smart object!\n&quot;</span>);
        <span class="keywordflow">return</span> NULL;
     }

   <span class="keywordflow">if</span> (priv-&gt;children[1])
     {
        <span class="keywordflow">if</span> (priv-&gt;children[1] != child)
          {
             ret = priv-&gt;children[1];
             _evas_smart_example_remove_do(priv, priv-&gt;children[1], 1);
          }
        <span class="keywordflow">else</span> <span class="keywordflow">return</span> child;
     }

   priv-&gt;children[1] = child;
   _evas_smart_example_child_callbacks_register(o, child, 1);
   <a class="code" href="group__Evas__Canvas.html#ga6845c17effe796430cb4fc5f2cfccef0">evas_object_smart_member_add</a>(child, o);
   <a class="code" href="group__Evas__Canvas.html#ga4f08aefaa29ea4bfc5b3f5c89c85dd59" title="Mark smart object as changed, dirty.">evas_object_smart_changed</a>(o);

   priv-&gt;child_count++;
   <span class="keywordflow">if</span> (!ret)
     {
        <a class="code" href="group__Evas__Canvas.html#gaa81bbe0af70df6c90b8fc781c59237bc">evas_object_smart_callback_call</a>(
          o, EVT_CHILDREN_NUMBER_CHANGED, (<span class="keywordtype">void</span> *)(uintptr_t)priv-&gt;child_count);
     }

   <span class="keywordflow">return</span> ret;
}

<span class="comment">/* END OF example smart object&#39;s own interface */</span>

<span class="keyword">static</span> <span class="keywordtype">void</span>
_map_update(<span class="keywordtype">void</span>)
{
   Evas_Map *m;
   Evas_Coord x, y, w, h;

   <a class="code" href="group__Evas__Object__Group__Basic.html#ga6f52fab1a96dc58c85ee481d84bac871">evas_object_geometry_get</a>(d.smt, &amp;x, &amp;y, &amp;w, &amp;h);
   m = <a class="code" href="group__Evas__Object__Group__Map.html#ga68a1a6d2dfdd5c9d88a9200eb78cca4e">evas_map_new</a>(4);
   <a class="code" href="group__Evas__Object__Group__Map.html#gaa21f5c7338fbb125b8e50890b3fefb91">evas_map_util_points_populate_from_object</a>(m, d.smt);
   <a class="code" href="group__Evas__Object__Group__Map.html#ga0db530bdf4f619b3c9c4c74c3e87ccac">evas_map_util_rotate</a>(m, cur_angle, x + (w / 2), y + (h / 2));
   evas_object_map_set(d.smt, m);
   evas_object_map_enable_set(d.smt, EINA_TRUE);
   <a class="code" href="group__Evas__Object__Group__Map.html#gab3e18d6086e352b121a57c130041bb24">evas_map_free</a>(m);
}

<span class="keyword">static</span> <span class="keywordtype">void</span>
_on_keydown(<span class="keywordtype">void</span> *data EINA_UNUSED,
            <a class="code" href="group__Evas__Canvas.html#ga5ff87cc4ce6bc43e3b640a6d37f73043">Evas</a> *evas EINA_UNUSED,
            <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *o EINA_UNUSED,
            <span class="keywordtype">void</span> *einfo)
{
   <a class="code" href="struct__Evas__Event__Key__Down.html">Evas_Event_Key_Down</a> *ev = einfo;

   <span class="keywordflow">if</span> (strcmp(ev-&gt;<a class="code" href="struct__Evas__Event__Key__Down.html#a70473bba88a1afaee180a54150513824">key</a>, <span class="stringliteral">&quot;q&quot;</span>) == 0) <span class="comment">/* print help */</span>
     {
        _on_destroy(NULL);
        <span class="keywordflow">return</span>;
     }

   <span class="keywordflow">if</span> (strcmp(ev-&gt;<a class="code" href="struct__Evas__Event__Key__Down.html#a70473bba88a1afaee180a54150513824">key</a>, <span class="stringliteral">&quot;h&quot;</span>) == 0) <span class="comment">/* print help */</span>
     {
        puts(commands);
        <span class="keywordflow">return</span>;
     }

   <span class="keywordflow">if</span> (strcmp(ev-&gt;<a class="code" href="struct__Evas__Event__Key__Down.html#a70473bba88a1afaee180a54150513824">key</a>, <span class="stringliteral">&quot;w&quot;</span>) == 0) <span class="comment">/* clear out smart object (WRT</span>
<span class="comment">                                       * members) */</span>
     {
        <span class="keywordflow">if</span> (d.rects[0])
          {
             evas_smart_example_remove(d.smt, d.rects[0]);
             <a class="code" href="group__Evas__Object__Group__Basic.html#ga7e7a625dab7a3890532aa13b43117076">evas_object_del</a>(d.rects[0]);
          }
        <span class="keywordflow">if</span> (d.rects[1])
          {
             evas_smart_example_remove(d.smt, d.rects[1]);
             <a class="code" href="group__Evas__Object__Group__Basic.html#ga7e7a625dab7a3890532aa13b43117076">evas_object_del</a>(d.rects[1]);
          }

        memset(d.rects, 0, <span class="keyword">sizeof</span>(d.rects));

        printf(<span class="stringliteral">&quot;Deleting all members of the smart object.\n&quot;</span>);

        <span class="keywordflow">return</span>;
     }

   <span class="keywordflow">if</span> (strcmp(ev-&gt;<a class="code" href="struct__Evas__Event__Key__Down.html#a70473bba88a1afaee180a54150513824">key</a>, <span class="stringliteral">&quot;l&quot;</span>) == 0) <span class="comment">/* insert random colored</span>
<span class="comment">                                       * rectangle on the left */</span>
     {
        <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *rect = <a class="code" href="group__Evas__Object__Rectangle.html#ga4d80fc32ad1cac28428cebd65d746751">evas_object_rectangle_add</a>(d.evas), *prev;
        <a class="code" href="group__Evas__Object__Group__Basic.html#gae34bdcfd7f5100151f6ea8ef4a392949">evas_object_color_set</a>(
          rect, rand() % 255, rand() % 255, rand() % 255, 255);
        <a class="code" href="group__Evas__Object__Group__Basic.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(rect);

        prev = evas_smart_example_set_left(d.smt, rect);
        d.rects[0] = rect;

        printf(<span class="stringliteral">&quot;Setting smart object&#39;s left spot with a new rectangle.\n&quot;</span>);
        printf(<span class="stringliteral">&quot;Checking its new smart object parent: %s\n&quot;</span>,
               evas_object_smart_parent_get(rect) == d.smt ? <span class="stringliteral">&quot;OK!&quot;</span> :
               <span class="stringliteral">&quot;Failure!&quot;</span>);
        <span class="keywordflow">if</span> (prev)
          {
             <span class="keywordtype">int</span> r, g, b;

             <a class="code" href="group__Evas__Object__Group__Basic.html#ga0854bae878bfc39f51b9c989353c973f">evas_object_color_get</a>(prev, &amp;r, &amp;g, &amp;b, NULL);
             printf(<span class="stringliteral">&quot;Deleting previous left child,&quot;</span>
                    <span class="stringliteral">&quot; which had colors (%d, %d, %d)\n&quot;</span>, r, g, b);
             <a class="code" href="group__Evas__Object__Group__Basic.html#ga7e7a625dab7a3890532aa13b43117076">evas_object_del</a>(prev);
          }

        <span class="keywordflow">return</span>;
     }

   <span class="keywordflow">if</span> (strcmp(ev-&gt;<a class="code" href="struct__Evas__Event__Key__Down.html#a70473bba88a1afaee180a54150513824">key</a>, <span class="stringliteral">&quot;r&quot;</span>) == 0) <span class="comment">/* insert random colored</span>
<span class="comment">                                       * rectangle on the right */</span>
     {
        <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *rect = <a class="code" href="group__Evas__Object__Rectangle.html#ga4d80fc32ad1cac28428cebd65d746751">evas_object_rectangle_add</a>(d.evas), *prev;
        <a class="code" href="group__Evas__Object__Group__Basic.html#gae34bdcfd7f5100151f6ea8ef4a392949">evas_object_color_set</a>(
          rect, rand() % 255, rand() % 255, rand() % 255, 255);
        <a class="code" href="group__Evas__Object__Group__Basic.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(rect);

        prev = evas_smart_example_set_right(d.smt, rect);
        d.rects[1] = rect;

        printf(<span class="stringliteral">&quot;Setting smart object&#39;s right spot with a new rectangle.\n&quot;</span>);
        printf(<span class="stringliteral">&quot;Checking its new smart object parent: %s\n&quot;</span>,
               evas_object_smart_parent_get(rect) == d.smt ? <span class="stringliteral">&quot;OK!&quot;</span> :
               <span class="stringliteral">&quot;Failure!&quot;</span>);
        <span class="keywordflow">if</span> (prev)
          {
             <span class="keywordtype">int</span> r, g, b;

             <a class="code" href="group__Evas__Object__Group__Basic.html#ga0854bae878bfc39f51b9c989353c973f">evas_object_color_get</a>(prev, &amp;r, &amp;g, &amp;b, NULL);
             printf(<span class="stringliteral">&quot;Deleting previous right child,&quot;</span>
                    <span class="stringliteral">&quot; which had colors (%d, %d, %d)\n&quot;</span>, r, g, b);
             <a class="code" href="group__Evas__Object__Group__Basic.html#ga7e7a625dab7a3890532aa13b43117076">evas_object_del</a>(prev);
          }

        <span class="keywordflow">return</span>;
     }

   <span class="comment">/* move smart object along the canvas */</span>
   <span class="keywordflow">if</span> (strcmp(ev-&gt;<a class="code" href="struct__Evas__Event__Key__Down.html#a70473bba88a1afaee180a54150513824">key</a>, <span class="stringliteral">&quot;Right&quot;</span>) == 0 || strcmp(ev-&gt;<a class="code" href="struct__Evas__Event__Key__Down.html#a70473bba88a1afaee180a54150513824">key</a>, <span class="stringliteral">&quot;Left&quot;</span>) == 0 ||
       strcmp(ev-&gt;<a class="code" href="struct__Evas__Event__Key__Down.html#a70473bba88a1afaee180a54150513824">key</a>, <span class="stringliteral">&quot;Up&quot;</span>) == 0 || strcmp(ev-&gt;<a class="code" href="struct__Evas__Event__Key__Down.html#a70473bba88a1afaee180a54150513824">key</a>, <span class="stringliteral">&quot;Down&quot;</span>) == 0)
     {
        Evas_Coord x, y;

        <a class="code" href="group__Evas__Object__Group__Basic.html#ga6f52fab1a96dc58c85ee481d84bac871">evas_object_geometry_get</a>(d.smt, &amp;x, &amp;y, NULL, NULL);

        <span class="keywordflow">switch</span> (ev-&gt;<a class="code" href="struct__Evas__Event__Key__Down.html#a70473bba88a1afaee180a54150513824">key</a>[0])
          {
           <span class="keywordflow">case</span> <span class="charliteral">&#39;R&#39;</span>:
             x += 20;
             <span class="keywordflow">break</span>;

           <span class="keywordflow">case</span> <span class="charliteral">&#39;L&#39;</span>:
             x -= 20;
             <span class="keywordflow">break</span>;

           <span class="keywordflow">case</span> <span class="charliteral">&#39;U&#39;</span>:
             y -= 20;
             <span class="keywordflow">break</span>;

           <span class="keywordflow">case</span> <span class="charliteral">&#39;D&#39;</span>:
             y += 20;
             <span class="keywordflow">break</span>;
          }

        evas_object_move(d.smt, x, y);
        _map_update();

        <span class="keywordflow">return</span>;
     }

   <span class="comment">/* increase smart object&#39;s size */</span>
   <span class="keywordflow">if</span> (strcmp(ev-&gt;<a class="code" href="struct__Evas__Event__Key__Down.html#a70473bba88a1afaee180a54150513824">key</a>, <span class="stringliteral">&quot;i&quot;</span>) == 0)
     {
        Evas_Coord w, h;

        <a class="code" href="group__Evas__Object__Group__Basic.html#ga6f52fab1a96dc58c85ee481d84bac871">evas_object_geometry_get</a>(d.smt, NULL, NULL, &amp;w, &amp;h);

        w *= 1.1;
        h *= 1.1;

        evas_object_resize(d.smt, w, h);
        _map_update();

        <span class="keywordflow">return</span>;
     }

   <span class="comment">/* decrease smart object&#39;s size */</span>
   <span class="keywordflow">if</span> (strcmp(ev-&gt;<a class="code" href="struct__Evas__Event__Key__Down.html#a70473bba88a1afaee180a54150513824">key</a>, <span class="stringliteral">&quot;d&quot;</span>) == 0)
     {
        Evas_Coord w, h;

        <a class="code" href="group__Evas__Object__Group__Basic.html#ga6f52fab1a96dc58c85ee481d84bac871">evas_object_geometry_get</a>(d.smt, NULL, NULL, &amp;w, &amp;h);

        w *= 0.9;
        h *= 0.9;

        evas_object_resize(d.smt, w, h);
        _map_update();

        <span class="keywordflow">return</span>;
     }

   <span class="comment">/* change smart object&#39;s clipper color */</span>
   <span class="keywordflow">if</span> (strcmp(ev-&gt;<a class="code" href="struct__Evas__Event__Key__Down.html#a70473bba88a1afaee180a54150513824">key</a>, <span class="stringliteral">&quot;c&quot;</span>) == 0)
     {
        cur_color = (cur_color + 1) % 4;

        <a class="code" href="group__Evas__Object__Group__Basic.html#gae34bdcfd7f5100151f6ea8ef4a392949">evas_object_color_set</a>(
          d.clipper, clipper_colors[cur_color].r, clipper_colors[cur_color].g,
          clipper_colors[cur_color].b, clipper_colors[cur_color].a);

        fprintf(stderr, <span class="stringliteral">&quot;Changing clipper&#39;s color to %s\n&quot;</span>,
                _index_to_color(cur_color));

        <span class="keywordflow">return</span>;
     }

   <span class="comment">/* rotate object to the right */</span>
   <span class="keywordflow">if</span> (strcmp(ev-&gt;<a class="code" href="struct__Evas__Event__Key__Down.html#a70473bba88a1afaee180a54150513824">key</a>, <span class="stringliteral">&quot;period&quot;</span>) == 0)
     {
        cur_angle = (cur_angle + 30) % 360;
        _map_update();
        <span class="keywordflow">return</span>;
     }

   <span class="keywordflow">if</span> (strcmp(ev-&gt;<a class="code" href="struct__Evas__Event__Key__Down.html#a70473bba88a1afaee180a54150513824">key</a>, <span class="stringliteral">&quot;comma&quot;</span>) == 0)
     {
        cur_angle = (cur_angle - 30) % 360;
        _map_update();
        <span class="keywordflow">return</span>;
     }

   fprintf(stderr, <span class="stringliteral">&quot;Invalid key: &#39;%s&#39;\n&quot;</span>, ev-&gt;<a class="code" href="struct__Evas__Event__Key__Down.html#a70473bba88a1afaee180a54150513824">key</a>);
}

<span class="keyword">static</span> <span class="keywordtype">void</span>
<span class="comment">/* callback on number of member objects changed */</span>
_on_example_smart_object_child_num_change(<span class="keywordtype">void</span> *data EINA_UNUSED,
                                          <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj EINA_UNUSED,
                                          <span class="keywordtype">void</span> *event_info)
{
   printf(<span class="stringliteral">&quot;Number of child members on our example smart&quot;</span>
          <span class="stringliteral">&quot; object changed to %llu\n&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>)(uintptr_t)event_info);
}

<span class="keywordtype">int</span>
main(<span class="keywordtype">void</span>)
{
   <span class="keyword">const</span> <a class="code" href="struct__Evas__Smart__Cb__Description.html">Evas_Smart_Cb_Description</a> **descriptions;
   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count;
   <a class="code" href="group__Eina__Types__Group.html#ga3fe0caf72e93b1bab1ca8ee3ccf3f226">Eina_Bool</a> ret;

   srand(time(NULL));

   <span class="keywordflow">if</span> (!<a class="code" href="group__Ecore__Evas__Group.html#gad36db3002bbf891d28af0d6b22dda1b5" title="Inits the Ecore_Evas system.">ecore_evas_init</a>())
     <span class="keywordflow">return</span> EXIT_FAILURE;

   <span class="comment">/* this will give you a window with an Evas canvas under the first</span>
<span class="comment">    * engine available */</span>
   d.ee = <a class="code" href="group__Ecore__Evas__Group.html#gac3d6e2809d0c8811fc9958de24b68167" title="Creates a new Ecore_Evas based on engine name and common parameters.">ecore_evas_new</a>(NULL, 10, 10, WIDTH, HEIGHT, NULL);
   <span class="keywordflow">if</span> (!d.ee)
     <span class="keywordflow">goto</span> error;

   <a class="code" href="group__Ecore__Evas__Group.html#ga882987a24bee767814a936d15bc6a188" title="Sets a callback for Ecore_Evas destroy events.">ecore_evas_callback_destroy_set</a>(d.ee, _on_destroy);
   <a class="code" href="group__Ecore__Evas__Group.html#ga735c0c2fb597f34b096ec0f43fc3a7ac" title="Sets a callback for Ecore_Evas resize events.">ecore_evas_callback_resize_set</a>(d.ee, _canvas_resize_cb);
   <a class="code" href="group__Ecore__Evas__Group.html#gaaea54d6b6ab85ac2f3355052d04e487e" title="Shows an Ecore_Evas&#39; window.">ecore_evas_show</a>(d.ee);

   <span class="comment">/* the canvas pointer, de facto */</span>
   d.evas = <a class="code" href="group__Ecore__Evas__Group.html#ga21b6108d757f0aea6c4126d59cfb8826" title="Gets an Ecore_Evas&#39;s Evas.">ecore_evas_get</a>(d.ee);

   d.bg = <a class="code" href="group__Evas__Object__Rectangle.html#ga4d80fc32ad1cac28428cebd65d746751">evas_object_rectangle_add</a>(d.evas);
   <a class="code" href="group__Evas__Object__Group__Basic.html#gae34bdcfd7f5100151f6ea8ef4a392949">evas_object_color_set</a>(d.bg, 255, 255, 255, 255);
   evas_object_move(d.bg, 0, 0);
   evas_object_resize(d.bg, WIDTH, HEIGHT);
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(d.bg);

   d.smt = evas_smart_example_add(d.evas);
   evas_object_move(d.smt, WIDTH / 4, HEIGHT / 4);
   evas_object_resize(d.smt, WIDTH / 2, HEIGHT / 2);
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(d.smt);

   ret = <a class="code" href="group__Evas__Canvas.html#ga257a2651b93de714211d4205c0e70bb9" title="Checks whether a given smart object or any of its smart object parents is of a given smart class...">evas_object_smart_type_check</a>(d.smt, _evas_smart_example_type);
   printf(<span class="stringliteral">&quot;Adding smart object of type \&quot;%s\&quot; to the canvas: %s.\n&quot;</span>,
          _evas_smart_example_type, ret ? <span class="stringliteral">&quot;success&quot;</span> : <span class="stringliteral">&quot;failure&quot;</span>);

   d.clipper = <a class="code" href="group__Evas__Canvas.html#ga1ea2217e8a4abc28a35d8273949d4444" title="Get the clipper object for the given clipped smart object.">evas_object_smart_clipped_clipper_get</a>(d.smt);
   printf(<span class="stringliteral">&quot;Checking if clipped smart object&#39;s clipper is a &quot;</span>
          <span class="stringliteral">&quot;\&quot;static\&quot; one: %s\n&quot;</span>,
          evas_object_static_clip_get(d.clipper) ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>);

   <a class="code" href="group__Evas__Object__Group__Basic.html#gae34bdcfd7f5100151f6ea8ef4a392949">evas_object_color_set</a>(
     d.clipper, clipper_colors[cur_color].r, clipper_colors[cur_color].g,
     clipper_colors[cur_color].b, clipper_colors[cur_color].a);

   <a class="code" href="group__Evas__Canvas.html#ga78cb1ef59bcf3e20e2b437dbf1f5aac8" title="Retrieve an smart object&#39;s know smart callback descriptions (both instance and class ones)...">evas_object_smart_callbacks_descriptions_get</a>(
     d.smt, &amp;descriptions, &amp;count, NULL, NULL);

   <span class="keywordflow">for</span> (; *descriptions; descriptions++)
     {
        printf(<span class="stringliteral">&quot;We&#39;ve found a smart callback on the smart object!&quot;</span>
               <span class="stringliteral">&quot;\n\tname: %s\n\ttype: %s\n&quot;</span>, (*descriptions)-&gt;name,
               (*descriptions)-&gt;type);

        <span class="keywordflow">if</span> (strcmp((*descriptions)-&gt;type, <span class="stringliteral">&quot;i&quot;</span>)) <span class="keywordflow">continue</span>;
        <span class="comment">/* we know we don&#39;t have other types of smart callbacks</span>
<span class="comment">         * here, just playing with it */</span>

        <span class="comment">/* for now, we know the only one callback is the one</span>
<span class="comment">         * reporting number of member objects changed on the</span>
<span class="comment">         * example smart object */</span>
        <a class="code" href="group__Evas__Canvas.html#ga18a8b179f94d21b2b09e19db11741061">evas_object_smart_callback_add</a>(
          d.smt, (*descriptions)-&gt;name,
          _on_example_smart_object_child_num_change, NULL);
     }

   evas_object_focus_set(d.bg, EINA_TRUE);
   <a class="code" href="group__Evas__Object__Group__Events.html#ga23be30ac5cdfb780f1ff82e9108ec26b">evas_object_event_callback_add</a>(
     d.bg, EVAS_CALLBACK_KEY_DOWN, _on_keydown, NULL);

   puts(commands);
   <a class="code" href="group__Ecore__Main__Loop__Group.html#gaf103b9f668bb3e4fed12e52c6180132d">ecore_main_loop_begin</a>();

   <a class="code" href="group__Ecore__Evas__Group.html#ga68f83d423894b2797e8e693376921161" title="Frees an Ecore_Evas.">ecore_evas_free</a>(d.ee);
   <a class="code" href="group__Ecore__Evas__Group.html#gab1a47c09b475148c037c0a3d68644fa4" title="Shuts down the Ecore_Evas system.">ecore_evas_shutdown</a>();
   <span class="keywordflow">return</span> 0;

error:
   fprintf(stderr, <span class="stringliteral">&quot;error: Requires at least one Evas engine built and linked&quot;</span>
                   <span class="stringliteral">&quot; to ecore-evas for this example to run properly.\n&quot;</span>);
   <a class="code" href="group__Ecore__Evas__Group.html#gab1a47c09b475148c037c0a3d68644fa4" title="Shuts down the Ecore_Evas system.">ecore_evas_shutdown</a>();
   <span class="keywordflow">return</span> -1;
}
</pre></div> </div></div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
<hr size="1"/>
<center>
<small>Except as noted, this content - excluding the Code Examples - is licensed under <a href="http://creativecommons.org/licenses/by/3.0/legalcode" target="_blank">Creative Commons Attribution 3.0</a>
and all of the Code Examples contained herein are licensed under <a href="https://www.tizen.org/bsd-3-clause-license" target="_blank">BSD-3-Clause</a>.<br/>For details, see the <a href="https://www.tizen.org/content-license" target="_blank">Content License</a>.&nbsp;</small>
</center>
</body>
</html>
