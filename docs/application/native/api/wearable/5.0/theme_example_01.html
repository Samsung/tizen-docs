<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Tizen Native API: Theme - Using extensions</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen_html_stylesheet.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
</script>
<link rel="search" href="search-opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Tizen Native API"/>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Tizen Native API
   &#160;<span id="projectnumber">5.0</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>The&#160;Basics&#160;of&#160;Tizen&#160;Native&#160;API&#160;Reference</span></a></li>
      <li><a href="modules.html"><span>Native&#160;API&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.php" method="get">
              <img id="MSearchSelect" src="search/mag.png" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('theme_example_01.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Theme - Using extensions </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Using extensions is extremely easy, discarding the part where you have to write the theme for them.</p>
<p>In the following example we'll be creating two buttons, one to load or unload our extension theme and one to cycle around three possible styles, one of which we created.</p>
<p>After including our one and only header we'll jump to the callback for the buttons. First one takes care of loading or unloading our extension file, relative to the default theme set (thus the <code>NULL</code> in the functions first parameter). <div class="fragment"><pre class="fragment"><span class="preprocessor">#include &lt;Elementary.h&gt;</span>
<span class="keyword">static</span> <span class="keywordtype">void</span>
btn_extension_click_cb(<span class="keywordtype">void</span> *data EINA_UNUSED, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *btn, <span class="keywordtype">void</span> *ev EINA_UNUSED)
{
   <span class="keyword">const</span> <span class="keywordtype">char</span> *lbl = elm_object_text_get(btn);

   <span class="keywordflow">if</span> (!strncmp(lbl, <span class="stringliteral">&quot;Load&quot;</span>, 4))
     {
        <a class="code" href="group__Elm__Theme.html#ga71d7575c05248a5c6d7ae3b525e964cc">elm_theme_extension_add</a>(NULL, edj_path);
        elm_object_text_set(btn, <span class="stringliteral">&quot;Unload extension&quot;</span>);
     }
   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncmp(lbl, <span class="stringliteral">&quot;Unload&quot;</span>, 6))
     {
        <a class="code" href="group__Elm__Theme.html#ga474684d4227bc309a1ce314ff16c70a7">elm_theme_extension_del</a>(NULL, edj_path);
        elm_object_text_set(btn, <span class="stringliteral">&quot;Load extension&quot;</span>);
     }
}
</pre></div></p>
<p>The second button, as we said before, will just switch around different styles. In this case we have three of them. The first one is our custom style, named after something very unlikely to find in the default theme. The other two styles are the standard and one more, anchor, which exists in the default and is similar to the default, except the button vanishes when the mouse is not over it. <div class="fragment"><pre class="fragment"><span class="keyword">static</span> <span class="keywordtype">void</span>
btn_style_click_cb(<span class="keywordtype">void</span> *data EINA_UNUSED, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *btn, <span class="keywordtype">void</span> *ev EINA_UNUSED)
{
   <span class="keyword">const</span> <span class="keywordtype">char</span> *styles[] = {
        <span class="stringliteral">&quot;chucknorris&quot;</span>,
        <span class="stringliteral">&quot;default&quot;</span>,
        <span class="stringliteral">&quot;anchor&quot;</span>
   };
   <span class="keyword">static</span> <span class="keywordtype">int</span> sel_style = 0;

   sel_style = (sel_style + 1) % 3;
   <a class="code" href="group__Elm__Styles.html#ga7fc2d1f9ba723470da7a05799c49f7fe">elm_object_style_set</a>(btn, styles[sel_style]);
}
</pre></div></p>
<p>So what happens if the style switches to our custom one when the extension is loaded? Elementary falls back to the default for the widget.</p>
<p>And the main function, simply enough, will create the window, set the buttons and their callbacks, and just to begin with our button styled we're also loading our extension at the beginning. <div class="fragment"><pre class="fragment">EAPI_MAIN <span class="keywordtype">int</span>
elm_main(<span class="keywordtype">int</span> argc EINA_UNUSED, <span class="keywordtype">char</span> **argv EINA_UNUSED)
{
   <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *win, *box, *btn;

   <a class="code" href="group__Elm__General.html#ga7a05f37fd3a019da5e26c5fc91fcd937">elm_policy_set</a>(ELM_POLICY_QUIT, ELM_POLICY_QUIT_LAST_WINDOW_CLOSED);

<span class="preprocessor">#ifdef PACKAGE_DATA_DIR</span>
<span class="preprocessor"></span>   <a class="code" href="group__Elm__App.html#ga4e875d27efb02b4c425619957c0ae7c7">elm_app_compile_data_dir_set</a>(PACKAGE_DATA_DIR);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>   <span class="keywordflow">if</span> (<a class="code" href="group__Ecore__File__Group.html#ga34d2aa9536a10e43944794f756a1f964" title="Checks if the given file exists.">ecore_file_exists</a>(<span class="stringliteral">&quot;./theme_example.edj&quot;</span>))
     {
        strcpy(edj_path, <span class="stringliteral">&quot;./theme_example.edj&quot;</span>);
     }
   <span class="keywordflow">else</span>
     {
        <a class="code" href="group__Elm__App.html#ga0cefb59efb95841232561d67e34d9909">elm_app_info_set</a>(elm_main, <span class="stringliteral">&quot;elementary&quot;</span>, <span class="stringliteral">&quot;examples/theme_example.edj&quot;</span>);
        snprintf(edj_path, <span class="keyword">sizeof</span>(edj_path), <span class="stringliteral">&quot;%s/examples/theme_example.edj&quot;</span>,
                 <a class="code" href="group__Elm__App.html#ga92a09dbf88cc1ca3eab51c51dea589d0">elm_app_data_dir_get</a>());
     }
   <a class="code" href="group__Elm__Theme.html#ga71d7575c05248a5c6d7ae3b525e964cc">elm_theme_extension_add</a>(NULL, edj_path);

   win = <a class="code" href="group__Elm__Win.html#gac75d7752662fab73d6420706ce5be996">elm_win_util_standard_add</a>(<span class="stringliteral">&quot;theme&quot;</span>, <span class="stringliteral">&quot;Theme example&quot;</span>);
   <a class="code" href="group__Elm__Win.html#ga9a16a2f8c9fd5b6e9203ed9dcb53ea8b" title="Sets the window&#39;s autodel state.">elm_win_autodel_set</a>(win, <a class="code" href="group__Eina__Types__Group.html#ga05c12dacc8b4058994df842b41be85fc">EINA_TRUE</a>);

   box = <a class="code" href="group__Elm__Box.html#ga3d0998b60ada633bacfa8869a921cfd7">elm_box_add</a>(win);
   evas_object_size_hint_weight_set(box, EVAS_HINT_EXPAND, EVAS_HINT_EXPAND);
   <a class="code" href="group__Elm__Win.html#ga505d6bd217e5ee01e82b548ec35986eb" title="Adds subobj as a resize object of window obj.">elm_win_resize_object_add</a>(win, box);
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(box);

   btn = <a class="code" href="group__Elm__Button.html#ga0021b9d86d822367035843ed18bc6ea9">elm_button_add</a>(win);
   elm_object_text_set(btn, <span class="stringliteral">&quot;Unload extension&quot;</span>);
   <a class="code" href="group__Elm__Box.html#ga66a10dd861578521af2ab7b8c2ca65c5" title="Add an object at the end of the pack list.">elm_box_pack_end</a>(box, btn);
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(btn);
   <a class="code" href="group__Evas__Canvas.html#ga18a8b179f94d21b2b09e19db11741061">evas_object_smart_callback_add</a>(btn, <span class="stringliteral">&quot;clicked&quot;</span>, btn_extension_click_cb, NULL);

   btn = <a class="code" href="group__Elm__Button.html#ga0021b9d86d822367035843ed18bc6ea9">elm_button_add</a>(win);
   elm_object_text_set(btn, <span class="stringliteral">&quot;Switch style&quot;</span>);
   <a class="code" href="group__Elm__Styles.html#ga7fc2d1f9ba723470da7a05799c49f7fe">elm_object_style_set</a>(btn, <span class="stringliteral">&quot;chucknorris&quot;</span>);
   <a class="code" href="group__Elm__Box.html#ga66a10dd861578521af2ab7b8c2ca65c5" title="Add an object at the end of the pack list.">elm_box_pack_end</a>(box, btn);
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(btn);
   <a class="code" href="group__Evas__Canvas.html#ga18a8b179f94d21b2b09e19db11741061">evas_object_smart_callback_add</a>(btn, <span class="stringliteral">&quot;clicked&quot;</span>, btn_style_click_cb, NULL);

   evas_object_resize(win, 300, 320);
   <a class="code" href="group__Evas__Object__Group__Basic.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(win);

   <a class="code" href="group__Elm__General.html#gadf2553f83e6b0b9c7fbe054019a664a1">elm_run</a>();

   <span class="keywordflow">return</span> 0;
}
<a class="code" href="group__Elm__General.html#ga50fe52d513f7e89c9c770afd76de7ad9">ELM_MAIN</a>()
</pre></div></p>
<p>In this case we wanted to easily remove extensions, but all adding an extension does is tell Elementary where else it should look for themes when it can't find them in the default theme. Another way to do this is to set the theme search order using <a class="el" href="group__Elm__Theme.html#ga3b3e6f54149ccdc8dfec774e05e8bf1c">elm_theme_set()</a>, but this requires that the developer is careful not to override any user configuration. That can be helped by adding our theme to the end of whatever is already set, like in the following snippet. </p>
<div class="fragment"><pre class="fragment"> <span class="keywordtype">char</span> buf[4096];
 snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%s:./theme_example.edj&quot;</span>, elme_theme_get(NULL);
 <a class="code" href="group__Elm__Theme.html#ga3b3e6f54149ccdc8dfec774e05e8bf1c">elm_theme_set</a>(NULL, buf);
</pre></div><p>If we were using overlays instead of extensions, the same thing applies, but the custom theme must be added to the front of the search path.</p>
<p>In the end, we should be looking at something like this:</p>
<div class="image">
<img src="screenshots/theme_example_01.png" alt="theme_example_01.png"/>
</div>
 <p>That's all. Boringly simple, and the full code in one piece can be found <a class="el" href="theme_example_01_8c-example.html">here</a>.</p>
<p>And the code for our extension is <a class="el" href="theme_example_8edc-example.html">here</a>. </p>
</div></div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
<hr size="1"/>
<center>
<small>Except as noted, this content - excluding the Code Examples - is licensed under <a href="http://creativecommons.org/licenses/by/3.0/legalcode" target="_blank">Creative Commons Attribution 3.0</a>
and all of the Code Examples contained herein are licensed under <a href="https://www.tizen.org/bsd-3-clause-license" target="_blank">BSD-3-Clause</a>.<br/>For details, see the <a href="https://www.tizen.org/content-license" target="_blank">Content License</a>.&nbsp;</small>
</center>
</body>
</html>
