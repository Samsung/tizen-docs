<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Tizen Native API: lua_script.edc</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen_html_stylesheet.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Tizen Native API
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>The&#160;Basics&#160;of&#160;Tizen&#160;Native&#160;API&#160;Reference</span></a></li>
      <li><a href="modules.html"><span>Native&#160;API&#160;Reference</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">lua_script.edc</div>  </div>
</div><!--header-->
<div class="contents">
<p>This example shows the usage of lua scripting to create and animate some objects in the canvas.</p>
<div class="fragment"><pre class="fragment">color_classes {
    color_class { name: <span class="stringliteral">&quot;test_colour&quot;</span>; color: 255 255 255 255; }
}

fonts {
   font: <span class="stringliteral">&quot;Vera.ttf&quot;</span> <span class="stringliteral">&quot;default&quot;</span>;
}

images {
    image: <span class="stringliteral">&quot;bubble.png&quot;</span> COMP;
    image: <span class="stringliteral">&quot;test.png&quot;</span> COMP;
}

collections {
   group {
      name: <span class="stringliteral">&quot;main&quot;</span>;
      lua_script_only: 1;
      lua_script {
         --<span class="comment">// stick object private/local vars here</span>
         local D;
         local count = 0;
         local fndata = 99;
         local text_geom;

         --<span class="comment">// Functions to print tables.</span>
         local print_table, print_table_start;

         <span class="keyword">function</span> print_table_start(table, space, name)
            print(space .. name .. &quot;: &quot;);
            print(space .. &quot;{<span class="stringliteral">&quot;);</span>
<span class="stringliteral">            print_table(table, space .. &quot;</span>  <span class="stringliteral">&quot;);</span>
<span class="stringliteral">            print(space .. &quot;</span>}<span class="stringliteral">&quot;);</span>
<span class="stringliteral">         end</span>
<span class="stringliteral"></span>
<span class="stringliteral">         function print_table(table, space)</span>
<span class="stringliteral">            for k, v in pairs(table) do </span>
<span class="stringliteral">               if type(v) == &quot;</span>table<span class="stringliteral">&quot; then</span>
<span class="stringliteral">                  print_table_start(v, space, k);</span>
<span class="stringliteral">               elseif type(v) == &quot;</span><span class="keywordtype">string</span><span class="stringliteral">&quot; then</span>
<span class="stringliteral">                  print(space .. k .. &#39;: &quot;</span><span class="stringliteral">&#39; .. v .. &#39;</span><span class="stringliteral">&quot;;&#39;)</span>
<span class="stringliteral">               else</span>
<span class="stringliteral">                  print(space .. k .. &quot;</span>: <span class="stringliteral">&quot; .. v .. &quot;</span>;<span class="stringliteral">&quot;)</span>
<span class="stringliteral">               end</span>
<span class="stringliteral">            end</span>
<span class="stringliteral">         end</span>
<span class="stringliteral"></span>
<span class="stringliteral">         local function mycb3 (v)</span>
<span class="stringliteral">            print(&quot;</span>lua::callback transition <span class="stringliteral">&quot; .. D.val .. &quot;</span> v: <span class="stringliteral">&quot; .. v);</span>
<span class="stringliteral">            d = {};</span>
<span class="stringliteral">            d = edje.size(d);</span>
<span class="stringliteral">            print(&quot;</span>lua::objsize= <span class="stringliteral">&quot; .. d.w .. &quot;</span> , <span class="stringliteral">&quot; .. d.h);</span>
<span class="stringliteral">            sz = {w=v * 80, h=v * 40};</span>
<span class="stringliteral">            D.rect:geom(((d.w / 2) * math.sin(v * 2 * math.pi)) + ((d.w - sz.w) / 2),</span>
<span class="stringliteral">                        ((d.h / 2) * math.cos(v * 2 * math.pi)) + ((d.h - sz.h) / 2),</span>
<span class="stringliteral">                        sz.w, sz.h);</span>
<span class="stringliteral">            D.rect:color(255, 128, v * 255, 255);</span>
<span class="stringliteral">            d = D.rect:move(d);</span>
<span class="stringliteral">            print(&quot;</span>lua::pos= <span class="stringliteral">&quot; .. d.x .. &quot;</span> , <span class="stringliteral">&quot; .. d.y);</span>
<span class="stringliteral"> </span>
<span class="stringliteral">            r = D.rect:above();</span>
<span class="stringliteral">            if (r ~= nil) then</span>
<span class="stringliteral">               print(&quot;</span>lua::rcol<span class="stringliteral">&quot;);</span>
<span class="stringliteral">               r:color(20, v * 255, 60, 255);</span>
<span class="stringliteral">            else</span>
<span class="stringliteral">               print(&quot;</span>lua::r none!!!!!!!!!!!!!!1<span class="stringliteral">&quot;);</span>
<span class="stringliteral">            end</span>
<span class="stringliteral">            d = edje.size();</span>
<span class="stringliteral">            D.clip:geom(10, 10, d.w - 20, d.h - 20);</span>
<span class="stringliteral">            c = D.clip:clipees();</span>
<span class="stringliteral">            for i=1,#c,1 do</span>
<span class="stringliteral">               d = c[i]:geom();</span>
<span class="stringliteral">               print(&quot;</span>lua::<span class="stringliteral">&quot; .. i .. &quot;</span> geom = <span class="stringliteral">&quot; .. d.x .. &quot;</span>,<span class="stringliteral">&quot; .. d.y .. &quot;</span> <span class="stringliteral">&quot; .. d.w .. &quot;</span>x<span class="stringliteral">&quot; .. d.h);</span>
<span class="stringliteral">            end</span>
<span class="stringliteral">            return true;  --// repeat the timer</span>
<span class="stringliteral">         end</span>
<span class="stringliteral"> </span>
<span class="stringliteral">         local function mycb2 ()</span>
<span class="stringliteral">            print(&quot;</span>lua::callback animator <span class="stringliteral">&quot; .. count .. &quot;</span> seconds: <span class="stringliteral">&quot; .. edje.seconds() .. &quot;</span> looptime: <span class="stringliteral">&quot; .. edje.looptime());</span>
<span class="stringliteral">            edje.color_class(&quot;</span>test_colour<span class="stringliteral">&quot;, 255, (count * 10) % 255, 255, 255);</span>
<span class="stringliteral">            edje.text_class(&quot;</span>test_text_class<span class="stringliteral">&quot;, &quot;</span>Sans:style=Bold<span class="stringliteral">&quot;, ((count * 3) % 100) + 8);</span>
<span class="stringliteral">            if (5 &gt; (count % 10)) then</span>
<span class="stringliteral">               D.text:font(&quot;</span><span class="keywordflow">default</span><span class="stringliteral">&quot;, 32);</span>
<span class="stringliteral">            else</span>
<span class="stringliteral">               D.text:font(&quot;</span>Sans:style=Bold<span class="stringliteral">&quot;, 32);</span>
<span class="stringliteral">            end</span>
<span class="stringliteral">            edje_geom = edje.geom();</span>
<span class="stringliteral">            text_geom = D.text:geom();</span>
<span class="stringliteral">            D.text:move((edje_geom.w - text_geom.w) / 2, (edje_geom.h - text_geom.h) / 8);</span>
<span class="stringliteral">            return true;  --// repeat the timer</span>
<span class="stringliteral">         end</span>
<span class="stringliteral"> </span>
<span class="stringliteral">         local function mycb ()</span>
<span class="stringliteral">            print(&quot;</span>lua::callback timer <span class="stringliteral">&quot; .. count .. &quot;</span> fndata = <span class="stringliteral">&quot; .. fndata);</span>
<span class="stringliteral">            count = count + 1; --// keep count of calls - object data</span>
<span class="stringliteral">            fndata = fndata + 3; --// play with object vars to see if they persist</span>
<span class="stringliteral">            D.tim = edje.timer(0.25, mycb); --// inside cb add new timer</span>
<span class="stringliteral">            return false; --// cease repeating the timer</span>
<span class="stringliteral">         end</span>
<span class="stringliteral"> </span>
<span class="stringliteral">         --// init object here</span>
<span class="stringliteral">         D = {}; --// data is empty table to start</span>
<span class="stringliteral">         D.val = math.random(); --// start with some random value so</span>
<span class="stringliteral">         fndata = fndata + D.val; --// func data start point</span>
<span class="stringliteral">         print(&quot;</span>lua::init ... <span class="stringliteral">&quot; .. D.val);</span>
<span class="stringliteral">         edje.echo(&quot;</span>lua::echo(<span class="stringliteral">&#39;hello world&#39;</span>)<span class="stringliteral">&quot;);</span>
<span class="stringliteral"></span>
<span class="stringliteral">         --// How to check the edje version.</span>
<span class="stringliteral">         version = edje.version();</span>
<span class="stringliteral">         print(&quot;</span>The edje version number is <span class="stringliteral">&quot; .. version.major .. &quot;</span>.<span class="stringliteral">&quot; .. version.minor);</span>
<span class="stringliteral"></span>
<span class="stringliteral">         --// actually add the timer to call mycb in 1.23 sec</span>
<span class="stringliteral">         D.tim = edje.timer(1.23, mycb);</span>
<span class="stringliteral">         D.tra = edje.transition(5.0, mycb3);</span>
<span class="stringliteral">         D.ani = edje.animator(mycb2);</span>
<span class="stringliteral">         edje_geom = edje.geom();</span>
<span class="stringliteral"> </span>
<span class="stringliteral">         if (edje.spanky) then edje.spanky(); end</span>
<span class="stringliteral"></span>
<span class="stringliteral">         local date = edje.date();</span>
<span class="stringliteral">         print(&quot;</span>lua:: date: <span class="stringliteral">&quot; ..</span>
<span class="stringliteral">            date.year .. &quot;</span>|<span class="stringliteral">&quot; ..</span>
<span class="stringliteral">            date.month .. &quot;</span>|<span class="stringliteral">&quot; ..</span>
<span class="stringliteral">            date.day .. &quot;</span>|<span class="stringliteral">&quot; ..</span>
<span class="stringliteral">            date.yearday .. &quot;</span>|<span class="stringliteral">&quot; ..</span>
<span class="stringliteral">            date.weekday .. &quot;</span>|<span class="stringliteral">&quot; ..</span>
<span class="stringliteral">            date.hour .. &quot;</span>|<span class="stringliteral">&quot; ..</span>
<span class="stringliteral">            date.min .. &quot;</span>|<span class="stringliteral">&quot; ..</span>
<span class="stringliteral">            date.sec</span>
<span class="stringliteral">         );</span>
<span class="stringliteral"></span>
<span class="stringliteral">         --// send some random edje message</span>
<span class="stringliteral">         edje.messagesend(7, &quot;</span>none<span class="stringliteral">&quot;      );</span>
<span class="stringliteral">         edje.messagesend(7, &quot;</span>sig<span class="stringliteral">&quot;,      &quot;</span>signal<span class="stringliteral">&quot;, &quot;</span>source<span class="stringliteral">&quot;);</span>
<span class="stringliteral">         edje.messagesend(7, &quot;</span>str<span class="stringliteral">&quot;,      &quot;</span>hello world<span class="stringliteral">&quot;);</span>
<span class="stringliteral">         edje.messagesend(7, &quot;</span><span class="keywordtype">int</span><span class="stringliteral">&quot;,      987);</span>
<span class="stringliteral">         edje.messagesend(7, &quot;</span><span class="keywordtype">float</span><span class="stringliteral">&quot;,    987.321);</span>
<span class="stringliteral">         edje.messagesend(7, &quot;</span>strset<span class="stringliteral">&quot;,   {&quot;</span>hello<span class="stringliteral">&quot;, &quot;</span>there<span class="stringliteral">&quot;, &quot;</span>world<span class="stringliteral">&quot;});</span>
<span class="stringliteral">         edje.messagesend(7, &quot;</span>intset<span class="stringliteral">&quot;,   {1, 2, 3});</span>
<span class="stringliteral">         edje.messagesend(7, &quot;</span>floatset<span class="stringliteral">&quot;, {1.1, 2.2, 3.3});</span>
<span class="stringliteral">         edje.messagesend(7, &quot;</span>strint<span class="stringliteral">&quot;,   &quot;</span>hello world<span class="stringliteral">&quot;, 7);</span>
<span class="stringliteral">         edje.messagesend(7, &quot;</span>strfloat<span class="stringliteral">&quot;, &quot;</span>hello world<span class="stringliteral">&quot;, 7.654);</span>
<span class="stringliteral">         edje.messagesend(7, &quot;</span>strintset<span class="stringliteral">&quot;,&quot;</span>hello world<span class="stringliteral">&quot;, {1, 2, 3});</span>
<span class="stringliteral"></span>
<span class="stringliteral">         D.edje = edje.edje();</span>
<span class="stringliteral">         D.edje:file(&quot;</span>plain/edje/group<span class="stringliteral">&quot;);</span>
<span class="stringliteral">         D.edje:show();</span>
<span class="stringliteral">                  </span>
<span class="stringliteral">         D.rect = edje.rect();</span>
<span class="stringliteral">         D.rect:geom  (5, 10, 50, 30);</span>
<span class="stringliteral">         D.rect:color (255, 128, 60, 255);</span>
<span class="stringliteral">         D.rect:show  ();</span>
<span class="stringliteral">                  </span>
<span class="stringliteral">         D.rect2 = edje.rect();</span>
<span class="stringliteral">         D.rect2:geom  (50, 50, 50, 50);</span>
<span class="stringliteral">         D.rect2:color (20, 30, 60, 120);</span>
<span class="stringliteral">         D.rect2:show  ();</span>
<span class="stringliteral"></span>
<span class="stringliteral">         D.clip = edje.rect();</span>
<span class="stringliteral">         D.clip:geom  (10, 10, 150, 150);</span>
<span class="stringliteral">         D.clip:color (200, 200, 50, 200);</span>
<span class="stringliteral">         D.clip:show  ();</span>
<span class="stringliteral"> </span>
<span class="stringliteral">         D.rect2:clip(D.clip);</span>
<span class="stringliteral">         D.rect:clip(D.clip);</span>
<span class="stringliteral"></span>
<span class="stringliteral">         D.text = edje.text();</span>
<span class="stringliteral">         D.text:geom  (50, 5, 150, 50);</span>
<span class="stringliteral">         D.text:color (255, 0, 0, 255);</span>
<span class="stringliteral">         D.text:font(&quot;</span>Sans:style=Bold<span class="stringliteral">&quot;, 32);</span>
<span class="stringliteral">         D.text:text(&quot;</span>Lua rocks!<span class="stringliteral">&quot;);</span>
<span class="stringliteral">         text_geom = D.text:geom();</span>
<span class="stringliteral">         print(D.text:text());</span>
<span class="stringliteral">         D.text:show();</span>
<span class="stringliteral"></span>
<span class="stringliteral">    --// Put a few bogus API calls here to test the bogus API protection,</span>
<span class="stringliteral">    --// If the bogus API protection works, these should get ignored, but everything else runs smoothly.</span>
<span class="stringliteral">    --// Otherwise, the map is not done, the bubbles are not done, but the timers keep runinng.</span>
<span class="stringliteral">         bogus.failme(1, &quot;</span>two<span class="stringliteral">&quot;, D.rect);</span>
<span class="stringliteral">         temp = bogus.failme2();</span>
<span class="stringliteral">         D.text.bogus();</span>
<span class="stringliteral">         edje.bogus2();</span>
<span class="stringliteral"></span>
<span class="stringliteral">         --// Fun with maps!</span>
<span class="stringliteral">         D.map = edje.map(4);  --// 4 is the only supported map size at the moment.</span>
<span class="stringliteral">         --// These all do the same thing.</span>
<span class="stringliteral">         --// Note, lua likes to start at 1, C (and thus evas) at 0.  I choose to agree with C.</span>
<span class="stringliteral">         D.map:coord(0, 50, 50, 0);</span>
<span class="stringliteral">         D.map:coord(1, 100, 50, 0);</span>
<span class="stringliteral">         D.map:coord(2, 100, 100, 0);</span>
<span class="stringliteral">         D.map:coord(3, 50, 100, 0);</span>
<span class="stringliteral">         D.map:populate(50, 50, 50, 50, 0);</span>
<span class="stringliteral">         D.map:populate(D.rect2, 0);</span>
<span class="stringliteral">         D.map:populate(D.rect2);</span>
<span class="stringliteral"></span>
<span class="stringliteral">         --// print the results</span>
<span class="stringliteral">         D.coord = D.map:coord(0);</span>
<span class="stringliteral">         print(&quot;</span>lua::map coords <span class="keywordflow">for</span> point 0 x=<span class="stringliteral">&quot; .. D.coord.x .. &quot;</span> y=<span class="stringliteral">&quot; .. D.coord.y .. &quot;</span> z=<span class="stringliteral">&quot; .. D.coord.z);</span>
<span class="stringliteral">         D.coord = D.map:coord(1);</span>
<span class="stringliteral">         print(&quot;</span>lua::map coords <span class="keywordflow">for</span> point 1 x=<span class="stringliteral">&quot; .. D.coord.x .. &quot;</span> y=<span class="stringliteral">&quot; .. D.coord.y .. &quot;</span> z=<span class="stringliteral">&quot; .. D.coord.z);</span>
<span class="stringliteral">         D.coord = D.map:coord(2);</span>
<span class="stringliteral">         print(&quot;</span>lua::map coords <span class="keywordflow">for</span> point 2 x=<span class="stringliteral">&quot; .. D.coord.x .. &quot;</span> y=<span class="stringliteral">&quot; .. D.coord.y .. &quot;</span> z=<span class="stringliteral">&quot; .. D.coord.z);</span>
<span class="stringliteral">         D.coord = D.map:coord(3);</span>
<span class="stringliteral">         print(&quot;</span>lua::map coords <span class="keywordflow">for</span> point 3 x=<span class="stringliteral">&quot; .. D.coord.x .. &quot;</span> y=<span class="stringliteral">&quot; .. D.coord.y .. &quot;</span> z=<span class="stringliteral">&quot; .. D.coord.z);</span>
<span class="stringliteral"></span>
<span class="stringliteral">         D.map:smooth(false);</span>
<span class="stringliteral">         D.map:alpha(true);</span>
<span class="stringliteral"></span>
<span class="stringliteral">         if (D.map:alpha()) then</span>
<span class="stringliteral">            print(&quot;</span>lua::map is alpha<span class="stringliteral">&quot;);</span>
<span class="stringliteral">         end</span>
<span class="stringliteral"></span>
<span class="stringliteral">         if (D.map:smooth()) then</span>
<span class="stringliteral">            print(&quot;</span>lua::map is smooooth<span class="stringliteral">&quot;);</span>
<span class="stringliteral">         end</span>
<span class="stringliteral"></span>
<span class="stringliteral">         if (D.map:clockwise()) then</span>
<span class="stringliteral">            print(&quot;</span>lua::map is clockwise<span class="stringliteral">&quot;);</span>
<span class="stringliteral">         end</span>
<span class="stringliteral"></span>
<span class="stringliteral">         D.map:color(255, 255, 255, 255); // set all points to this colour.</span>
<span class="stringliteral">         D.map:color(1, 255, 0, 255, 255);  // set just one point to this colour.</span>
<span class="stringliteral"></span>
<span class="stringliteral">         D.map:lighting(75, 75, 10, 255, 255, 255, 0, 255, 0);  // Ambient light and a 3D light source.</span>
<span class="stringliteral"></span>
<span class="stringliteral">         --// Toss it around.</span>
<span class="stringliteral">         D.map:rotate(45.0, 75, 75);</span>
<span class="stringliteral">         D.map:zoom(1.5, 1.5, 75, 75);</span>
<span class="stringliteral">         D.map:rotate3d(10.0, 20.0, 30.0, 75, 75, 0);</span>
<span class="stringliteral">         D.map:perspective(200, 200, 0, 20);</span>
<span class="stringliteral"></span>
<span class="stringliteral">         --// For image UV mapping.</span>
<span class="stringliteral">         D.map:uv(0, 0.0, 0.0);</span>
<span class="stringliteral">         D.map:uv(1, 50.0, 0.0);</span>
<span class="stringliteral">         D.map:uv(2, 50.0, 50.0);</span>
<span class="stringliteral">         D.map:uv(3, 0.0, 50.0);</span>
<span class="stringliteral"></span>
<span class="stringliteral">         --// Actually apply the resulting transformations.</span>
<span class="stringliteral">         D.rect2:map(D.map);</span>
<span class="stringliteral">         D.rect2:map_enable(true);</span>
<span class="stringliteral">         if (D.rect2:map_enable()) then</span>
<span class="stringliteral">            print(&quot;</span>lua::map enabled<span class="stringliteral">&quot;);</span>
<span class="stringliteral">         end</span>
<span class="stringliteral"></span>
<span class="stringliteral">         D.rect2:map_source(D.rect);  --// Don&#39;t think this is actually implemented in evas.</span>
<span class="stringliteral"></span>
<span class="stringliteral">--//         D.map:dup();</span>
<span class="stringliteral">--//         D.map:size();  --// perhaps overide the # operator?  For now it&#39;s only gonna return 4 anyway.</span>
<span class="stringliteral"></span>
<span class="stringliteral">         --// example of deleting something</span>
<span class="stringliteral">         --// D.tim:del();</span>
<span class="stringliteral"></span>
<span class="stringliteral">         --// test the color_class stuff</span>
<span class="stringliteral">         colour = edje.color_class(&quot;</span>test_colour<span class="stringliteral">&quot;);</span>
<span class="stringliteral">         print(&quot;</span>lua::color_class= <span class="stringliteral">&quot; .. colour.r .. &quot;</span>,<span class="stringliteral">&quot; .. colour.g .. &quot;</span>,<span class="stringliteral">&quot; .. colour.b .. &quot;</span>,<span class="stringliteral">&quot; .. colour.a);</span>
<span class="stringliteral">         colour = edje.color_class(&quot;</span>test_colour<span class="stringliteral">&quot;, 32, 64, 255, 128);</span>
<span class="stringliteral">         print(&quot;</span>lua::color_class= <span class="stringliteral">&quot; .. colour.r .. &quot;</span>,<span class="stringliteral">&quot; .. colour.g .. &quot;</span>,<span class="stringliteral">&quot; .. colour.b .. &quot;</span>,<span class="stringliteral">&quot; .. colour.a);</span>
<span class="stringliteral">         colour = edje.color_class(&quot;</span>test_colour<span class="stringliteral">&quot;, { r=255, g=0, b=255, a=255 });</span>
<span class="stringliteral">         print(&quot;</span>lua::color_class= <span class="stringliteral">&quot; .. colour.r .. &quot;</span>,<span class="stringliteral">&quot; .. colour.g .. &quot;</span>,<span class="stringliteral">&quot; .. colour.b .. &quot;</span>,<span class="stringliteral">&quot; .. colour.a);</span>
<span class="stringliteral">         text = edje.text_class(&quot;</span>test_text_class<span class="stringliteral">&quot;, &quot;</span>Sans:style=Bold<span class="stringliteral">&quot;, 8);</span>
<span class="stringliteral">         print(&quot;</span>lua::text_class= <span class="stringliteral">&quot; .. text.font .. &quot;</span> size <span class="stringliteral">&quot; .. text.size);</span>
<span class="stringliteral"> </span>
<span class="stringliteral">         --// Do something bad, just to see what happens.</span>
<span class="stringliteral">--//         edje.color_class(nil);</span>
<span class="stringliteral"> </span>
<span class="stringliteral">         --// shutdown func - generally empty or not there. everything garbage collected for you</span>
<span class="stringliteral">         function shutdown ()</span>
<span class="stringliteral">            print(&quot;</span>lua::shutdown ... <span class="stringliteral">&quot; .. D.val);</span>
<span class="stringliteral">         end</span>
<span class="stringliteral"></span>
<span class="stringliteral">         function show ()</span>
<span class="stringliteral">            print(&quot;</span>lua::show ... <span class="stringliteral">&quot; .. D.val);</span>
<span class="stringliteral">         end</span>
<span class="stringliteral"></span>
<span class="stringliteral">         function hide ()</span>
<span class="stringliteral">            print(&quot;</span>lua::hide ... <span class="stringliteral">&quot; .. D.val);</span>
<span class="stringliteral">         end</span>
<span class="stringliteral"></span>
<span class="stringliteral">         function move (x, y)</span>
<span class="stringliteral">            print(&quot;</span>lua::move x=<span class="stringliteral">&quot; .. x .. &quot;</span> x=<span class="stringliteral">&quot; .. y);</span>
<span class="stringliteral">            D.edje:move(0, 0);</span>
<span class="stringliteral">         end</span>
<span class="stringliteral"></span>
<span class="stringliteral">         function resize (w, h)</span>
<span class="stringliteral">            print(&quot;</span>lua::resize w=<span class="stringliteral">&quot; .. w .. &quot;</span> h=<span class="stringliteral">&quot; .. h);</span>
<span class="stringliteral">            D.text:move((w - text_geom.w) / 2, (h - text_geom.h) / 8);</span>
<span class="stringliteral">            D.edje:resize(w, h);</span>
<span class="stringliteral">         end</span>
<span class="stringliteral"></span>
<span class="stringliteral">         function message (id, type, ...)</span>
<span class="stringliteral">            print(&quot;</span>lua::message <span class="keywordtype">id</span>=<span class="stringliteral">&quot; .. id .. &quot;</span> type=<span class="stringliteral">&quot; .. type);</span>
<span class="stringliteral">            --// handle your message type here. check id + type then use the</span>
<span class="stringliteral">            --// vararg appropriately. they are the same as the params passed </span>
<span class="stringliteral">            --// to edje:messagesend() (if any are passed at all).  Any array</span>
<span class="stringliteral">            --// arguments are passed as a single table.</span>
<span class="stringliteral"></span>
<span class="stringliteral">            if (&quot;</span>none<span class="stringliteral">&quot; == type) then</span>
<span class="stringliteral">               print(&quot;</span>lua::message no args<span class="stringliteral">&quot;);</span>
<span class="stringliteral">            elseif (&quot;</span>strset<span class="stringliteral">&quot; == type) then</span>
<span class="stringliteral">               strs = ... ;</span>
<span class="stringliteral">               print_table_start(strs, &quot;</span><span class="stringliteral">&quot;, &quot;</span>lua::message strings<span class="stringliteral">&quot;);</span>
<span class="stringliteral">            elseif (&quot;</span>intset<span class="stringliteral">&quot; == type) then</span>
<span class="stringliteral">               ints = ... ;</span>
<span class="stringliteral">               print_table_start(ints, &quot;</span><span class="stringliteral">&quot;, &quot;</span>lua::message ints<span class="stringliteral">&quot;);</span>
<span class="stringliteral">            elseif (&quot;</span>floatset<span class="stringliteral">&quot; == type) then</span>
<span class="stringliteral">               floats = ... ;</span>
<span class="stringliteral">               print_table_start(floats, &quot;</span><span class="stringliteral">&quot;, &quot;</span>lua::message floats<span class="stringliteral">&quot;);</span>
<span class="stringliteral">            elseif (&quot;</span>strintset<span class="stringliteral">&quot; == type) then</span>
<span class="stringliteral">               str, ints = ... ;</span>
<span class="stringliteral">               print(&quot;</span>lua::message <span class="stringliteral">&quot; .. str);</span>
<span class="stringliteral">               print_table_start(ints, &quot;</span><span class="stringliteral">&quot;, &quot;</span>lua::message ints<span class="stringliteral">&quot;);</span>
<span class="stringliteral">            elseif (&quot;</span>strfloatset<span class="stringliteral">&quot; == type) then</span>
<span class="stringliteral">               str, floats = ... ;</span>
<span class="stringliteral">               print(&quot;</span>lua::message <span class="stringliteral">&quot; .. str);</span>
<span class="stringliteral">               print_table_start(floats, &quot;</span><span class="stringliteral">&quot;, &quot;</span>lua::message floats<span class="stringliteral">&quot;);</span>
<span class="stringliteral">            else</span>
<span class="stringliteral">               print(&quot;</span>lua::message <span class="stringliteral">&quot; .. ... );</span>
<span class="stringliteral">            end</span>
<span class="stringliteral">         end</span>
<span class="stringliteral"></span>
<span class="stringliteral">         function signal (sig, src)</span>
<span class="stringliteral">            print(&quot;</span>lua::signal sig= <span class="stringliteral">&quot; .. sig .. &quot;</span> src= <span class="stringliteral">&quot; .. src);</span>
<span class="stringliteral">         end</span>
<span class="stringliteral">      }</span>
<span class="stringliteral">   }</span>
<span class="stringliteral"></span>
<span class="stringliteral">   // The group name NEEDS a / in it, </span>
<span class="stringliteral">   // or the part below that tries to swallow it won&#39;t work.</span>
<span class="stringliteral">   // Leaving just the lua part visible.</span>
<span class="stringliteral">   group {</span>
<span class="stringliteral">      name: &quot;</span>bubbles/lua<span class="stringliteral">&quot;;</span>
<span class="stringliteral">      lua_script_only: 1;</span>
<span class="stringliteral">      lua_script {</span>
<span class="stringliteral">         local bubbles = { };</span>
<span class="stringliteral">         local bubbleCols = 8;</span>
<span class="stringliteral">         local bubbleRows = 6;</span>
<span class="stringliteral"></span>
<span class="stringliteral">         for i = 1, bubbleRows do</span>
<span class="stringliteral">            row = { };</span>
<span class="stringliteral">            for j = 1, bubbleCols do</span>
<span class="stringliteral">               image = edje.image();</span>
<span class="stringliteral">               image:image(&quot;</span>bubble.png<span class="stringliteral">&quot;);</span>
<span class="stringliteral">               image:show();</span>
<span class="stringliteral">               table.insert(row, image);</span>
<span class="stringliteral">            end</span>
<span class="stringliteral">            table.insert(bubbles, row);</span>
<span class="stringliteral">         end</span>
<span class="stringliteral"></span>
<span class="stringliteral">         function resize (w, h)</span>
<span class="stringliteral">            for i = 1, bubbleRows do</span>
<span class="stringliteral">               for j = 1, bubbleCols do</span>
<span class="stringliteral">                  w1 = w / bubbleCols;</span>
<span class="stringliteral">                  h1 = h / bubbleRows;</span>
<span class="stringliteral">                  bubbles[i][j]:geom((j - 1) * w1, (i - 1) * h1, w1, h1);</span>
<span class="stringliteral">                  if ((1 == i) or (1 == j) or (bubbleRows == i) or (bubbleCols == j)) then</span>
<span class="stringliteral">                     bubbles[i][j]:color(0, 255, 0, 200);</span>
<span class="stringliteral">                  else</span>
<span class="stringliteral">                     bubbles[i][j]:color(math.random(200) + 55, 0, math.random(255) + 55, 200);</span>
<span class="stringliteral">                  end</span>
<span class="stringliteral">               end</span>
<span class="stringliteral">            end</span>
<span class="stringliteral">         end</span>
<span class="stringliteral">      }</span>
<span class="stringliteral">   }</span>
<span class="stringliteral"></span>
<span class="stringliteral">   group {</span>
<span class="stringliteral">      name: &quot;</span>plain/edje/group<span class="stringliteral">&quot;;</span>
<span class="stringliteral">      parts {</span>
<span class="stringliteral">         part {</span>
<span class="stringliteral">            name: &quot;</span>background<span class="stringliteral">&quot;;</span>
<span class="stringliteral">            type: RECT;</span>
<span class="stringliteral">            mouse_events: 0;</span>
<span class="stringliteral">            description {</span>
<span class="stringliteral">               state: &quot;</span><span class="keywordflow">default</span><span class="stringliteral">&quot; 0.0;</span>
<span class="stringliteral">               color: 0 0 0 255;</span>
<span class="stringliteral">            }</span>
<span class="stringliteral">         }</span>
<span class="stringliteral"></span>
<span class="stringliteral">         // A lua group embedded in an edje group.</span>
<span class="stringliteral">         part {</span>
<span class="stringliteral">            name: &quot;</span>bubbles_lua<span class="stringliteral">&quot;;</span>
<span class="stringliteral">            type: GROUP;</span>
<span class="stringliteral">            source: &quot;</span>bubbles/lua<span class="stringliteral">&quot;;</span>
<span class="stringliteral">            mouse_events: 0;</span>
<span class="stringliteral">            description { state: &quot;</span><span class="keywordflow">default</span><span class="stringliteral">&quot; 0.0; }</span>
<span class="stringliteral">         }</span>
<span class="stringliteral"></span>
<span class="stringliteral">         part {</span>
<span class="stringliteral">            name: &quot;</span>background_image<span class="stringliteral">&quot;;</span>
<span class="stringliteral">            type: IMAGE;</span>
<span class="stringliteral">            mouse_events: 0;</span>
<span class="stringliteral">            description {</span>
<span class="stringliteral">               state: &quot;</span><span class="keywordflow">default</span><span class="stringliteral">&quot; 0.0;</span>
<span class="stringliteral">               aspect_preference: HORIZONTAL;</span>
<span class="stringliteral">               color_class: &quot;</span>test_colour<span class="stringliteral">&quot;;</span>
<span class="stringliteral">               image { normal: &quot;</span>test.png<span class="stringliteral">&quot;; }</span>
<span class="stringliteral">            }</span>
<span class="stringliteral">         }</span>
<span class="stringliteral"></span>
<span class="stringliteral">         part {</span>
<span class="stringliteral">            name: &quot;</span>some_text<span class="stringliteral">&quot;;</span>
<span class="stringliteral">            type: TEXT;</span>
<span class="stringliteral">            mouse_events: 0;</span>
<span class="stringliteral">            description {</span>
<span class="stringliteral">               state: &quot;</span><span class="keywordflow">default</span><span class="stringliteral">&quot; 0;</span>
<span class="stringliteral">               text</span>
<span class="stringliteral">               {</span>
<span class="stringliteral">                  text: &quot;</span>This is test text.<span class="stringliteral">&quot;;</span>
<span class="stringliteral">                  text_class: &quot;</span>test_text_class<span class="stringliteral">&quot;;</span>
<span class="stringliteral">               }</span>
<span class="stringliteral">            }</span>
<span class="stringliteral">         }</span>
<span class="stringliteral"></span>
<span class="stringliteral">      }</span>
<span class="stringliteral">   }</span>
<span class="stringliteral"></span>
<span class="stringliteral">}</span>
<span class="stringliteral"></span>
</pre></div> </div><!-- contents -->
</div><!-- contents -->
<hr size="1"/>
<center>
<small>Except as noted, this content - excluding the Code Examples - is licensed under <a href="http://creativecommons.org/licenses/by/3.0/legalcode" target="_blank">Creative Commons Attribution 3.0</a>
and all of the Code Examples contained herein are licensed under <a href="https://www.tizen.org/bsd-3-clause-license" target="_blank">BSD-3-Clause</a>.<br/>For details, see the <a href="https://www.tizen.org/content-license" target="_blank">Content License</a>.&nbsp;</small>
</center>
</body>
</html>
