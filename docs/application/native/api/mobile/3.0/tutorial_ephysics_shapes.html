<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Tizen Native API: EPhysics - Shapes</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen_html_stylesheet.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Tizen Native API
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>The&#160;Basics&#160;of&#160;Tizen&#160;Native&#160;API&#160;Reference</span></a></li>
      <li><a href="modules.html"><span>Native&#160;API&#160;Reference</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">EPhysics - Shapes </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The purpose of this example is to demonstrate the EPhysics Shapes usage - The code creates two EPhysics_Bodys using a custom shape.</p>
<div class="image">
<img src="shapes.png" alt="shapes.png"/>
</div>
 <p>For this example we'll have an EPhysics_World, and two basic EPhysics_Bodys.</p>
<p>The basic concepts like - defining an EPhysics_World, render geometry, physics limiting boundaries, add an EPhysics_Body, associate it to evas objects, change restitution, friction and impulse properties, were already covered in <a class="el" href="tutorial_ephysics_bouncing_ball.html">EPhysics - Bouncing Ball</a></p>
<h2><a class="anchor" id="add-shape"></a>
Adding a Shape</h2>
<p>Shapes are used to create bodies with shapes that differ from primitive ones, like box and circle.</p>
<p>A shape consists in a group of points, the vertices of the body to be created later with ephysics_body_shape_add(). You can also save and load it from a file.</p>
<p>We'll have to create a specific type of variable: EPhysics_Shape</p>
<p><div class="fragment"><pre class="fragment">_world_populate(Test_Data *test_data)
{
   EPhysics_Shape *pentagon_shape, *hexagon_shape;
   EPhysics_Body *pentagon_body, *hexagon_body;
   <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *pentagon, *hexagon;
</pre></div></p>
<p>First we add an image we want to add an EPhysics_Body to have a reference to after set the points (vertices).</p>
<p><div class="fragment"><pre class="fragment">   pentagon = <a class="code" href="group__Elm__Image.html#ga5d211c8af4f6e297a24fc4e8737c81a9">elm_image_add</a>(test_data-&gt;win);
   <a class="code" href="group__Elm__Image.html#gad1a96ede5f513042cef3c1dac4572f73">elm_image_file_set</a>(
      pentagon, PACKAGE_DATA_DIR <span class="stringliteral">&quot;/&quot;</span> EPHYSICS_TEST_THEME <span class="stringliteral">&quot;.edj&quot;</span>, <span class="stringliteral">&quot;pentagon&quot;</span>);
   <a class="code" href="group__Evas__Font__Group.html#ga02da8091bbac768b8e86c7b74b2a94f9">evas_object_move</a>(pentagon, WIDTH / 3, HEIGHT / 2 - 80);
   <a class="code" href="group__Evas__Font__Group.html#ga21e8604c0e4a93e469bff4bd069e82b5">evas_object_resize</a>(pentagon, 70, 68);
   <a class="code" href="group__Evas__Font__Group.html#ga9cbc13661584e49fb9d9cdab514a1eeb">evas_object_show</a>(pentagon);
</pre></div></p>
<p>Here we create a new shape, note that the returned shape initially doesn't has points set, so its requiered to set vertices.</p>
<p><div class="fragment"><pre class="fragment">   pentagon_shape = ephysics_shape_new();
</pre></div></p>
<p>Now we're setting the shape points (vertices) basing on the image that we added, two vertices form a link between them, an edge, so with some vertices is possible to create polygons, in this case a pentagon.</p>
<p><div class="fragment"><pre class="fragment">   ephysics_shape_point_add(pentagon_shape, -1, -9/33., -1);
   ephysics_shape_point_add(pentagon_shape, -1, -9/33., 1);
   ephysics_shape_point_add(pentagon_shape, 0, -1, -1);
   ephysics_shape_point_add(pentagon_shape, 0, -1, 1);
   ephysics_shape_point_add(pentagon_shape, 1, -9/33., -1);
   ephysics_shape_point_add(pentagon_shape, 1, -9/33., 1);
   ephysics_shape_point_add(pentagon_shape, -21/35., 1, -1);
   ephysics_shape_point_add(pentagon_shape, -21/35., 1, 1);
   ephysics_shape_point_add(pentagon_shape, 21/35., 1, -1);
   ephysics_shape_point_add(pentagon_shape, 21/35., 1, 1);
</pre></div></p>
<p>Here we create a new physics body using a custom shape. The center of mass will be the center of the shape. Its collision shape will be the convex shape that has all the points (and edges) we added to this shape before.</p>
<p><div class="fragment"><pre class="fragment">   pentagon_body = ephysics_body_shape_add(test_data-&gt;world, pentagon_shape);
   ephysics_body_evas_object_set(pentagon_body, pentagon, <a class="code" href="group__Eina__Types__Group.html#ga05c12dacc8b4058994df842b41be85fc">EINA_TRUE</a>);
   ephysics_body_restitution_set(pentagon_body, 1);
</pre></div></p>
<p>Here we just delete the custom shape (not the body) after used to create the wanted bodies, it's required to delete it. It won't be deleted automatically by ephysics at any point, even on shutdown.</p>
<p><div class="fragment"><pre class="fragment">   ephysics_shape_del(pentagon_shape);
</pre></div></p>
<p>In the example we add another shape with the same process we just used, but with different image and points.</p>
<p><div class="fragment"><pre class="fragment">   ephysics_shape_point_add(hexagon_shape, 0, 30, -10);
   ephysics_shape_point_add(hexagon_shape, 0, 30, 10);
   ephysics_shape_point_add(hexagon_shape, 18, 0, -10);
   ephysics_shape_point_add(hexagon_shape, 18, 0, 10);
   ephysics_shape_point_add(hexagon_shape, 52, 0, -10);
   ephysics_shape_point_add(hexagon_shape, 52, 0, 10);
   ephysics_shape_point_add(hexagon_shape, 70, 30, -10);
   ephysics_shape_point_add(hexagon_shape, 70, 30, 10);
   ephysics_shape_point_add(hexagon_shape, 52, 60, -10);
   ephysics_shape_point_add(hexagon_shape, 52, 60, 10);
   ephysics_shape_point_add(hexagon_shape, 18, 60, -10);
   ephysics_shape_point_add(hexagon_shape, 18, 60, 10);
</pre></div></p>
<p>Here we finish the example. The full source code can be found at <a class="el" href="test_shapes_c.html">test_shapes.c</a>. </p>
</div></div><!-- contents -->
<hr size="1"/>
<center>
<small>Except as noted, this content - excluding the Code Examples - is licensed under <a href="http://creativecommons.org/licenses/by/3.0/legalcode" target="_blank">Creative Commons Attribution 3.0</a>
and all of the Code Examples contained herein are licensed under <a href="https://www.tizen.org/bsd-3-clause-license" target="_blank">BSD-3-Clause</a>.<br/>For details, see the <a href="https://www.tizen.org/content-license" target="_blank">Content License</a>.&nbsp;</small>
</center>
</body>
</html>
