<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Tizen Native API: The Ecore Main Loop</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen_html_stylesheet.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Tizen Native API
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>The&#160;Basics&#160;of&#160;Tizen&#160;Native&#160;API&#160;Reference</span></a></li>
      <li><a href="modules.html"><span>Mobile&#160;Native&#160;API&#160;Reference</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">The Ecore Main Loop </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="Ecore_Main_Loop_Page_intro"></a>
What is Ecore?</h2>
<p>Ecore is a clean and tiny event loop library with many modules to do lots of convenient things for a programmer as well as to save time and effort. It's small and lean, designed to work from embedded systems all the way up to large and powerful multi-cpu workstations. The main loop has a number of primitives to be used with its main loop. It serializes all the primitives and allows for great responsiveness without the need for threads(or any other concurrency).</p>
<h3><a class="anchor" id="timers"></a>
Timers</h3>
<p>Timers serve two main purposes: doing something at a specified time and repeatedly doing something with a set interval. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__Ecore__Timer__Group.html" title="Ecore provides very flexible timer functionality.">Ecore Timer</a></dd></dl>
<h3><a class="anchor" id="pollers"></a>
Pollers</h3>
<p>Pollers allow for polling to be centralized into a single place. Therefore, alleviating the need for different parts of the program to wake up at different times to do polling, thereby making the code simpler and more efficient. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__Ecore__Poller__Group.html" title="Ecore poller provides infrastructure for the creation of pollers.">Ecore Poller</a></dd></dl>
<h3><a class="anchor" id="idler"></a>
Idlers</h3>
<p>There are three types of idlers: enterers, idlers(proper), and exiters, they are called respectively when the program is about to enter an idle state, when the program is idle, and when the program is leaving an idle state. Idler enterers are usually a good place to update the program state. Proper idlers are the appropriate place to do heavy computational tasks thereby using what would otherwise be wasted CPU cycles. Exiters are the perfect place to do anything that your program should do just before processing events(also timers, poolers, file descriptor handlers, and animators) </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__Ecore__Idle__Group.html" title="The idler functionality in Ecore allows for callbacks to be called when the program isn&#39;t handling ev...">Ecore Idle</a></dd></dl>
<h3><a class="anchor" id="fd_handler"></a>
File descriptor handlers</h3>
<p>File descriptor handlers allow you to monitor when there is data available to read on file descriptors, when writing is not blocked or when there is an error. Any valid file descriptor can be used with this API, regardless of whether it is obtained with an OS specific API or from ecore. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__Ecore__FD__Handler__Group.html" title="This group discusses functions that deal with file descriptor handlers.">Ecore File Descriptor Handling</a></dd></dl>
<h3><a class="anchor" id="animators"></a>
Animators</h3>
<p>Ecore provides a facility called animators, so named since the intended use is in animations, that facilitates knowing what percentage of a given interval has elapsed. This is perfect for performing animations, but is not limited to that use. It can, for example, also be used to create a progress bar. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__Ecore__Animator__Group.html" title="Ecore animators are a helper to simplify creating animations.">Ecore Animator</a></dd></dl>
<h3><a class="anchor" id="ev_handlers"></a>
Event handlers</h3>
<p>Event handlers are, arguably, the most important feature of the ecore main loop, they are what allows the programmer to easily handle user interaction. Events, however, are not the only things that the user does. Events can represent anything for which a type is created. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__Ecore__Event__Group.html" title="Ecore event are a helper to create events are being notified of events.">Ecore Event</a></dd></dl>
<p>All of these primitives are discussed in more detail in their respective pages that are linked above.</p>
<p>Here is a diagram of the main loop flow of a simple program:</p>
<div class="image">
<img src="prog_flow.png" alt="prog_flow.png"/>
</div>
 <h2><a class="anchor" id="Ecore_Main_Loop_Page_work"></a>
How does Ecore work?</h2>
<p>Ecore is very easy to learn and use. All the function calls are designed to be easy to remember, explicit in describing what they do, and heavily name-spaced. Ecore programs can start easily and are very simple.</p>
<p>For example:</p>
<p>This program is very simple and doesn't check for errors, but it does start up and begin a main loop that is waiting for events or timers to tick off. This program doesn't set up any, but now we can expand on this simple program a little more by adding some event handlers and timers.</p>
<p>In the previous example, we initialize our application and get the time at which our program has started so that we can calculate an offset. We set up a timer to tick off in <code>0.5</code> seconds, and since it returns <code>1</code>, it keeps ticking off every <code>0.5</code> seconds until it returns <code>0</code>, or is deleted by hand. An event handler is set up to call a function - exit_func(), whenever an event of type ECORE_EVENT_SIGNAL_EXIT is received (CTRL-C on the command line causes such an event to happen). If this event occurs it tells you what kind of exit signal is received, and asks the main loop to quit when it is finished by calling <a class="el" href="group__Ecore__Main__Loop__Group.html#ga95cf8e97dff0716433c2c5474d606a98" title="Quits the main loop once all the events currently on the queue have been processed.">ecore_main_loop_quit()</a>.</p>
<p>The handles returned by <a class="el" href="group__Ecore__Timer__Group.html#ga7b9cb9d24ecebfdbb957436e2e669402" title="Creates a timer to call the given function in the given period of time.">ecore_timer_add()</a> and <a class="el" href="group__Ecore__Event__Group.html#gae75b0b1b2c50e73b8e42afc628b00a62" title="Adds an event handler.">ecore_event_handler_add()</a> are only stored here as an example. If you don't need to address the timer or event handler again you don't need to store the result, so just call the function and don't assign the result to any variable.</p>
<p>This program looks slightly more complex than needed to do these simple things, but in principle, programs don't get any more complex. You add more event handlers for more events, you have more timers, BUT it all follows the same principles as shown in this example. </p>
</div></div><!-- contents -->
<hr size="1"/>
<center>
<small>Except as noted, this content - excluding the Code Examples - is licensed under <a href="http://creativecommons.org/licenses/by/3.0/legalcode" target="_blank">Creative Commons Attribution 3.0</a>
and all of the Code Examples contained herein are licensed under <a href="https://www.tizen.org/bsd-3-clause-license" target="_blank">BSD-3-Clause</a>.<br/>For details, see the <a href="https://www.tizen.org/content-license" target="_blank">Content License</a>.&nbsp;</small>
</center>
</body>
</html>
