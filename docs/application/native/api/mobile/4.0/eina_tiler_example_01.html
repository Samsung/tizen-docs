<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Tizen Native API: $title</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen_html_stylesheet.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
</script>
<link rel="search" href="search-opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Tizen Native API"/>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Tizen Native API
   &#160;<span id="projectnumber">4.0</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>The&#160;Basics&#160;of&#160;Tizen&#160;Native&#160;API&#160;Reference</span></a></li>
      <li><a href="modules.html"><span>Native&#160;API&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.php" method="get">
              <img id="MSearchSelect" src="search/mag.png" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('eina_tiler_example_01.html','');
</script>
<div id="doc-content">
<div class="contents">
<div class="textblock"><p>This is an example that illustrates how Eina_Tiler works for a given set of rectangles. The rectangles must be given in the command line in the form: &lt;width&gt;x&lt;height&gt;+&lt;x offset&gt;+&lt;y offset&gt; The example will show two panels, the first(input) will show the given rectangles(in different colors) and in the seconds(output) it will show the rectangles given by the tiler. The rectangles will be added one by one every two seconds. A lot of the example deals with actually painting the rectangles so we'll skip over quite a bit of code, but you can see all of it in <a class="el" href="eina_tiler_01_8c-example.html">eina_tiler_01.c</a>.</p>
<p>The first thing of note in our example is the creation of the tiler: <div class="fragment"><pre class="fragment">   tiler = <a class="code" href="group__Eina__Tiler__Group.html#gaec465d28aa8f533db01e41cbf27aa3c9" title="Creates a new tiler with w width and h height.">eina_tiler_new</a>(maxw, maxh);
</pre></div> </p>
<dl class="note"><dt><b>Note:</b></dt><dd><code>maxw</code> and <code>maxh</code> are calculated such that the tiler's size will fully encompass all given rectangles.</dd></dl>
<p>We'll now look at the function that actually adds rectangles to our tiler. It first checks if we added all rectangles already and if so stops right there:  <div class="fragment"><pre class="fragment"><span class="keyword">static</span> <a class="code" href="group__Eina__Types__Group.html#ga3fe0caf72e93b1bab1ca8ee3ccf3f226">Eina_Bool</a>
process_input(<span class="keywordtype">void</span> *data EINA_UNUSED)
{
   <a class="code" href="struct__Eina__Iterator.html">Eina_Iterator</a> *itr;
   <a class="code" href="group__Eina__Rectangle__Group.html#gad1f49db9be2cd747f458ebf4718b6228">Eina_Rectangle</a> r, *r1;
   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> out = 0;

   <span class="keywordflow">if</span> (input_idx == input_count)
     {
        add_text(<span class="stringliteral">&quot;Done. Close the window to exit&quot;</span>,
                 WINDOW_PAD, winh - WINDOW_PAD, winw - 2 * WINDOW_PAD);
        <span class="keywordflow">return</span> <a class="code" href="group__Eina__Types__Group.html#ga1feb115f8e9913e806e090d9bd5a7301">EINA_FALSE</a>;
     }
</pre></div></p>
<p>Our function then clears all rectangles given to us by tiler from the last execution. It does this because each rectangle we add may change everything about the output of eina_tiler: <div class="fragment"><pre class="fragment">
   output_rects_reset();
</pre></div></p>
<p>Next we get another rectangle, print it and show it in the input panel: <div class="fragment"><pre class="fragment">
   r = input_rects[input_idx];
   printf(<span class="stringliteral">&quot;Iteration #%u: %dx%d%+d%+d\n&quot;</span>, input_idx, r.w, r.h, r.x, r.y);
   input_idx++;
   add_input_rect(&amp;r);
</pre></div></p>
<p>We now come to the tiler stuff, we add our new rectangle to it and get a new iterator for the tiler: <div class="fragment"><pre class="fragment">
   <a class="code" href="group__Eina__Tiler__Group.html#ga5a7eaf8984afbd801794bb17b8a1b4c4" title="Adds a rectangle to a tiler.">eina_tiler_rect_add</a>(tiler, &amp;r);
   itr = <a class="code" href="group__Eina__Tiler__Group.html#ga4cf2a6df653219c8e9cb7fbcf0c40954" title="Creates a iterator to access the tilers calculated rectangles.">eina_tiler_iterator_new</a>(tiler);
</pre></div></p>
<p>We now iterate over our tiler printing every rect it gives us and sowing it in the output panel: <div class="fragment"><pre class="fragment">   <a class="code" href="group__Eina__Iterator__Group.html#gad2f796ac4df0e500d25235c29821faa3" title="Definition for the macro to iterate over all elements easily.">EINA_ITERATOR_FOREACH</a>(itr, r1)
     {
        printf(<span class="stringliteral">&quot;\tOutput #%u: %dx%d%+d%+d\n&quot;</span>, out, r1-&gt;w, r1-&gt;h, r1-&gt;x, r1-&gt;y);
        add_output_rect(r1);
        out++;
     }
</pre></div></p>
<p>We of course must remember to free our iterator and that's it for this function: <div class="fragment"><pre class="fragment">   <a class="code" href="group__Eina__Iterator__Group.html#gaf9261991a4b05dc63e3401278a3281f8" title="Frees an iterator.">eina_iterator_free</a>(itr);

   <span class="keywordflow">return</span> <a class="code" href="group__Eina__Types__Group.html#ga05c12dacc8b4058994df842b41be85fc">EINA_TRUE</a>;
}
</pre></div></p>
<p>You should try many different inputs to see how the tiler works, here are a few suggestions: </p>
<ul>
<li>100x100+0+0 100x100+200+200 </li>
<li>100x100+0+0 100x100+5+5 100x100+10+10 100x100+15+15 100x100+20+20 </li>
<li>100x100+0+0 100x100+100+100 100x100+200+0 100x100+0+200 100x100+200+200 </li>
<li>10x10+0+0 10x10+10+10 10x10+20+0 10x10+0+20 10x10+20+20 </li>
</ul>
</div></div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
<hr size="1"/>
<center>
<small>Except as noted, this content - excluding the Code Examples - is licensed under <a href="http://creativecommons.org/licenses/by/3.0/legalcode" target="_blank">Creative Commons Attribution 3.0</a>
and all of the Code Examples contained herein are licensed under <a href="https://www.tizen.org/bsd-3-clause-license" target="_blank">BSD-3-Clause</a>.<br/>For details, see the <a href="https://www.tizen.org/content-license" target="_blank">Content License</a>.&nbsp;</small>
</center>
</body>
</html>
