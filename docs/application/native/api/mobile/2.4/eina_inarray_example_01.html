<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Tizen Native API: Eina inline array usage</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen_html_stylesheet.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Tizen Native API
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>The&#160;Basics&#160;of&#160;Tizen&#160;Native&#160;API&#160;Reference</span></a></li>
      <li><a href="modules.html"><span>Native&#160;API&#160;Reference</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">Eina inline array usage </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This example creates an inline array of chars, adds some elements, prints them, re-purposes the array to store ints, adds some elements and print that.</p>
<p>We are going to start with a function to compare ints. We need this because the '&gt;' operator is not a function and can't be used where Eina_Compare_Cb is needed. <div class="fragment"><pre class="fragment"></pre></div></p>
<p>And then move on to the code we actually care about, starting with variable declarations and eina initialization: <div class="fragment"><pre class="fragment"></pre></div></p>
<p>Creating an inline array is very simple, we just need to know what type we want to store: <div class="fragment"><pre class="fragment"></pre></div> </p>
<dl class="note"><dt><b>Note:</b></dt><dd>The second parameter(the step) is left at zero which means that eina chooses an appropriate value, this should <b>only</b> be changed if it's known, beforehand, that how many elements the array has.</dd></dl>
<p>Once we have an array we can start adding elements to it. Because the insertion function expects a memory address we have to put the value we want to store in a variable(this should be no problem since in the real world usage that's usually where the value is anyways): <div class="fragment"><pre class="fragment"></pre></div> </p>
<dl class="note"><dt><b>Note:</b></dt><dd>Because the inline array copies the value given to it we can later change <code>ch</code>, which we do, without affecting the contents of the array.</dd></dl>
<p>So let's add some more elements: <div class="fragment"><pre class="fragment"></pre></div></p>
<p>We then iterate over our array and print every position of it. The thing to note here is not so much the values, which are the expected 'a', 'b', 'c', and 'd', but rather the memory address of these values, they are sequential: <div class="fragment"><pre class="fragment"></pre></div></p>
<p>We are now going to use our array to store ints, so we need to first erase every member currently on the array: <div class="fragment"><pre class="fragment"></pre></div></p>
<p>And then to be able to store a different type on the same array, we use the <a class="el" href="group__Eina__Inline__Array__Group.html#ga97ceb13e335d8b8aae8dfcce735ec274" title="Initializes an inline array.">eina_inarray_step_set()</a> function, which is just like the <a class="el" href="group__Eina__Inline__Array__Group.html#ga38a116a1355055b470c31bb4f633e53b" title="Creates a new inline array.">eina_inarray_new()</a> function except it receives an already allocated memory. This time we're going to ask eina to use a step of size 4 because that's how many elements we are going to put in the array: <div class="fragment"><pre class="fragment"></pre></div> </p>
<dl class="note"><dt><b>Note:</b></dt><dd>Strictly speaking the reason to call <a class="el" href="group__Eina__Inline__Array__Group.html#ga97ceb13e335d8b8aae8dfcce735ec274" title="Initializes an inline array.">eina_inarray_step_set()</a> is not because we're storing a different type, but because our types have different sizes. Eina inline arrays don't actually know anything about types, they only deal with blocks of memory of a given size. </dd>
<dd>
Since <a class="el" href="group__Eina__Inline__Array__Group.html#ga97ceb13e335d8b8aae8dfcce735ec274" title="Initializes an inline array.">eina_inarray_step_set()</a> receives already allocated memory, you can(and it is in fact a good practice) use inline arrays that are not declared as pointers: <div class="fragment"><pre class="fragment"> <a class="code" href="struct__Eina__Inarray.html" title="Inline array structure.">Eina_Inarray</a> arr;
 <a class="code" href="group__Eina__Inline__Array__Group.html#ga97ceb13e335d8b8aae8dfcce735ec274" title="Initializes an inline array.">eina_inarray_step_set</a>(&amp;arr, <span class="keyword">sizeof</span>(arr), <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), 4);
</pre></div></dd></dl>
<p>And now to add our integer values to the array: <div class="fragment"><pre class="fragment"></pre></div></p>
<p>Just to change things up a bit we've left out the 99 value, but we still add it in such a way that it keeps the array ordered. There are many ways to do this, we could use <a class="el" href="group__Eina__Inline__Array__Group.html#ga7d85c813706f99c9d59ab14908a22add" title="Copies the data at the given position in the array.">eina_inarray_insert_at()</a>, or we could change the value of the last member using <a class="el" href="group__Eina__Inline__Array__Group.html#ga8dddffaaca8580d964bd19147d03ce33" title="Copies the data to the given position.">eina_inarray_replace_at()</a> and then append the values in the right order, but for no particular reason we're going to use <a class="el" href="group__Eina__Inline__Array__Group.html#gadf3babcfe8feeea716ddbabc3bbee373" title="Copies the data to the array at a position found by the comparison function.">eina_inarray_insert_sorted()</a> instead: <div class="fragment"><pre class="fragment"></pre></div></p>
<p>We then print the size of our array, and the array itself, much like last time the values are not surprising, and neither should it be that the memory addresses are contiguous: <div class="fragment"><pre class="fragment"></pre></div></p>
<p>Once done we free our array and shutdown eina: <div class="fragment"><pre class="fragment"></pre></div></p>
<p>The source for this example: <a class="el" href="eina_inarray_01_c.html">eina_inarray_01.c</a> </p>
</div></div><!-- contents -->
<hr size="1"/>
<center>
<small>Except as noted, this content - excluding the Code Examples - is licensed under <a href="http://creativecommons.org/licenses/by/3.0/legalcode" target="_blank">Creative Commons Attribution 3.0</a>
and all of the Code Examples contained herein are licensed under <a href="https://www.tizen.org/bsd-3-clause-license" target="_blank">BSD-3-Clause</a>.<br/>For details, see the <a href="https://www.tizen.org/content-license" target="_blank">Content License</a>.&nbsp;</small>
</center>
</body>
</html>
