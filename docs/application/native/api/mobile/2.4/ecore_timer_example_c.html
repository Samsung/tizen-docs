<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Tizen Native API: ecore timers - Scheduled events</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen_html_stylesheet.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Tizen Native API
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>The&#160;Basics&#160;of&#160;Tizen&#160;Native&#160;API&#160;Reference</span></a></li>
      <li><a href="modules.html"><span>Native&#160;API&#160;Reference</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">ecore timers - Scheduled events </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This example shows how to setup timer callbacks. It starts a timer that will tick (expire) every 1 second, and then setup other timers that will expire only once, but each of them will affect the first timer still executing with a different API, to demonstrate its usage. To see the full code for this example, click <a class="el" href="ecore_timer_example_8c-example.html">here</a>.</p>
<p>To demonstrate this, let's define some constants that will determine at which time each timer will expire:</p>
<p><div class="fragment"><pre class="fragment"></pre></div></p>
<p>These constants should tell by themselves what will be the behavior of the program, but I'll explain it anyway. The first timer is set to tick every 1 second, but all the other timers until the 6th one will be started concurrently at the beginning of the program. Each of them will expire at the specified time in these constants:</p>
<ul>
<li>The timer2, after 3 seconds of the program being executed, will add a delay of 3 seconds to timer1; </li>
<li>The timer3 will pause timer1 at 8.2 seconds; </li>
<li>timer4 will resume timer1 at 11.0 seconds; </li>
<li>timer5 will will change the interval of timer1 to 2 seconds; </li>
<li>timer6 will stop timer1 and start timer7 and timer8, with 1.1 and 1.2 seconds of interval, respectively; it also sets the precision to 0.2 seconds; </li>
<li>timer7 and timer8 will just print their expiration time.</li>
</ul>
<p><div class="fragment"><pre class="fragment"></pre></div></p>
<p>As almost all the other examples, we create a context structure to pass to our callbacks, so they can have access to the other timers. We also store the time of the program start in <code>_initial_time</code>, and use the function <code>_get_current_time</code> to retrieve the current time relative to that time. This will help demonstrate what is going on.</p>
<p>Now, the behavior and relationship between the timers that was described above is dictated by the following timer callbacks:</p>
<p><div class="fragment"><pre class="fragment"></pre></div></p>
<p>It's possible to see the same behavior as other Ecore callbacks here, returning <a class="el" href="group__Ecore__Main__Loop__Group.html#ga1ee9db07f9a46a8b20fb83e1c6dbed09">ECORE_CALLBACK_RENEW</a> when the timer needs to continue ticking, and <a class="el" href="group__Ecore__Main__Loop__Group.html#gae0c653baad8836232c0dc27f91f875d6">ECORE_CALLBACK_CANCEL</a> when it needs to stop its execution. Also notice that later on our program we are checking for the timers pointers in the context to see if they are still executing before deleting them, so we need to set these timer pointers to <code>NULL</code> when we are returning <a class="el" href="group__Ecore__Main__Loop__Group.html#gae0c653baad8836232c0dc27f91f875d6">ECORE_CALLBACK_CANCEL</a>. Otherwise the pointer would still be not <code>NULL</code>, but pointing to something that is invalid, since the timer would have already expired without renewing.</p>
<p>Now the main code, which will start the timers:</p>
<p><div class="fragment"><pre class="fragment"></pre></div></p>
<p>This code is very simple. Just after starting the library, it will save the current time to <code>_initial_time</code>, start all timers from 1 to 6, and begin the main loop. Everything should be running right now, displaying the time which each timer is expiring, and what it is doing to affect the other timers.</p>
<p>After returning from the main loop, every timer is checked to see if it's still alive and, in that case, deleted, before finalizing the library. This is not really necessary, since Ecore Shutdown function will already delete them for you, but it's good practice if you have other things going on after this point that could restart the main loop. </p>
</div></div><!-- contents -->
<hr size="1"/>
<center>
<small>Except as noted, this content - excluding the Code Examples - is licensed under <a href="http://creativecommons.org/licenses/by/3.0/legalcode" target="_blank">Creative Commons Attribution 3.0</a>
and all of the Code Examples contained herein are licensed under <a href="https://www.tizen.org/bsd-3-clause-license" target="_blank">BSD-3-Clause</a>.<br/>For details, see the <a href="https://www.tizen.org/content-license" target="_blank">Content License</a>.&nbsp;</small>
</center>
</body>
</html>
