<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Tizen Native API: Edje signals and messages</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen_html_stylesheet.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
</script>
<link rel="search" href="search-opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Tizen Native API"/>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Tizen Native API
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>The&#160;Basics&#160;of&#160;Tizen&#160;Native&#160;API&#160;Reference</span></a></li>
      <li><a href="modules.html"><span>Native&#160;API&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.php" method="get">
              <img id="MSearchSelect" src="search/mag.png" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('Example_Edje_Signals_Messages.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Edje signals and messages </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>In this example, we illustrate how Edje signals and Edje messages work.</p>
<p>We place, in the canvas, an Edje object along with a <b>red</b> border image to delimit its geometry. The object's group definition is so that we have four parts:</p>
<ul>
<li>a blue rectangle, aligned to the right</li>
<li>a white rectangle, aligned to the left</li>
<li>a text part, aligned to the center</li>
<li>a clipper rectangle on the blue rectangle</li>
</ul>
<p>The left rectangle is bound to a <b>color class</b>, so that we can multiply its colors by chosen values on the go:  <div class="fragment"><pre class="fragment"></pre></div></p>
<p>The <code>#define's</code> on the beginning will serve as message identifiers, for our accorded message interface between the code and the this theme file.</p>
<p>Let's move to the code, then. After instantiating the Edje object, we register two <b>signal callbacks</b> on it. The first one uses <b>globbing</b>, making all of the wheel mouse actions over the left rectangle to trigger <code>_mouse_wheel</code>. Note that those kind of signals are generated <b>internally</b> (and automatically) in Edje. The second is a direct signal match, to a (custom) signal we defined in the EDC, ourselves:  <div class="fragment"><pre class="fragment"></pre></div>  <div class="fragment"><pre class="fragment"></pre></div></p>
<p>That second callback is on a signal we emit on the theme, where we just translate Edje <code>"mouse,move"</code> internal events to the custom <code>"mouse,over"</code> one. When that signals reaches the code, we are, besides printing the signals' strings, sending a <b>message</b> back to the theme. We generate random values of color components and send them as an <a class="el" href="group__Edje__Object__Communication__Interface__Message.html#gga0d3b39bbf2f2f0c070d45edd5d0b0cfaaa392f6e98640e16c6b71f3dd19e18d39">EDJE_MESSAGE_INT_SET</a> message type:  <div class="fragment"><pre class="fragment"></pre></div>  <div class="fragment"><pre class="fragment"></pre></div></p>
<p>In our theme we'll be changing the <code>"cc"</code> color class' values with those integer values of the message, so that moving the mouse over the right rectangle will change the left one's colors:  <div class="fragment"><pre class="fragment"></pre></div></p>
<p>Now we're also sending messages <b>from the Edje object</b>, besides signals. We do so when one clicks with the left button over the left rectangle. With that, we change the text part's text, cycling between 3 pre-set strings declared in the EDC. With each new text string attribution, we send a string message to our code, with the current string as argument:  <div class="fragment"><pre class="fragment"></pre></div>  <div class="fragment"><pre class="fragment"></pre></div></p>
<p>To get the message in code, we have to register a message handler, as follows:  <div class="fragment"><pre class="fragment"></pre></div>  <div class="fragment"><pre class="fragment"></pre></div></p>
<p>To interact with the last missing feature -- emitting signals <b>from code</b> -- there's a command line interface to exercise it. A help string can be asked for with the 'h' key:  <div class="fragment"><pre class="fragment"></pre></div></p>
<p>The <code>'t'</code> command will send either <code>"part_right,show"</code> or <code>"part_right,hide"</code> signals to the Edje object (those being the emission part of the signal), which was set to react on them as the names indicate. We'll set the right rectangle's visibility on/off, respectively, for those two signals:  <div class="fragment"><pre class="fragment"></pre></div>  <div class="fragment"><pre class="fragment"></pre></div></p>
<p>The example's window should look like this picture:</p>
<div class="image">
<img src="edje-signals-messages-example.png" alt="edje-signals-messages-example.png"/>
</div>
  <p>The full example follows, along with its EDC file.</p>
<div class="fragment"><pre class="fragment"></pre></div> <div class="fragment"><pre class="fragment"></pre></div><p>To compile use this command: </p>
<div class="fragment"><pre class="fragment">
 * gcc -o edje-signals-messages edje-signals-messages.c -DPACKAGE_BIN_DIR=\"/Where/enlightenment/is/installed/bin\"
 * -DPACKAGE_LIB_DIR=\"/Where/enlightenment/is/installed/lib\"
 * -DPACKAGE_DATA_DIR=\"/Where/enlightenment/is/installed/share\"
 * `pkg-config --cflags --libs evas ecore ecore-evas edje`
 *
 * edje_cc signals-messages.edc
 * </pre></div> </div></div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
<hr size="1"/>
<center>
<small>Except as noted, this content - excluding the Code Examples - is licensed under <a href="http://creativecommons.org/licenses/by/3.0/legalcode" target="_blank">Creative Commons Attribution 3.0</a>
and all of the Code Examples contained herein are licensed under <a href="https://www.tizen.org/bsd-3-clause-license" target="_blank">BSD-3-Clause</a>.<br/>For details, see the <a href="https://www.tizen.org/content-license" target="_blank">Content License</a>.&nbsp;</small>
</center>
</body>
</html>
