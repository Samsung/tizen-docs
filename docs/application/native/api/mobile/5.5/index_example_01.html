<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Tizen Native API: Index widget example 1</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen_html_stylesheet.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
</script>
<link rel="search" href="search-opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Tizen Native API"/>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Tizen Native API
   &#160;<span id="projectnumber">5.5</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>The&#160;Basics&#160;of&#160;Tizen&#160;Native&#160;API&#160;Reference</span></a></li>
      <li><a href="modules.html"><span>Native&#160;API&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.php" method="get">
              <img id="MSearchSelect" src="search/mag.png" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('index_example_01.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Index widget example 1 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This code places an Elementary index widget on a window, which also has a very long list of arbitrary strings on it. The list is sorted alphabetically and the index will be used to index the first items of each set of strings beginning with an alphabet letter.</p>
<p>Below the list are some buttons, which are there just to exercise some index widget's API.</p>
<p>Here's how we instantiate it:  <div class="fragment"><pre class="fragment"></pre></div> where we're showing also the list being created. Note that we issue <a class="el" href="group__Elm__Win.html#ga505d6bd217e5ee01e82b548ec35986eb" title="Adds subobj as a resize object of window obj.">elm_win_resize_object_add()</a> on the index, so that it's set to have the whole window as its container. Then, we have to populate both list and index widgets:  <div class="fragment"><pre class="fragment">   <span class="keywordflow">for</span> (i = 0; i &lt; (<span class="keyword">sizeof</span>(dict) / <span class="keyword">sizeof</span>(dict[0])); i++)
     {
        lit = elm_list_item_append(list, dict[i], NULL, NULL, NULL, NULL);

        <span class="keywordflow">if</span> (curr != dict[i][0])
          {
             <a class="code" href="group__Elm__General.html#ga13a0c231414b86e62f68afe3c6fb462b">Elm_Object_Item</a> *index_it;
             <span class="keywordtype">char</span> buf[32];

             curr = dict[i][0];
             <span class="comment">/* indexing by first letters */</span>

             snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%c&quot;</span>, curr);
             index_it = elm_index_item_append(<span class="keywordtype">id</span>, buf, NULL, lit);

             <span class="comment">/* this is here just to demostrate the API call */</span>
             (void)elm_index_item_find(<span class="keywordtype">id</span>, lit);
             assert(elm_index_item_find(<span class="keywordtype">id</span>, lit) == index_it);

             <a class="code" href="group__Elm__General.html#ga2e17c3f1030712f3175f5b7812ada9a0" title="Set the function to be called when an item from the widget is freed.">elm_object_item_del_cb_set</a>(index_it, _index_item_del);
          }
     }
</pre></div></p>
<p>The strings populating the list come from a file  <div class="fragment"><pre class="fragment"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *dict[] = \
{
<span class="preprocessor">#include &quot;dict.txt&quot;</span>
};
</pre></div></p>
<p>We use the <code>curr</code> char variable to hold the last initial letter seen on that ordered list of strings, so that we're able to have an index item pointing to each list item starting a new letter "section". Note that our index item data pointers will be the list item handles. We are also setting a callback function to index items deletion events:  <div class="fragment"><pre class="fragment"><span class="keyword">static</span> <span class="keywordtype">void</span>
_index_item_del(<span class="keywordtype">void</span> *data, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj EINA_UNUSED, <span class="keywordtype">void</span> *event_info)
{
   printf(<span class="stringliteral">&quot;Deleting index node (%s). Comparing index &quot;</span>
           <span class="stringliteral">&quot;item data reported via callback with the one returned by &quot;</span>
           <span class="stringliteral">&quot;index&#39;s API on items: %s.\n&quot;</span>,
           elm_index_item_letter_get(event_info),
           data == <a class="code" href="group__Elm__General.html#ga4465a576c55d197878aeafc0bacf7bb4">elm_object_item_data_get</a>(event_info) ? <span class="stringliteral">&quot;OK&quot;</span> :
           <span class="stringliteral">&quot;FAIL, something went wrong&quot;</span>);
}
</pre></div></p>
<p>There, we show you that the <code>event_info</code> pointer will contain the item in question's data, i.e., a given list item's pointer. Because item data is also returned in the <code>data</code> argument on <code>Evas_Smart_Cb</code> functions, those two pointers must have the same values. On this deletion callback, we're deleting the referred list item too, just to exemplify that anything could be done there.</p>
<p>Next, we hook to two smart events of the index object:  <div class="fragment"><pre class="fragment"></pre></div>  <div class="fragment"><pre class="fragment"><span class="comment">/* &quot;delay,changed&quot; hook */</span>
<span class="keyword">static</span> <span class="keywordtype">void</span>
_index_changed(<span class="keywordtype">void</span> *data EINA_UNUSED, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj EINA_UNUSED, <span class="keywordtype">void</span> *event_info)
{
   elm_list_item_bring_in(<a class="code" href="group__Elm__General.html#ga4465a576c55d197878aeafc0bacf7bb4">elm_object_item_data_get</a>(event_info));
}

<span class="keyword">static</span> <span class="keywordtype">void</span>
_index_selected(<span class="keywordtype">void</span> *data EINA_UNUSED, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj, <span class="keywordtype">void</span> *event_info)
{
   <a class="code" href="group__Elm__General.html#ga13a0c231414b86e62f68afe3c6fb462b">Elm_Object_Item</a> *lit = event_info;

   printf(<span class="stringliteral">&quot;New index item selected. Comparing item reported&quot;</span>
           <span class="stringliteral">&quot; via callback with the selection returned by the API: &quot;</span>
           <span class="stringliteral">&quot;%s.\n&quot;</span>, lit == elm_index_selected_item_get(obj, 0) ? <span class="stringliteral">&quot;OK&quot;</span> :
           <span class="stringliteral">&quot;FAIL, something went wrong&quot;</span>);
}
</pre></div></p>
<p>Check that, whenever one holds the mouse pressed over a given index letter for some time, the list beneath it will roll down to the item pointed to by that index item. When one releases the mouse button, the second callback takes place. There, we check that the reported item data, on <code>event_info</code>, is the same reported by elm_index_selected_item_get(), which gives the last selection's data on the index widget.</p>
<p>The first of the three buttons that follow will call elm_index_autohide_disabled_set(), thus showing the index automatically for you, if it's not already visible, what is checked with elm_index_autohide_disabled_get(). The second button will exercise <b>deletion</b> of index item objects, by the following code:  <div class="fragment"><pre class="fragment"><span class="comment">/* delete an index item */</span>
<span class="keyword">static</span> <span class="keywordtype">void</span>
_item_del(<span class="keywordtype">void</span> *data, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj EINA_UNUSED, <span class="keywordtype">void</span> *event_info EINA_UNUSED)
{
   <a class="code" href="group__Elm__General.html#ga13a0c231414b86e62f68afe3c6fb462b">Elm_Object_Item</a> *it = elm_index_selected_item_get(data, 0);

   <span class="keywordflow">if</span> (!it) <span class="keywordflow">return</span>;

   printf(<span class="stringliteral">&quot;Deleting last selected index item, which had letter&quot;</span>
           <span class="stringliteral">&quot; %s (pointing to %p)\n&quot;</span>, elm_index_item_letter_get(it),
           <a class="code" href="group__Elm__General.html#ga4465a576c55d197878aeafc0bacf7bb4">elm_object_item_data_get</a>(it));

   <a class="code" href="group__Elm__General.html#gad1b5a0d41fa322b28000a290154ec3a4">elm_object_item_del</a>(it);
   elm_index_level_go(data, 0);
}
</pre></div></p>
<p>It will get the last index item selected's data and find the respective index item handle(<a class="el" href="group__Elm__General.html#ga13a0c231414b86e62f68afe3c6fb462b">Elm_Object_Item</a>) with elm_index_item_find(). We need the latter to query the indexing letter string from, with elm_index_item_letter_get(). Next, comes the deletion itself, which will also trigger the <code>_index_item_del</code> callback function, as said above.</p>
<p>The third button, finally, will exercise elm_index_item_clear(), which will delete <b>all</b> of the index's items.</p>
<p>This is how the example program's window looks like with the index widget hidden: </p>
<div class="image">
<img src="index_example_00.png" alt="index_example_00.png"/>
</div>
 <p>When it's shown, it's like the following figure: </p>
<div class="image">
<img src="index_example_01.png" alt="index_example_01.png"/>
</div>
 <p>See the full <a class="el" href="index_example_01_c.html">source code</a> for this example. </p>
</div></div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
<hr size="1"/>
<center>
<small>Except as noted, this content - excluding the Code Examples - is licensed under <a href="http://creativecommons.org/licenses/by/3.0/legalcode" target="_blank">Creative Commons Attribution 3.0</a>
and all of the Code Examples contained herein are licensed under <a href="https://www.tizen.org/bsd-3-clause-license" target="_blank">BSD-3-Clause</a>.<br/>For details, see the <a href="https://www.tizen.org/content-license" target="_blank">Content License</a>.&nbsp;</small>
</center>
</body>
</html>
