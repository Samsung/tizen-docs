<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Tizen Native API: Safe Pointer</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen_html_stylesheet.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
</script>
<link rel="search" href="search-opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Tizen Native API"/>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Tizen Native API
   &#160;<span id="projectnumber">5.0</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>The&#160;Basics&#160;of&#160;Tizen&#160;Native&#160;API&#160;Reference</span></a></li>
      <li><a href="modules.html"><span>Native&#160;API&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.php" method="get">
              <img id="MSearchSelect" src="search/mag.png" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('group__Eina__Safepointer__Group.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#typedef-members">Typedefs</a>  </div>
  <div class="headertitle">
<div class="title">Safe Pointer</div>  </div>
<div class="ingroups"><a class="el" href="group__Eina__Containers__Group.html">Containers</a></div></div><!--header-->
<div class="contents">
<hr/><a name="details" id="details"></a><h2> </h2>
<p>These functions provide a wrapper that protect access to pointers. </p>
<p>Eina_Safepointer is an pointer to index converter that allows an increased level of safety by forbidding direct access to the pointer. The protection works by using a set of indirection tables that are mmapped and mprotected against write access. Thus the pointer they store and that map to a specific index is always correct. Also once a pointer is unregistered the index won't be served back for 2^8 on 32 bits system and 2^28 on 64 bits system for that specific slot. Finally we guarantee that the lower 2 bits of the returned index are actually never used and completely ignored by our API. So you can safely store whatever information you want in it, we will ignore it and treat as if it wasn't there.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>The use of Eina_Safepointer is thread safe. </dd></dl>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Eina__Safepointer__Group.html#ga2202ee963589cf46aad92612e10c0533">eina_safepointer_get</a> (const <a class="el" href="group__Eina__Safepointer__Group.html#gaceb5489a49e4ff5eb71fe0e261707010">Eina_Safepointer</a> *safe)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a pointer and get an Eina_Safepointer that maps to it.  <a href="#ga2202ee963589cf46aad92612e10c0533"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct _Eina_Safepointer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Eina__Safepointer__Group.html#gaceb5489a49e4ff5eb71fe0e261707010">Eina_Safepointer</a></td></tr>
</table>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="gaceb5489a49e4ff5eb71fe0e261707010"></a><!-- doxytag: member="eina_safepointer.h::Eina_Safepointer" ref="gaceb5489a49e4ff5eb71fe0e261707010" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__Eina__Safepointer__Group.html#gaceb5489a49e4ff5eb71fe0e261707010">Eina_Safepointer</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Type of the protected index. </p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga2202ee963589cf46aad92612e10c0533"></a><!-- doxytag: member="eina_safepointer.h::eina_safepointer_get" ref="ga2202ee963589cf46aad92612e10c0533" args="(const Eina_Safepointer *safe)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void* <a class="el" href="group__Eina__Safepointer__Group.html#ga2202ee963589cf46aad92612e10c0533">eina_safepointer_get</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__Eina__Safepointer__Group.html#gaceb5489a49e4ff5eb71fe0e261707010">Eina_Safepointer</a> *&#160;</td>
          <td class="paramname"><em>safe</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Register a pointer and get an Eina_Safepointer that maps to it. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">target</td><td>The pointer to register. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A valid pointer that is an index to the mapped pointer.</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>It will return <code>NULL</code> on error or if <code>target</code> is <code>NULL</code>.</dd>
<dd>
The lower 2 bits of the returned pointer will always be 0.</dd>
<dd>
The returned pointer can be used like a pointer, but cannot be touched except with Eina_Safepointer functions.</dd></dl>
<dl class="user"><dt><b>Since (EFL) :</b></dt><dd>1.18 Unregister an Eina_Safepointer and the pointer that maps to it.</dd></dl>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">safe</td><td>The index to unregister from the mapping.</td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd>This function will ignore the lower 2 bits of the given pointer.</dd></dl>
<dl class="user"><dt><b>Since (EFL) :</b></dt><dd>1.18 Get the associated pointer from an Eina_Safepointer mapping.</dd></dl>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">safe</td><td>The Eina_Safepointer index to lookup at. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The pointer registered with that index or <code>NULL</code> in any other case.</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>It is always safe to ask for a pointer for any value of the mapping. If the pointer is invalid or <code>NULL</code>, we will return <code>NULL</code> and not crash. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
<hr size="1"/>
<center>
<small>Except as noted, this content - excluding the Code Examples - is licensed under <a href="http://creativecommons.org/licenses/by/3.0/legalcode" target="_blank">Creative Commons Attribution 3.0</a>
and all of the Code Examples contained herein are licensed under <a href="https://www.tizen.org/bsd-3-clause-license" target="_blank">BSD-3-Clause</a>.<br/>For details, see the <a href="https://www.tizen.org/content-license" target="_blank">Content License</a>.&nbsp;</small>
</center>
</body>
</html>
